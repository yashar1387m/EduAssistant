<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" 
    href='data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" viewBox="0 0 384 512"><path fill="%2315803d" d="M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-384c0-35.3-28.7-64-64-64L64 0zM96 64l192 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32L96 160c-17.7 0-32-14.3-32-32l0-32c0-17.7 14.3-32 32-32zm16 168a24 24 0 1 1 -48 0 24 24 0 1 1 48 0zm80 24a24 24 0 1 1 0-48 24 24 0 1 1 0 48zm128-24a24 24 0 1 1 -48 0 24 24 0 1 1 48 0zM88 352a24 24 0 1 1 0-48 24 24 0 1 1 0 48zm128-24a24 24 0 1 1 -48 0 24 24 0 1 1 48 0zm80 24a24 24 0 1 1 0-48 24 24 0 1 1 0 48zM64 424c0-13.3 10.7-24 24-24l112 0c13.3 0 24 10.7 24 24s-10.7 24-24 24L88 448c-13.3 0-24-10.7-24-24zm232-24c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24z"/></svg>'>
    <title>✨کمک‌یار آموزشی</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Vazirmatn Font -->
    <link href="https://cdn.jsdelivr.net/gh/rastikerdar/vazirmatn@v33.003/Vazirmatn-font-face.css" rel="stylesheet" type="text/css" />

    <!-- KaTeX for Math Formulas -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" xintegrity="sha384-n8MVd4RsNIU0KOVEMckDpbCjaWr2Ugeh4/EGactnsCJO8e2i7gqY+2eJV6gwUqML" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js" xintegrity="sha384-XjKyOOlGwcjNTAIQHIpgOno0Hl1YQqzUOEleOLALmuqehneUG+vnGctmUb0ZY0l8" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js" xintegrity="sha384-+VBxd3r6XgURycqtZ117nYw44OOcIax56Z4dCRWbxyPt0Koah1uHoK0o4+/RRE05" crossorigin="anonymous"></script>

    <!-- Function Plotter for Graphs -->
    <script src="https://d3js.org/d3.v6.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/function-plot/dist/function-plot.js"></script>


    <style>
        body {
            font-family: 'Vazirmatn', sans-serif;
            background-color: #f8fafc; /* A slightly off-white for better viewing */
        }

        /* General button style */
        .btn-3d {
            border-radius: 12px;
            border: 1px solid rgba(0, 0, 0, 0.1);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06), inset 0 -3px 0 0 rgba(0, 0, 0, 0.2);
            transition: all 0.15s ease-in-out;
            transform: translateY(0);
        }

        .btn-3d:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px -1px rgba(0, 0, 0, 0.1), 0 4px 6px -1px rgba(0, 0, 0, 0.07), inset 0 -3px 0 0 rgba(0, 0, 0, 0.2);
        }
        
        .btn-3d:active, .btn-3d.active {
            transform: translateY(1px);
            box-shadow: 0 2px 3px -1px rgba(0, 0, 0, 0.1), inset 0 -2px 0 0 rgba(0, 0, 0, 0.2);
        }

        /* Specific colors */
        .btn-green {
            background-color: #15803d; /* dark green */
            color: white;
        }
        .btn-green:hover {
            background-color: #16a34a; /* lighter green */
        }
        .btn-gray {
            background-color: #f1f5f9; /* light gray */
            color: #1e293b;
        }
        .btn-gray:hover {
            background-color: #e2e8f0;
        }
	button.btn-3d.rounded-full {
	    border-radius: 999999999999px;
	}

        .btn-red {
            background-color: #f1f5f9;
            color: #dc2626; /* red */
        }
        .btn-red:hover {
             background-color: #e2e8f0;
        }

        .help-button {
            background-color: #808080;
            color: white;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            animation: popIn 0.5s ease-out, pulse 1.5s infinite;
        }
        
        @keyframes popIn {
            from { transform: scale(0); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(51, 51, 51, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(51, 51, 51, 0); }
            100% { box-shadow: 0 0 0 0 rgba(51, 51, 51, 0); }
        }

        .help-button:hover {
            background-color: #343A40;
            color: white;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            transform: scale(1.1);
        }

        /* Hide pages by default */
        .page {
            display: none;
        }
        .page.active {
            display: block;
            animation: fadeIn 0.3s ease-out;
        }

        @keyframes fadeIn {
            from { transform: scale(0.3); opacity: 0; transform: translateY(-20px); }
            to { transform: scale(1); opacity: 1; transform: translateY(0); }
        }

    	.fadeIn-active {
	
            animation: fadeIn 0.5s ease-out forwards;
	    }
        
        /* Splash Screen Animation */
        #splash-screen {
            transition: opacity 1s ease-in-out;
        }

        /* Calculator display style */
        .calculator-display {
            background-color: #dcfce7; /* very light green */
            border-radius: 8px;
            padding: 1rem;
            text-align: left;
            overflow-x: auto;
            direction: ltr; /* Display for numbers is LTR */
            position: relative; /* Needed for backspace button positioning */
        }
        .calculator-display .history {
            color: #6b7280; /* gray */
            font-size: 0.9rem;
            min-height: 1.5rem;
        }
        .calculator-display .current-input {
            color: #1e293b; /* black */
            font-size: 2.2rem;
            font-weight: bold;
            word-wrap: break-word;
            padding-right: 2.5rem; /* Make space for backspace button */
        }
        
        /* Custom Message Box (Modal) */
        .message-box-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.5); display: flex;
            justify-content: center; align-items: center; z-index: 100;
            opacity: 0; pointer-events: none; transition: opacity 0.3s ease-in-out;
        }
        .message-box-overlay.visible { opacity: 1; pointer-events: auto; }
        .message-box {
            background-color: white; padding: 2rem; border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3); text-align: center;
            max-width: 90%; width: 400px; transform: scale(0.9);
            transition: transform 0.3s ease-in-out;
        }
        .message-box-overlay.visible .message-box { transform: scale(1); }

        /* KaTeX display formulas alignment */
        .katex-display { margin-left: auto; margin-right: auto; direction: ltr; }
        span.katex { direction: ltr; display: inline-block; }

        /* Advanced Calculator Styles */
        .palette-tabs button { transition: all 0.2s ease-in-out; border-bottom: 3px solid transparent; }
        .palette-tabs button.active { color: #15803d; border-bottom-color: #15803d; }
        .palette-content { display: none; }
        .palette-content.active { display: grid; }
        .math-symbol-btn { display: flex; align-items: center; justify-content: center; font-size: 1.1rem; min-height: 50px; }
        
	.kamiAdvnc-output {
            text-align: justify;
            text-justify: inter-word;
	}
        #latex-preview {
            min-height: 50px;
            text-align: center;
            direction: rtl;
        }
        
        #latex-preview .katex-error {
            color: #ef4444; /* red */
        }

        /* Table Styles */
        .ai-table { width: 100%; border-collapse: collapse; margin-top: 1rem; margin-bottom: 1rem; }
        .ai-table th, .ai-table td { border: 1px solid #d1d5db; padding: 0.75rem; text-align: right; }
        .ai-table th { background-color: #f3f4f6; font-weight: bold; }
        .ai-table tr:nth-child(even) { background-color: #f9fafb; }

        .converter-input {
            border-radius: 0.75rem; /* گردتر */
            padding: 1rem 1.25rem;
            width: 100%;
            border: 2px solid #e5e7eb;
            transition: border-color 0.2s, box-shadow 0.2s;
            text-align: left; /* برای اعداد لاتین */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05);
        }
        .converter-input:focus {
            border-color: #3b82f6;
            outline: none;
            box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.3);
        }

    </style>
</head>
<body class="antialiased text-slate-800">

    <!-- Splash Screen -->
    <div id="splash-screen" class="fixed inset-0 bg-white flex flex-col items-center justify-center z-50">
	<svg xmlns="http://www.w3.org/2000/svg" width="160" height="160" viewBox="0 0 384 512"><path fill="#15803d" d="M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-384c0-35.3-28.7-64-64-64L64 0zM96 64l192 0c17.7 0 32 14.3 32 32l0 32c0 17.7-14.3 32-32 32L96 160c-17.7 0-32-14.3-32-32l0-32c0-17.7 14.3-32 32-32zm16 168a24 24 0 1 1 -48 0 24 24 0 1 1 48 0zm80 24a24 24 0 1 1 0-48 24 24 0 1 1 0 48zm128-24a24 24 0 1 1 -48 0 24 24 0 1 1 48 0zM88 352a24 24 0 1 1 0-48 24 24 0 1 1 0 48zm128-24a24 24 0 1 1 -48 0 24 24 0 1 1 48 0zm80 24a24 24 0 1 1 0-48 24 24 0 1 1 0 48zM64 424c0-13.3 10.7-24 24-24l112 0c13.3 0 24 10.7 24 24s-10.7 24-24 24L88 448c-13.3 0-24-10.7-24-24zm232-24c13.3 0 24 10.7 24 24s-10.7 24-24 24-24-10.7-24-24 10.7-24 24-24z"/></svg>
        <p class="text-3xl text-center mt-4 font-bold text-green-800">✨کمک‌یار آموزشی✨</p>
    </div>

    <!-- Main Container -->
    <div id="main-container" class="max-w-4xl mx-auto p-4 opacity-0 transition-opacity duration-500">
        
        <!-- Header -->
        <header id="page-header" class="mb-6 sticky top-0 backdrop-blur-sm py-3 z-10 hidden">
            <div class="flex items-center justify-between">
                <h1 id="page-title" class="text-3xl font-bold text-slate-900"></h1>
                <div class="flex items-center gap-2">
                     <button onclick="navigateTo('home-page')" class="btn-3d btn-gray p-2 rounded-full">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                    </button>
                    <button onclick="goBack()" class="btn-3d btn-gray p-2 rounded-full">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="19" y1="12" x2="5" y2="12"></line><polyline points="12 19 5 12 12 5"></polyline></svg>
                    </button>
                </div>
            </div>
        </header>

        <!-- Home Page -->
        <div id="home-page" class="page active">
             <h1 class="text-3xl font-bold text-center mb-8 text-slate-900">🏠 صفحه اصلی</h1>
             <div class="grid grid-cols-6 md:grid-cols-6 gap-4 text-lg">
                <!-- Row 1 -->
                <button onclick="navigateTo('ai-solver-page', '🤖 پاسخ مسئله با هوش مصنوعی')" class="w-full text-center p-6 btn-3d btn-green col-span-6 md:col-span-6">🤖 پاسخ مسئله با هوش مصنوعی</button>
                
                <!-- Row 2 -->
                <button onclick="navigateTo('calculator-page', 'ماشین حساب')" class="w-full text-center p-6 btn-3d btn-green col-span-3 md:col-span-3">🧮 ماشین حساب</button>
                <button onclick="navigateTo('converter-page', '📏 تبدیل واحد')" class="w-full text-center p-6 btn-3d btn-green col-span-3 md:col-span-3">📏 تبدیل واحد</button>

                <!-- Row 3 -->
                <button onclick="navigateTo('math-page', 'ریاضیات')" class="w-full text-center p-6 btn-3d btn-green col-span-3 md:col-span-3">📐 ریاضیات</button>
                <button onclick="navigateTo('physics-page', 'فیزیک')" class="w-full text-center p-6 btn-3d btn-green col-span-3 md:col-span-3">⚛️ فیزیک</button>

                <!-- Row 4 -->
                <button onclick="navigateTo('chemistry-page', 'شیمی')" class="w-full text-center p-6 btn-3d btn-green col-span-3 md:col-span-3">🧪 شیمی</button>
                <button onclick="navigateTo('biology-page', 'زیست‌شناسی')" class="w-full text-center p-6 btn-3d btn-green col-span-3 md:col-span-3">🧬 زیست</button>

                <!-- Row 5 -->
                <button onclick="navigateTo('geology-page', 'زمین‌شناسی')" class="w-full text-center p-6 btn-3d btn-green col-span-3 md:col-span-3">🌍 زمین‌شناسی</button>
                <button onclick="navigateTo('astrology-page', 'نجوم')" class="w-full text-center p-6 btn-3d btn-green col-span-3 md:col-span-3">🔭 نجوم</button>

                <!-- Row 6 -->
                <button onclick="navigateTo('persian-page', 'ادبیات فارسی')" class="w-full text-center p-6 btn-3d btn-green col-span-2 md:col-span-2">📜 ادبیات فارسی ✍️</button>
                <button onclick="navigateTo('english-page', 'انگلیسی')" class="w-full text-center p-6 btn-3d btn-green col-span-2 md:col-span-2">🇬🇧 زبان انگلیسی ✍️</button>
                <button onclick="navigateTo('arabic-page', 'عربی')" class="w-full text-center p-6 btn-3d btn-green col-span-2 md:col-span-2">🇸🇦 زبان عربی ✍️</button>
                 
                <!-- Row 7 -->
                <button onclick="navigateTo('simulations-page', 'آزمایشات')" class="w-full text-center p-6 btn-3d btn-green col-span-3 md:col-span-3">🔬 آزمایشات</button>
                <button onclick="navigateTo('games-page', 'بازی‌ها')" class="w-full text-center p-6 btn-3d btn-green col-span-3 md:col-span-3">🎮 بازی‌ها</button>
             </div>
             <footer class="text-center mt-7 text-gray-500">
                <p>سازنده: کامیار گرگانلی دوجی</p>
             </footer>
        </div>

        <!-- AI Solver Page -->
        <div id="ai-solver-page" class="page">
            <div class="text-center">
                <h2 class="text-2xl font-bold">KamiAI</h2>
                <p class="mb-4 mt-2 text-gray-600">
                    این بخش با استفاده از هوش مصنوعی KamiAI مسائل پیچیده شما را حل می‌کند.
                </p>
            </div>
            <div class="flex items-center gap-1 bg-white border rounded-lg shadow-inner p-1">
                <textarea id="ai-input" class="flex-grow w-full p-4 min-h-[10px] bg-transparent focus:outline-none resize-none self-center" data-gramm="false" contenteditable="true" role="textbox" aria-multiline="true" max-row="7" placeholder="مسئله خود را وارد کنید..." rows="1" style="overflow: hidden;"></textarea>
                <button title="ضمیمه کردن فایل" onclick="document.getElementById('file-input').click()" class="mb-2 p-2 self-end text-gray-500 hover:text-gray-800">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-paperclip"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg>
                </button>
                <input type="file" id="file-input" class="hidden" accept="image/*">
                <button onclick="solveWithAI(false)" title="بپرس" class="mb-2 p-2 btn-3d btn-green text-xl h-full rounded-full self-end"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"  viewBox="0 0 2200 2200"><g transform="scale(2.25) translate(-1050, -150)"><path style="fill:#FFFFFF;" d="M1346.535,606.039c2.16,4.919,2.16,10.561,0,15.479l-117.291,267.063		c-9.539,21.723-4.693,46.429,12.349,62.936c10.795,10.455,24.719,15.916,38.917,15.916c8.219,0,16.531-1.83,24.38-5.581		l622.408-297.39c19.711-9.418,31.955-28.838,31.955-50.683c0-21.845-12.244-41.266-31.955-50.684l-622.407-297.39		c-21.409-10.229-46.254-6.173-63.298,10.335c-17.043,16.508-21.89,41.211-12.349,62.936L1346.535,606.039z M1267.282,302.563		c1.64-1.587,6.434-5.566,13.233-5.566c2.556,0,5.395,0.563,8.456,2.025l622.408,297.39c6.855,3.276,10.949,9.768,10.949,17.367		H1385.07c0-7.705-1.576-15.41-4.729-22.588l-117.291-267.063C1258.058,312.758,1265.027,304.747,1267.282,302.563z"/></g></svg></button>
            </div>
            <!-- File Preview Container -->
            <div id="file-preview-container" class="mt-2 hidden items-center justify-between p-2 bg-gray-100 rounded-lg">
                <div class="flex items-center gap-2 overflow-hidden">
                    <img id="file-preview-image" src="" alt="Preview" class="w-10 h-10 object-cover rounded">
                    <span id="file-preview-name" class="text-sm text-gray-700 truncate"></span>
                </div>
                <button onclick="cancelFile()" title="لغو فایل" class="p-1 text-red-500 hover:text-red-700">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="relative mt-6">
                 <div id="ai-output" class="bg-white p-4 rounded-lg shadow min-h-[100px] mt-6">
                    <p class="text-gray-500 text-center">پاسخ در اینجا نمایش داده می‌شود...</p>
                 </div>
                 <button id="tts-button" onclick="playTTS()" class="absolute top-2 left-2 p-2 text-gray-500 hover:bg-gray-200 rounded-full transition hidden" title="خواندن متن">
                    <!-- Speaker Icon -->
                    <svg id="tts-icon-play" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-volume-2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>
                    <!-- Loading Icon -->
                    <svg id="tts-icon-loading" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-loader animate-spin hidden"><line x1="12" y1="2" x2="12" y2="6"></line><line x1="12" y1="18" x2="12" y2="22"></line><line x1="4.93" y1="4.93" x2="7.76" y2="7.76"></line><line x1="16.24" y1="16.24" x2="19.07" y2="19.07"></line><line x1="2" y1="12" x2="6" y2="12"></line><line x1="18" y1="12" x2="22" y2="12"></line><line x1="4.93" y1="19.07" x2="7.76" y2="16.24"></line><line x1="16.24" y1="7.76" x2="19.07" y2="4.93"></line></svg>
                     <!-- Pause Icon -->
                    <svg id="tts-icon-pause" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-pause hidden"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>
                 </button>
            </div>
        </div>

        <!-- Calculator Page -->
        <div id="calculator-page" class="page">
            <div id="calculator-container" class="max-w-sm mx-auto bg-slate-200 p-4 rounded-xl shadow-lg">
            	<div class="text-center mb-3">
                 	<button id="calc-mode-toggle" class="px-20 py-2 btn-3d btn-gray" onclick="navigateTo('advanced-calculator-page', 'ماشین حساب پیشرفته')">ماشین حساب پیشرفته</button>
            	</div>
                <!-- Display -->
                <div class="calculator-display mb-4">
                    <div id="calc-history" class="history"></div>
                    <div id="calc-input" class="current-input">0</div>
                    <button id="calc-backspace" class="absolute top-1/2 right-3 -translate-y-1/2 text-slate-600 hover:text-slate-900 active:scale-90 transition-transform">
                        <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 4H8l-7 8 7 8h13a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2z"></path><line x1="18" y1="9" x2="12" y2="15"></line><line x1="12" y1="9" x2="18" y2="15"></line></svg>
                    </button>
                </div>
                <!-- Buttons Grid -->
                <div class="grid grid-cols-4 gap-3 text-2xl font-semibold">
                    <!-- Standard Buttons -->
                    <button data-key="C" class="btn-3d btn-red p-4">C</button>
                    <button data-key=")" class="btn-3d btn-gray p-4">(</button>
                    <button data-key="(" class="btn-3d btn-gray p-4">)</button>
                    <button data-key="÷" class="btn-3d btn-gray p-4">÷</button>

                    <button data-key="7" class="btn-3d btn-gray p-4">7</button>
                    <button data-key="8" class="btn-3d btn-gray p-4">8</button>
                    <button data-key="9" class="btn-3d btn-gray p-4">9</button>
                    <button data-key="×" class="btn-3d btn-gray p-4">×</button>

                    <button data-key="4" class="btn-3d btn-gray p-4">4</button>
                    <button data-key="5" class="btn-3d btn-gray p-4">5</button>
                    <button data-key="6" class="btn-3d btn-gray p-4">6</button>
                    <button data-key="-" class="btn-3d btn-gray p-4">-</button>

                    <button data-key="1" class="btn-3d btn-gray p-4">1</button>
                    <button data-key="2" class="btn-3d btn-gray p-4">2</button>
                    <button data-key="3" class="btn-3d btn-gray p-4">3</button>
                    <button data-key="+" class="btn-3d btn-gray p-4">+</button>
                    
                    <button data-key="±" class="btn-3d btn-gray p-4">+/-</button>
                    <button data-key="0" class="btn-3d btn-gray p-4">0</button>
                    <button data-key="." class="btn-3d btn-gray p-4">.</button>
                    <button data-key="=" class="btn-3d btn-green p-4">=</button>
                </div>
            </div>
        </div>

        <!-- Advanced Calculator Page -->
        <div id="advanced-calculator-page" class="page">
             <div class="flex flex-col items-center gap-2 bg-white border rounded-lg shadow-inner p-2">
                 <div class="relative w-full">
                     <input type="text" id="advanced-calc-input" class="w-full p-3 bg-transparent focus:outline-none text-xl !text-left pr-14" dir="ltr" placeholder="آنچه می خواهید محاسبه کنید را وارد کنید...">
                     <button onclick="solveWithAI(true)" class="absolute right-2 top-1/2 -translate-y-1/2 p-2 rounded-lg bg-green-700 text-white hover:bg-green-800 transition-colors font-bold text-2xl w-10 h-10 flex items-center justify-center" title="محاسبه">
                         =
                     </button>
                 </div>
                 <div class="w-full h-px bg-slate-200"></div>
                 <div class="flex items-center gap-2 w-full">
                    <button title="ضمیمه کردن فایل" onclick="document.getElementById('file-input-advanced').click()" class="p-2 text-gray-500 hover:text-gray-800">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"></path></svg>
                    </button>
                    <input type="file" id="file-input-advanced" class="hidden" accept="image/*">
                    <div id="file-preview-container-advanced" class="hidden flex-grow items-center justify-between p-1 bg-gray-100 rounded-lg text-sm">
                         <span id="file-preview-name-advanced" class="truncate"></span>
                         <button onclick="cancelFileAdvanced()" title="لغو فایل" class="p-1 text-red-500 hover:text-red-700">
                             <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                         </button>
                    </div>
                 </div>
             </div>

            <!-- Live LaTeX Preview -->
            <div id="latex-preview" class="p-4 bg-gray-50 rounded-lg mt-2 text-xl" dir="rtl"></div>

             <!-- Math Palette -->
             <div id="math-palette" class="bg-slate-200 rounded-lg p-2 mt-4">
                 <div class="palette-tabs flex justify-around border-b border-slate-300 mb-2 text-xl md:text-2xl text-slate-500">
                     <button class="p-2 active" data-palette="basic" title="پایه">★</button>
                     <button class="p-2" data-palette="radical" title="توان‌ها">√</button>
                     <button class="p-2" data-palette="calculus" title="حسابان">∫∂</button>
                     <button class="p-2" data-palette="matrix" title="‌ماتریس‌ها">(::)</button>
                     <button class="p-2" data-palette="trig" title="مثلثات">sin</button>
                     <button class="p-2" data-palette="operators" title="عملگرها">✘✚</button>
                     <button class="p-2" data-palette="greeks" title="نمادها و حروف یونانی">αω</button>
                 </div>
                 <div id="palette-content-basic" class="palette-content active grid-cols-5 md:grid-cols-8 gap-1"></div>
                 <div id="palette-content-radical" class="palette-content grid-cols-5 md:grid-cols-8 gap-1"></div>
                 <div id="palette-content-calculus" class="palette-content grid-cols-5 md:grid-cols-8 gap-1"></div>
                 <div id="palette-content-matrix" class="palette-content grid-cols-5 md:grid-cols-8 gap-1"></div>
                 <div id="palette-content-trig" class="palette-content grid-cols-5 md:grid-cols-8 gap-1"></div>
                 <div id="palette-content-operators" class="palette-content grid-cols-5 md:grid-cols-9 gap-1"></div>
                 <div id="palette-content-greeks" class="palette-content grid-cols-5 md:grid-cols-11 gap-1"></div>
             </div>

             <div id="plot-container" class="my-6 item-center hidden"></div>
             <div id="kami-output" class="kamiAdvnc-output bg-white p-4 rounded-lg shadow min-h-[150px] mt-6" prose prose-slate max-w-none text-justify">
                 <p class="text-gray-500 text-center">پاسخ KamiAI در اینجا نمایش داده می‌شود...</p>
             </div>
        </div>

        <!-- Unit Converter Page -->
        <div id="converter-page" class="page">
             <div class="border-b border-gray-200 bg-white shadow rounded-lg">
                 <nav class="flex-nowrap overflow-x-auto flex -mb-px" id="converter-tabs">
                    <button class="converter-tab-btn whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300 transition duration-200" data-target="con-length" data-quantity-key="طول">طول</button>
                    <button class="converter-tab-btn whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300 transition duration-200" data-target="con-area" data-quantity-key="مساحت">مساحت</button>
                    <button class="converter-tab-btn whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300 transition duration-200" data-target="con-volume" data-quantity-key="حجم">حجم</button>
                    <button class="converter-tab-btn whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300 transition duration-200" data-target="con-mass" data-quantity-key="جرم">جرم</button>
                    <button class="converter-tab-btn whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300 transition duration-200" data-target="con-time" data-quantity-key="زمان">زمان</button>
                    <button class="converter-tab-btn whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300 transition duration-200" data-target="con-energy" data-quantity-key="انرژی">انرژی</button>
                    <button class="converter-tab-btn whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300 transition duration-200" data-target="con-temp" data-quantity-key="دما">دما</button>
                    <button class="converter-tab-btn whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300 transition duration-200" data-target="con-angle" data-quantity-key="زاویه">زاویه</button>
                    <button class="converter-tab-btn whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300 transition duration-200" data-target="con-vlocity" data-quantity-key="سرعت">سرعت</button>
                    <button class="converter-tab-btn whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300 transition duration-200" data-target="con-data" data-quantity-key="داده">داده</button>
                    <button class="converter-tab-btn whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300 transition duration-200" data-target="con-charge" data-quantity-key="بار الکتریکی">بار الکتریکی</button>
                    <button class="converter-tab-btn whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300 transition duration-200" data-target="con-B" data-quantity-key="میدان مغناطیسی">میدان مغناطیسی</button>
                 </nav>
                 <div id="error-message" class="mb-4 text-center text-sm font-medium text-red-600 hidden p-3 bg-red-100 rounded-lg">لطفاً یک عدد معتبر برای تبدیل وارد کنید.</div>
                 <div id="conversion-content-wrapper" class="relative border-t border-gray-200">
                    <!-- Tab content containers -->
                    <div id="con-length" class="con-tab-content space-y-2"></div>
                    <div id="con-area" class="con-tab-content space-y-2 hidden"></div>
                    <div id="con-volume" class="con-tab-content space-y-2 hidden"></div>
                    <div id="con-mass" class="con-tab-content space-y-2 hidden"></div>
                    <div id="con-time" class="con-tab-content space-y-2 hidden"></div>
                    <div id="con-energy" class="con-tab-content space-y-2 hidden"></div>
                    <div id="con-temp" class="con-tab-content space-y-2 hidden"></div>
                    <div id="con-angle" class="con-tab-content space-y-2 hidden"></div>
                    <div id="con-vlocity" class="con-tab-content space-y-2 hidden"></div>
                    <div id="con-data" class="con-tab-content space-y-2 hidden"></div>
                    <div id="con-charge" class="con-tab-content space-y-2 hidden"></div>
                    <div id="con-B" class="con-tab-content space-y-2 hidden"></div>
                 </div>
             </div>
        	<div class="mt-6 border-t border-gray-200">
                    <h2 class="mt-3 text-2xl font-bold text-center">✨مبدل واحد هوشمند📏</h2>
                    <p class="mt-2 text-gray-600 text-center">درخواست تبدیل خود را که در برنامه نبوده است، به زبان ساده وارد کنید تا با کمک هوش مصنوعی KamiAI به درخواستتان پاسخ دهیم.</p>
                    <div class="flex mt-2 items-center gap-2 bg-white border rounded-lg shadow-inner p-2">
                         <input type="text" id="converter-input" class="w-full p-2 bg-transparent focus:outline-none" dir="rtl" placeholder="مثال: ۱۰ مایل به کیلومتر">
                         <button onclick="convertWithAI()" title="تبدیل" class="p-2 btn-3d btn-green rounded-full shrink-0"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"  viewBox="0 0 2200 2200"><g transform="scale(2.25) translate(-1050, -150)"><path style="fill:#FFFFFF;" d="M1346.535,606.039c2.16,4.919,2.16,10.561,0,15.479l-117.291,267.063		c-9.539,21.723-4.693,46.429,12.349,62.936c10.795,10.455,24.719,15.916,38.917,15.916c8.219,0,16.531-1.83,24.38-5.581		l622.408-297.39c19.711-9.418,31.955-28.838,31.955-50.683c0-21.845-12.244-41.266-31.955-50.684l-622.407-297.39		c-21.409-10.229-46.254-6.173-63.298,10.335c-17.043,16.508-21.89,41.211-12.349,62.936L1346.535,606.039z M1267.282,302.563		c1.64-1.587,6.434-5.566,13.233-5.566c2.556,0,5.395,0.563,8.456,2.025l622.408,297.39c6.855,3.276,10.949,9.768,10.949,17.367		H1385.07c0-7.705-1.576-15.41-4.729-22.588l-117.291-267.063C1258.058,312.758,1265.027,304.747,1267.282,302.563z"/></g></svg></button>
                    </div>
            
                    <div id="converter-loading" class="text-center p-4 hidden">
                         <svg class="animate-spin h-8 w-8 text-green-700 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                         <p class="mt-2 text-gray-600">در حال محاسبه...</p>
                    </div>
            
                    <div id="converter-output" class="bg-white p-4 rounded-lg shadow min-h-[100px] mt-3"><p class="text-gray-500 text-center">پاسخ در اینجا نمایش داده می‌شود...</p></div>
            	</div>
        </div>

        <!-- Math Page -->
        <div id="math-page" class="page">
            <div id="math-tool-buttons" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4">
                <button class="w-full p-4 btn-3d btn-green" onclick="showMathTool('prime-checker', 'آیا عدد اول است؟')">عدد اول است یا نه؟</button>
                <button class="w-full p-4 btn-3d btn-green" onclick="showMathTool('pythagorean-theorem', 'قضیه فیثاغورس')">قضیه فیثاغورس</button>
                <button class="w-full p-4 btn-3d btn-green" onclick="showMathTool('shape-perimeter', 'محیط اشکال')">محیط اشکال</button>
                <button class="w-full p-4 btn-3d btn-green" onclick="showMathTool('shape-area', 'مساحت اشکال')">مساحت اشکال</button>
                <button class="w-full p-4 btn-3d btn-green" onclick="showMathTool('shape-volume', 'حجم اشکال')">حجم اشکال</button>
                <button class="w-full p-4 btn-3d btn-green" onclick="showMathTool('math-tool-plot', 'رسم نمودار تابع')">رسم نمودار تابع</button>
                <button class="w-full p-4 btn-3d btn-green" onclick="showMathTool('math-tool-venn', 'رسم نمودار ون')">رسم نمودار ون</button>
                <button class="w-full p-4 btn-3d btn-green" onclick="showMathTool('math-tool-divisibility', 'بخش پذیری دو عدد')">بخش پذیری دو عدد</button>
                <button class="w-full p-4 btn-3d btn-green" onclick="showMathTool('math-tool-divisors', 'شمارنده ها')">شمارنده ها</button>
                <button class="w-full p-4 btn-3d btn-green" onclick="showMathTool('math-tool-sequences', 'دنباله‌ها')">دنباله‌ها</button>
                 <!-- Add other math buttons here -->
            </div>
            <div id="math-tool-container" class="mt-6">
                <!-- Prime Checker -->
                <div id="prime-checker" class="math-tool hidden bg-white p-4 rounded-lg shadow">
                    <p class="mb-2"><b>عدد اول:</b> عددی طبیعی است که فقط بر ۱ و خودش بخش‌پذیر باشد.</p>
                    <p class="mb-2"><b>عدد مرکب:</b> عددی طبیعی است که بر عددی غیر از ۱ و خودش نیز بخش‌پذیر باشد.</p>
                    <p class="mb-2 text-center">عددی را وارد کنید تا مشخص شود اول است یا مرکب.</p>
                    <input type="number" id="prime-input" dir="ltr" class="p-2 border focus:outline-none rounded-lg text-center w-full mb-2" placeholder="عدد را وارد کنید" min="1">
                    <button onclick="checkPrime()" class="p-3 w-full btn-3d btn-green">بررسی</button>
                    <p id="prime-result" class="mt-4 text-2xl text-center font-bold"></p>
                </div>
                <!-- Pythagorean Theorem -->
                <div id="pythagorean-theorem" class="math-tool hidden bg-white p-4 rounded-lg shadow">
                    <p class="mb-4 text-center"><b>قضیۀ فیثاغورس:</b> در یک مثلث قائم‌الزاویه، مربع طول وتر (ضلع روبروی زاویه 90 درجه که بلندترین ضلع مثلث است) برابر است با مجموع مربع طول دو ضلع دیگر (که به آن‌ها ساق گفته می‌شود).</p>
                    <svg class="w-60 h-45 mb-4 text-green-700 mx-auto" viewBox="0 0 300 250" xmlns="http://www.w3.org/2000/svg"><polygon points="50,20 50,220 250,220" style="fill:none; stroke:#15803d; stroke-width:3;" /><rect x="50" y="200" width="20" height="20"
 style="fill:none; stroke:#e74c3c; stroke-width:2;" /><text x="30" y="120" font-family="Cambria Math" font-size="18" fill="#2c3e50" text-anchor="middle">a</text><text x="150" y="245" font-family="Cambria Math" font-size="18" fill="#2c3e50" text-anchor="middle">b</text>

<text x="150" y="100" font-family="Cambria Math" font-size="18" fill="#2c3e50" text-anchor="middle">c</text><circle cx="50" cy="20" r="4" fill="#34495e" />
<circle cx="50" cy="220" r="4" fill="#34495e" /><circle cx="250" cy="220" r="4" fill="#34495e" /><text x="40" y="15" font-family="Cambria Math" font-size="14" fill="#34495e">A</text><text x="40" y="230" font-family="Cambria Math" font-size="14" fill="#34495e">B</text><text x="260" y="230" font-family="Cambria Math" font-size="14" fill="#34495e">C</text>

</svg>
                    <p class="text-center text-lg mb-4">$a^2 + b^2 = c^2$</p>
                    <p class="mb-2 text-center">اندازه دو ضلع مثلث قائم‌الزاویه را وارد کنید تا ضلع سوم محاسبه شود.</p>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                         <input type="number" id="pythagorean-a" dir="ltr" class="p-2 focus:outline-none border rounded-lg text-center" placeholder="ضلع a" step="any" min="0">
                         <input type="number" id="pythagorean-b" dir="ltr" class="p-2 focus:outline-none border rounded-lg text-center" placeholder="ضلع b" step="any" min="0">
                         <input type="number" id="pythagorean-c" dir="ltr" class="p-2 focus:outline-none border rounded-lg text-center" placeholder="وتر c (خالی بگذارید)" step="any" min="0">
                    </div>
                    <button onclick="calculatePythagorean()" class="p-3 w-full mt-4 btn-3d btn-green" title="اندازه دو ضلع مثلث قائم‌الزاویه را وارد کنید تا ضلع سوم محاسبه شود.">محاسبه</button>
                    <p id="pythagorean-result" class="mt-4 text-2xl text-center font-bold"></p>
                </div>

                 <!-- Shape perimeter -->
                <div id="shape-perimeter" class="math-tool hidden bg-white p-4 rounded-lg shadow">
                     <div id="perimeter-shape-selection" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <!-- Square -->
                        <button class="flex flex-col items-center p-4 btn-3d btn-gray" onclick="showperimeterShape('perimeter-tool-square')">
                            <svg class="w-20 h-20 mb-2 text-green-700" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="10" y="10" width="80" height="80" stroke="currentColor" stroke-width="4"/>
                                <text x="50" y="55" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle" alignment-baseline="middle">a</text>
                            </svg>
                            <span class="font-bold">مربع</span>
                        </button>
                        <!-- Circle -->
                        <button class="flex flex-col items-center p-4 btn-3d btn-gray" onclick="showperimeterShape('perimeter-tool-circle')">
                             <svg class="w-20 h-20 mb-2 text-green-700" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="50" cy="50" r="40" stroke="currentColor" stroke-width="4"/>
                                <line x1="50" y1="50" x2="90" y2="50" stroke="currentColor" stroke-width="2" stroke-dasharray="4 4"/>
                                <text x="70" y="45" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle">r</text>
                            </svg>
                            <span class="font-bold">دایره</span>
                        </button>
                        <!-- Triangle -->
                        <button class="flex flex-col items-center p-4 btn-3d btn-gray" onclick="showperimeterShape('perimeter-tool-triangle')">
                             <svg class="w-20 h-20 mb-2 text-green-700" viewBox="0 0 105 105" fill="none" xmlns="http://www.w3.org/2000/svg">
                            	<path d="M10 90 L 90 90 L 50 10 Z" stroke="currentColor" stroke-width="4" fill="none"/>
                            	<text x="50" y="100" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle">a</text>
                            	<text x="81" y="50" font-family="Vazirmatn" font-size="20" fill="currentColor">b</text>
                            	<text x="28" y="50" font-family="Vazirmatn" font-size="20" fill="currentColor">c</text>
                            </svg>
                            <span class="font-bold">مثلث</span>
                        </button>
                    	<!-- Rectangle -->
                    	<button class="flex flex-col items-center p-4 btn-3d btn-gray" onclick="showperimeterShape('perimeter-tool-rectangle')">
                             <svg class="w-20 h-20 mb-2 text-green-700 mx-auto" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="10" y="25" width="80" height="50" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                                <text x="50" y="90" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle">a</text>
                                <text x="20" y="50" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle" alignment-baseline="middle">b</text>
                             </svg>
     	                   <span class="font-bold">مستطیل</span>
                    	</button>
                     </div>
                     
                     <!-- perimeter Sub-Pages -->
                     <div id="perimeter-tool-square" class="perimeter-tool-page hidden">
                         <h3 class="text-xl font-bold mb-2 text-center">محیط مربع</h3>
                         <svg class="w-32 h-32 mb-4 text-green-700 mx-auto" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="10" y="10" width="80" height="80" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                            <text x="50" y="55" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle" alignment-baseline="middle">a</text>
                        </svg>
                         <p class="text-center text-lg mb-4">محیط مربع: 4 برابر یک ضلع.</p>
                         <p class="text-center text-lg mb-4">$P = 4a$</p>
                         <input type="number" id="perimeter-square-side" dir="ltr" class="p-2 focus:outline-none border rounded-lg text-center w-full mb-2" placeholder="ضلع (a)">
                         <button onclick="calculatePerimeter('square')" class="p-3 btn-3d btn-green w-full">محاسبه</button>
                         <p id="perimeter-square-result" class="mt-4 font-bold"></p>
                     </div>
                     
                     <div id="perimeter-tool-circle" class="perimeter-tool-page hidden">
                         <h3 class="text-xl font-bold mb-2 text-center">محیط دایره</h3>
                          <svg class="w-32 h-32 mb-4 text-green-700 mx-auto" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="50" cy="50" r="40" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                            <line x1="50" y1="50" x2="90" y2="50" stroke="currentColor" stroke-width="2"/>
                            <text x="70" y="45" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle">r</text>
                        </svg>
                         <p class="text-center text-lg mb-4">محیط دایره: حاصل‌ضرب عدد پی در قطر</p>
                         <p class="text-center text-lg mb-4">$A = 2 \pi r$</p>
                         <input type="number" id="perimeter-circle-radius" dir="ltr" class="p-2 focus:outline-none border text-center rounded-lg w-full mb-2" placeholder="شعاع (r)">
                         <button onclick="calculatePerimeter('circle')" class="p-3 btn-3d btn-green w-full">محاسبه</button>
                         <p id="perimeter-circle-result" class="mt-4 font-bold"></p>
                     </div>
                     
                     <div id="perimeter-tool-triangle" class="perimeter-tool-page hidden">
                         <h3 class="text-xl font-bold mb-2 text-center">محیط مثلث</h3>
                         <svg class="w-32 h-32 mb-4 text-green-700 mx-auto" viewBox="0 0 110 110" fill="none" xmlns="http://www.w3.org/2000/svg">
                            	<path d="M10 90 L 90 90 L 50 10 Z" stroke="currentColor" stroke-width="4" fill="none"/>
                            	<text x="50" y="103" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle">a</text>
                            	<text x="82" y="50" font-family="Vazirmatn" font-size="20" fill="currentColor">b</text>
                            	<text x="28" y="50" font-family="Vazirmatn" font-size="20" fill="currentColor">c</text>
                        </svg>
                         <p class="text-center text-lg mb-4">محیط مثلث: مجموع سه ضلع</p>
                         <p class="text-center text-lg mb-4">$P = a + b + c$</p>
                         <input type="number" id="perimeter-triangle-a" dir="ltr" class="p-2 focus:outline-none border text-center rounded-lg w-full mb-2" placeholder="ضلع اول (a)">
                         <input type="number" id="perimeter-triangle-b" dir="ltr" class="p-2 focus:outline-none border text-center rounded-lg w-full mb-2" placeholder="ضلع دوم (b)">
                         <input type="number" id="perimeter-triangle-c" dir="ltr" class="p-2 focus:outline-none border text-center rounded-lg w-full mb-2" placeholder="ضلع سوم (c)">
                         <button onclick="calculatePerimeter('triangle')" class="p-3 btn-3d btn-green w-full">محاسبه</button>
                         <p id="perimeter-triangle-result" class="mt-4 font-bold"></p>
                     </div>
   	             <!-- Rectangle perimeter -->
   	             <div id="perimeter-tool-rectangle" class="perimeter-tool-page hidden">
   	                <h3 class="text-xl font-bold mb-2 text-center">محیط مستطیل</h3>
             	        <svg class="w-32 h-32 mb-2 text-green-700 mx-auto" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="10" y="25" width="80" height="50" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                            <text x="50" y="90" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle">a</text>
                            <text x="20" y="50" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle" alignment-baseline="middle">b</text>
             	        </svg>
    	                <p class="text-center text-lg mb-4">محیط مستطیل: حاصل‌ضرب طول در عرض</p>
    	                <p class="text-center text-xl mb-4 text-gray-800">$A = 2(a+b)$</p>
    	                <input type="number" id="perimeter-rectangle-length" dir="ltr" class="p-2 focus:outline-none border text-center rounded-lg w-full mb-2" placeholder="طول (a)">
    	                <input type="number" id="perimeter-rectangle-width" dir="ltr" class="p-2 focus:outline-none border text-center rounded-lg w-full mb-2" placeholder="عرض (b)">
     	               <button onclick="calculatePerimeter('rectangle')" class="p-3 btn-3d btn-green w-full">محاسبه</button>
     	               <p id="perimeter-rectangle-result" class="mt-4 font-bold text-center"></p>
   	             </div>
                </div>

                 <!-- Shape Area -->
                <div id="shape-area" class="math-tool hidden bg-white p-4 rounded-lg shadow">
                     <div id="area-shape-selection" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <!-- Square -->
                        <button class="flex flex-col items-center p-4 btn-3d btn-gray" onclick="showAreaShape('area-tool-square')">
                            <svg class="w-20 h-20 mb-2 text-green-700" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="10" y="10" width="80" height="80" stroke="currentColor" stroke-width="4"/>
                                <text x="50" y="55" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle" alignment-baseline="middle">a</text>
                            </svg>
                            <span class="font-bold">مربع</span>
                        </button>
                        <!-- Circle -->
                        <button class="flex flex-col items-center p-4 btn-3d btn-gray" onclick="showAreaShape('area-tool-circle')">
                             <svg class="w-20 h-20 mb-2 text-green-700" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="50" cy="50" r="40" stroke="currentColor" stroke-width="4"/>
                                <line x1="50" y1="50" x2="90" y2="50" stroke="currentColor" stroke-width="2" stroke-dasharray="4 4"/>
                                <text x="70" y="45" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle">r</text>
                            </svg>
                            <span class="font-bold">دایره</span>
                        </button>
                        <!-- Triangle -->
                        <button class="flex flex-col items-center p-4 btn-3d btn-gray" onclick="showAreaShape('area-tool-triangle')">
                             <svg class="w-20 h-20 mb-2 text-green-700" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M10 90 L 50 10 L 90 90 Z" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                                <line x1="50" y1="10" x2="50" y2="90" stroke="currentColor" stroke-width="2" stroke-dasharray="4 4"/>
                                <text x="60" y="50" font-family="Vazirmatn" font-size="20" fill="currentColor">h</text>
                                <text x="50" y="95" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle">b</text>
                            </svg>
                            <span class="font-bold">مثلث</span>
                        </button>
                    	<!-- Rectangle -->
                    	<button class="flex flex-col items-center p-4 btn-3d btn-gray" onclick="showAreaShape('area-tool-rectangle')">
                             <svg class="w-20 h-20 mb-2 text-green-700 mx-auto" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="10" y="25" width="80" height="50" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                                <text x="50" y="90" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle">a</text>
                                <text x="20" y="50" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle" alignment-baseline="middle">b</text>
                             </svg>
     	                   <span class="font-bold">مستطیل</span>
                    	</button>
                     </div>
                     
                     <!-- Area Sub-Pages -->
                     <div id="area-tool-square" class="area-tool-page hidden">
                         <h3 class="text-xl font-bold mb-2 text-center">مساحت مربع</h3>
                         <svg class="w-32 h-32 mb-4 text-green-700 mx-auto" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="10" y="10" width="80" height="80" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                            <text x="50" y="55" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle" alignment-baseline="middle">a</text>
                        </svg>
                         <p class="text-center text-lg mb-4">مساحت مربع: حاصل‌ضرب یک ضلع در خودش</p>
                         <p class="text-center text-lg mb-4">$A = a^2$</p>
                         <input type="number" id="area-square-side" dir="ltr" class="p-2 focus:outline-none border rounded-lg text-center w-full mb-2" placeholder="ضلع (a)">
                         <button onclick="calculateArea('square')" class="p-3 btn-3d btn-green w-full">محاسبه</button>
                         <p id="area-square-result" class="mt-4 font-bold"></p>
                     </div>
                     
                     <div id="area-tool-circle" class="area-tool-page hidden">
                         <h3 class="text-xl font-bold mb-2 text-center">مساحت دایره</h3>
                          <svg class="w-32 h-32 mb-4 text-green-700 mx-auto" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="50" cy="50" r="40" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                            <line x1="50" y1="50" x2="90" y2="50" stroke="currentColor" stroke-width="2"/>
                            <text x="70" y="45" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle">r</text>
                        </svg>
                         <p class="text-center text-lg mb-4">مساحت دایره: حاصل‌ضرب عدد پی در شعاع به توان دو</p>
                         <p class="text-center text-lg mb-4">$A = \pi r^2$</p>
                         <input type="number" id="area-circle-radius" dir="ltr" class="p-2 focus:outline-none border text-center rounded-lg w-full mb-2" placeholder="شعاع (r)">
                         <button onclick="calculateArea('circle')" class="p-3 btn-3d btn-green w-full">محاسبه</button>
                         <p id="area-circle-result" class="mt-4 font-bold"></p>
                     </div>
                     
                     <div id="area-tool-triangle" class="area-tool-page hidden">
                         <h3 class="text-xl font-bold mb-2 text-center">مساحت مثلث</h3>
                         <svg class="w-32 h-32 mb-4 text-green-700 mx-auto" viewBox="0 0 110 110" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M10 90 L 50 10 L 90 90 Z" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                            <line x1="50" y1="10" x2="50" y2="90" stroke="currentColor" stroke-width="2" stroke-dasharray="4 4"/>
                            <text x="45" y="65" font-family="Vazirmatn" font-size="20" fill="currentColor">h</text>
                            <text x="65" y="110" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle">b</text>
                        </svg>
                         <p class="text-center text-lg mb-4">مساحت مثلث: نصف حاصل‌ضرب قاعده در ارتفاع متناظر</p>
                         <p class="text-center text-lg mb-4">$A = \frac{1}{2} b h$</p>
                         <input type="number" id="area-triangle-base" dir="ltr" class="p-2 border focus:outline-none text-center rounded-lg w-full mb-2" placeholder="قاعده (b)">
                         <input type="number" id="area-triangle-height" dir="ltr" class="p-2 focus:outline-none border text-center rounded-lg w-full mb-2" placeholder="ارتفاع (h)">
                         <button onclick="calculateArea('triangle')" class="p-3 btn-3d btn-green w-full">محاسبه</button>
                         <p id="area-triangle-result" class="mt-4 font-bold"></p>
                     </div>
   	             <!-- Rectangle Area -->
   	             <div id="area-tool-rectangle" class="area-tool-page hidden">
   	                <h3 class="text-xl font-bold mb-2 text-center">مساحت مستطیل</h3>
             	        <svg class="w-32 h-32 mb-2 text-green-700 mx-auto" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="10" y="25" width="80" height="50" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                            <text x="50" y="90" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle">a</text>
                            <text x="20" y="50" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle" alignment-baseline="middle">b</text>
             	        </svg>
    	                <p class="text-center text-lg mb-4">مساحت مستطیل: حاصل‌ضرب طول در عرض</p>
    	                <p class="text-center text-xl mb-4 text-gray-800">$A = a \times b$</p>
    	                <input type="number" id="area-rectangle-length" dir="ltr" class="p-2 border focus:outline-none text-center rounded-lg w-full mb-2" placeholder="طول (a)">
    	                <input type="number" id="area-rectangle-width" dir="ltr" class="p-2 border focus:outline-none text-center rounded-lg w-full mb-2" placeholder="عرض (b)">
     	               <button onclick="calculateArea('rectangle')" class="p-3 btn-3d btn-green w-full">محاسبه</button>
     	               <p id="area-rectangle-result" class="mt-4 font-bold text-center"></p>
   	             </div>
                </div>

                 <!-- Shape Volume -->
                <div id="shape-volume" class="math-tool hidden bg-white p-4 rounded-lg shadow">
                    <div id="volume-shape-selection" class="grid grid-cols-2 md:grid-cols-4 gap-4">
                        <!-- Cube -->
                        <button class="flex flex-col items-center p-4 btn-3d btn-gray" onclick="showVolumeShape('volume-tool-cube')">
                            <svg class="w-20 h-20 mb-2 text-green-700" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M20 30 L 60 30 L 60 70 L 20 70 Z" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                                <path d="M60 30 L 80 10 L 80 50 L 60 70" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                                <path d="M20 30 L 40 10 L 80 10" stroke="currentColor" stroke-width="4"/>
                                <path d="M20 70 L 40 50 L 80 50" stroke="currentColor" stroke-width="2" stroke-dasharray="4 4"/>
                                <path d="M40 10 L 40 50" stroke="currentColor" stroke-width="2" stroke-dasharray="4 4"/>
                            </svg>
                            <span class="font-bold">مکعب</span>
                        </button>
                        <!-- Sphere -->
                        <button class="flex flex-col items-center p-4 btn-3d btn-gray" onclick="showVolumeShape('volume-tool-sphere')">
                             <svg class="w-20 h-20 mb-2 text-green-700" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <circle cx="50" cy="50" r="40" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                                <ellipse cx="50" cy="50" rx="40" ry="15" stroke="currentColor" stroke-width="2" stroke-dasharray="4 4"/>
                                <line x1="50" y1="50" x2="90" y2="50" stroke="currentColor" stroke-width="2"/>
                                <text x="70" y="45" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle">r</text>
                            </svg>
                            <span class="font-bold">کره</span>
                        </button>
                    	<!-- Cylinder -->
                    	<button class="flex flex-col items-center p-4 btn-3d btn-gray" onclick="showVolumeShape('volume-tool-cylinder')">
                            <svg class="w-20 h-20 mb-2 text-green-700" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <ellipse cx="50" cy="25" rx="40" ry="15" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                                <line x1="10" y1="25" x2="10" y2="75" stroke="currentColor" stroke-width="4"/>
                                <line x1="90" y1="25" x2="90" y2="75" stroke="currentColor" stroke-width="4"/>
                                <path d="M10 75 A 40 15 0 0 0 90 75" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                                <line x1="50" y1="25" x2="50" y2="75" stroke="currentColor" stroke-width="2" stroke-dasharray="4 4"/>
                                <text x="50" y="55" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle">h</text>
                                <line x1="50" y1="25" x2="90" y2="25" stroke="currentColor" stroke-width="2" stroke-dasharray="4 4"/>
                                <text x="70" y="20" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle">r</text>
                            </svg>
                            <span class="font-bold">استوانه</span>
                    	</button>
                    </div>
                    
                    <!-- Volume Sub-Pages -->
                    <div id="volume-tool-cube" class="volume-tool-page hidden">
                        <h3 class="text-xl font-bold mb-2 text-center">حجم مکعب</h3>
                        <svg class="w-32 h-32 mb-4 text-green-700 mx-auto" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20 30 L 60 30 L 60 70 L 20 70 Z" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                            <path d="M60 30 L 80 10 L 80 50 L 60 70" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                            <path d="M20 30 L 40 10 L 80 10" stroke="currentColor" stroke-width="4"/>
                            <path d="M20 70 L 40 50 L 80 50" stroke="currentColor" stroke-width="2" stroke-dasharray="4 4"/>
                            <path d="M40 10 L 40 50" stroke="currentColor" stroke-width="2" stroke-dasharray="4 4"/>
                            <text x="10" y="50" font-family="Vazirmatn" font-size="20" fill="currentColor">a</text>
                        </svg>
                        <p class="text-center text-lg mb-4">حجم مکعب: ضلع به توان سه</p>
                        <p class="text-center text-lg mb-4">$V = a^3$</p>
                        <input type="number" id="volume-cube-side" dir="ltr" class="p-2 focus:outline-none border rounded-lg text-center w-full mb-2" placeholder="ضلع (a)">
                        <button onclick="calculateVolume('cube')" class="p-3 btn-3d btn-green w-full">محاسبه</button>
                        <p id="volume-cube-result" class="mt-4 font-bold"></p>
                    </div>
                    
                    <div id="volume-tool-sphere" class="volume-tool-page hidden">
                         <h3 class="text-xl font-bold mb-2 text-center">حجم کره</h3>
                         <svg class="w-32 h-32 mb-4 text-green-700 mx-auto" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="50" cy="50" r="40" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                            <ellipse cx="50" cy="50" rx="40" ry="15" stroke="currentColor" stroke-width="2" stroke-dasharray="4 4"/>
                            <line x1="50" y1="50" x2="90" y2="50" stroke="currentColor" stroke-width="2"/>
                            <text x="70" y="45" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle">r</text>
                        </svg>
                        <p class="text-center text-lg mb-4">حجم کره: چهار سوم حاصل‌ضرب عدد پی در شعاع به توان سه</p>
                        <p class="text-center text-lg mb-4">$V = \frac{4}{3} \pi r^3$</p>
                        <input type="number" id="volume-sphere-radius" dir="ltr" class="p-2 focus:outline-none border text-center rounded-lg w-full mb-2" placeholder="شعاع (r)">
                        <button onclick="calculateVolume('sphere')" class="p-3 btn-3d btn-green w-full">محاسبه</button>
                        <p id="volume-sphere-result" class="mt-4 font-bold"></p>
                    </div>

                    <!-- Cylinder Volume -->
                    <div id="volume-tool-cylinder" class="volume-tool-page hidden">
                         <h3 class="text-xl font-bold mb-2 text-center text-gray-600">حجم استوانه</h3>
                        <svg class="w-32 h-32 mb-2 text-green-700 mx-auto" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <ellipse cx="50" cy="25" rx="40" ry="15" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                            <line x1="10" y1="25" x2="10" y2="75" stroke="currentColor" stroke-width="4"/>
                            <line x1="90" y1="25" x2="90" y2="75" stroke="currentColor" stroke-width="4"/>
                            <path d="M10 75 A 40 15 0 0 0 90 75" stroke="currentColor" stroke-width="4" fill="rgba(0,0,0,0.05)"/>
                            <line x1="50" y1="25" x2="50" y2="75" stroke="currentColor" stroke-width="2" stroke-dasharray="4 4"/>
                            <text x="40" y="60" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle">h</text>
                            <line x1="50" y1="25" x2="90" y2="25" stroke="currentColor" stroke-width="2" stroke-dasharray="4 4"/>
                            <text x="70" y="20" font-family="Vazirmatn" font-size="20" fill="currentColor" text-anchor="middle">r</text>
                        </svg>
                         <p class="text-center text-lg mb-4">حجم استوانه: حاصل‌ضرب مساحت قاعده (دایره) در ارتفاع</p>
                         <p class="text-center text-xl mb-4 text-gray-800">$V = \pi r^2 h$</p>
                         <input type="number" id="volume-cylinder-radius" dir="ltr" class="p-2 focus:outline-none border text-center rounded-lg w-full mb-2" placeholder="شعاع (r)">
                         <input type="number" id="volume-cylinder-height" dir="ltr" class="p-2 focus:outline-none border text-center rounded-lg w-full mb-2" placeholder="ارتفاع (h)">
                         <button onclick="calculateVolume('cylinder')" class="p-3 btn-3d btn-green w-full">محاسبه</button>
                         <p id="volume-cylinder-result" class="mt-4 font-bold text-center"></p>
                    </div>
                </div>

                <!-- Function Plotter -->
                <div id="math-tool-plot" class="math-tool hidden bg-white p-4 rounded-lg shadow">
                    <div class="border-b border-gray-200">
                        <nav class="flex-nowrap overflow-x-auto flex -mb-px" id="plot-tabs">
                            <button class="plot-tab-btn whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-green-600 border-green-600" data-target="plot-simple">توابع ساده</button>
                            <button class="plot-tab-btn whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300 transition duration-200" data-target="plot-piecewise">توابع چندضابطه‌ای</button>
                            <button class="plot-tab-btn whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300 transition duration-200" data-target="plot-comparison">مقایسه توابع</button>
                        </nav>
                    </div>

                    <div id="plot-simple" class="plot-tab-content mt-4 space-y-2">
                        <p class="mb-2">ضابطه تابع را وارد کنید (مثلا به جای $x^2 + \sin(x)$ وارد کنید <code>x*x+sin(x)</code>).</p>
                        <div class="flex items-center gap-2">
                            	<input type="text" id="math-plot-input" class="p-2 border focus:outline-none rounded-lg w-full text-left" dir="ltr" placeholder="ضابطۀ تابع: f(x) =">
                            	<button onclick="showPlotterHelp()" class="p-2 focus:outline-none btn-3d help-button font-bold shrink-0" title="راهنما">!</button>
                        </div>
                        <p class="mt-2 mb-2">دامنۀ تابع:</p>
                        <div class="grid grid-cols-2 flex items-center gap-2">
                            	<input type="number" id="math-plot-xMin" class="p-2 focus:outline-none border rounded-lg w-full text-center" dir="ltr" placeholder="حداقل x">
                            	<input type="number" id="math-plot-xMax" class="p-2 focus:outline-none border rounded-lg w-full text-center" dir="ltr" placeholder="حداکثر x">
                        </div>
                        <button onclick="plotMathFunction()" class="mt-2 p-3 btn-3d btn-green w-full">رسم کن</button>
                        <div id="math-plot-target" class="mt-2 item-center w-full h-96"></div>
                    </div>

                    <div id="plot-piecewise" class="plot-tab-content mt-4 space-y-2">
                        <p class="mb-2">ضابطه‌های تابع چندضابطه‌ای را وارد کنید:</p>
                        <div id="piecewise-formulas-container" class="space-y-3">
                        	<div class="piecewise-formula flex items-center gap-2 border p-3 rounded-lg bg-gray-50">

                            		<span class="font-bold">اگر</span>

                            		<input type="text" class="piecewise-condition p-2 border focus:outline-none rounded-lg text-left w-1/3" dir="ltr" placeholder="شرط (مثلاً x<0)">
                            		<span class="font-bold">آنگاه</span>
                            		<input type="text" class="piecewise-function p-2 border focus:outline-none rounded-lg text-left w-2/3" dir="ltr" placeholder="ضابطه (مثلاً -x)">
                        	</div>

                        	<div class="piecewise-formula flex items-center gap-2 border p-3 rounded-lg bg-gray-50">

                            		<span class="font-bold">اگر</span>
                            		<input type="text" class="piecewise-condition p-2 border focus:outline-none rounded-lg text-left w-1/3" dir="ltr" placeholder="شرط (مثلاً x>=0)">
                            		<span class="font-bold">آنگاه</span>
                            		<input type="text" class="piecewise-function p-2 border focus:outline-none rounded-lg text-left w-2/3" dir="ltr" placeholder="ضابطه (مثلاً x)">
                        	</div>
                        </div>
                        <button onclick="addPiecewiseFormula()" class="p-2 btn-3d btn-blue w-full">+ افزودن ضابطه</button>
                        <p class="mt-4 mb-2">دامنۀ نهایی نمودار:</p>
                        <div class="grid grid-cols-2 flex items-center gap-2">
                        	<input type="number" id="piecewise-xMin" class="p-2 focus:outline-none border rounded-lg w-full text-center" dir="ltr" placeholder="حداقل x">
                        	<input type="number" id="piecewise-xMax" class="p-2 focus:outline-none border rounded-lg w-full text-center" dir="ltr" placeholder="حداکثر x">

                        </div>

                        <button onclick="plotPiecewiseFunction()" class="mt-2 p-3 btn-3d btn-green w-full">رسم کن</button>

                        <div id="math-piecewise-latex" class="text-center my-4 p-3 border rounded-lg bg-gray-100 min-h-[50px]">

                        	<span class="text-gray-500">پیش‌نمایش ضوابط تابع</span>

                        </div>

                        <div id="math-piecewise-target" class="mt-2 item-center w-full h-96"></div>
                    </div>

                    <div id="plot-comparison" class="plot-tab-content mt-4 space-y-2">
                        <p class="mb-2">ضابطه‌های چند تابع را برای رسم نمودار و مقایسۀ توابع وارد کنید.</p>
                        <div id="comparison-formulas-container" class="space-y-3">
                            	<div class="comparison-formula items-center">
                            		<input type="text" class="mt-2 comp-function p-2 border border-green-400 pr-3 focus:outline-none rounded-lg text-left w-full" style="color: #15803d" dir="ltr" placeholder="f(x)=">
                            		<input type="text" class="mt-2 comp-function p-2 border border-blue-400 pr-3 focus:outline-none rounded-lg text-left w-full" style="color: #2563eb" dir="ltr" placeholder="g(x)=">
                            	</div>

                        </div>
                        <button id="plotComparisonButton" onclick="addComparisonFormula()" class="p-2 btn-3d btn-blue w-full">+ افزودن تابع</button>
                        <p class="mt-4 mb-2">دامنۀ نهایی نمودار:</p>
                        <div class="grid grid-cols-2 flex items-center gap-2">
                            	<input type="number" id="comparison-xMin" class="p-2 focus:outline-none border rounded-lg w-full text-center" dir="ltr" placeholder="حداقل x">
                            	<input type="number" id="comparison-xMax" class="p-2 focus:outline-none border rounded-lg w-full text-center" dir="ltr" placeholder="حداکثر x">

                        </div>

                        <button onclick="plotComparisonFunctions()" class="mt-2 p-3 btn-3d btn-green w-full">رسم کن</button>
                        <div id="math-comparison-target" class="mt-2 item-center w-full h-96"></div>
                    </div>
                </div>
                
                <!-- Venn Diagram -->
                <div id="math-tool-venn" class="math-tool hidden bg-white p-4 rounded-lg shadow">
                    <p class="mb-2">عبارت مجموعه را وارد کنید (مثال: $(A \cup B) - (A \cap C)$).</p>
                    <p class="mb-2 text-sm text-gray-500">از $A, B, C$، $\cup$ (<code>\cup</code>، اجتماع)، $\cap$ (<code>\cap</code>، اشتراک)، $-$ (تفاضل) و $\Delta$ (<code>\Delta</code>، تفاضل متقارن) و مثلا برای متمم مجموعه A از <code>U-(A)</code> استفاده کنید.</p>
                    <div class="flex items-center gap-2">
                        <input type="text" id="venn-input" class="p-2 focus:outline-none border rounded-lg w-full text-left" dir="ltr" placeholder="A ∪ B' ∩ C">
                        <button onclick="drawVennDiagram()" class="p-3 btn-3d btn-green shrink-0">رسم کن</button>
                    </div>
                    <div class="flex justify-center items-center mt-4 p-2 bg-slate-100 rounded-lg overflow-hidden">
                        <canvas id="venn-canvas" class="items-center" width="520" height="300"></canvas>
                    </div>
                </div>

                <!-- Divisibility -->
                <div id="math-tool-divisibility" class="math-tool hidden bg-white p-4 rounded-lg shadow">
                    <p class="mb-2">بررسی کنید آیا عدد $A$ بر عدد $B$ بخش‌پذیر است یا خیر.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <input type="number" id="div-a" dir="ltr" class="p-2 focus:outline-none border text-center rounded-lg" placeholder="عدد A (مقسوم)">
                        <input type="number" id="div-b" dir="ltr" class="p-2 focus:outline-none border text-center rounded-lg" placeholder="عدد B (مقسوم علیه)">
                    </div>
                    <button onclick="checkDivisibility()" class="p-3 mt-4 w-full btn-3d btn-green">بررسی کن</button>
                    <p id="divisibility-result" class="mt-4 text-center text-2xl font-bold"></p>
                </div>
                
                <!-- Divisors -->
                <div id="math-tool-divisors" class="math-tool hidden bg-white p-4 rounded-lg shadow">
                    <p class="mb-2">عدد مورد نظر را برای تحلیل شمارنده‌ها وارد کنید.</p>
                    <input type="number" id="divisor-input" class="p-2 focus:outline-none border rounded-lg w-full text-center mb-2" dir="ltr" placeholder="عدد را وارد کنید (مثبت)">
                    <button onclick="analyzeDivisors()" class="p-3 btn-3d btn-green w-full">تحلیل کن</button>
                    <div id="divisor-results" class="mt-4 hidden overflow-x-auto">
                        <table class="w-full text-center border-collapse border border-gray-300 table-fixed">
                            <tbody class="align-center">
                                <tr class="bg-gray-50"><td class="border p-3 font-bold w-1/3">تجزیه به عوامل اول</td><td id="divisor-factorization" class="border p-3 text-center" dir="ltr"></td></tr>
                                <tr><td class="border p-3 font-bold">شمارنده‌ها</td><td id="divisor-list" class="border p-3" style="word-break: break-word;" dir="ltr"></td></tr>
                                <tr class="bg-gray-50"><td class="border p-3 font-bold">تعداد شمارنده‌ها</td><td id="divisor-count" class="border p-3" dir="ltr"></td></tr>
                                <tr><td class="border p-3 font-bold">شمارنده‌های اول</td><td id="divisor-prime-list" class="border p-3" style="word-break: break-word;" dir="ltr"></td></tr>
                                <tr class="bg-gray-50"><td class="border p-3 font-bold">تعداد شمارنده‌های اول</td><td id="divisor-prime-count" class="border p-3" dir="ltr"></td></tr>
                                <tr><td class="border p-3 font-bold">شمارنده‌های مرکب</td><td id="divisor-composite-list" class="border p-3" style="word-break: break-word;" dir="ltr"></td></tr>
                                <tr class="bg-gray-50"><td class="border p-3 font-bold">تعداد شمارنده‌های مرکب</td><td id="divisor-composite-count" class="border p-3" dir="ltr"></td></tr>
                                <tr><td class="border p-3 font-bold">تعداد شمارنده‌های زوج</td><td id="divisor-even-count" class="border p-3" dir="ltr"></td></tr>
                                <tr class="bg-gray-50"><td class="border p-3 font-bold">تعداد شمارنده‌های فرد</td><td id="divisor-odd-count" class="border p-3" dir="ltr"></td></tr>
                                <tr><td class="border p-3 font-bold">تعداد شمارنده‌های صحیح</td><td id="divisor-integer-count" class="border p-3" dir="ltr"></td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Sequence Tools -->
                <div id="math-tool-sequences" class="math-tool hidden bg-white p-4 rounded-lg shadow">
                    <div class="border-b border-gray-200">
                        <nav class="flex-nowrap overflow-x-auto flex -mb-px" id="sequence-type-tabs">
                            <button class="seq-type-tab-btn whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-green-600 border-green-600" data-target="seq-arithmetic">دنباله حسابی</button>
                            <button class="seq-type-tab-btn whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300 transition duration-200" data-target="seq-geometric">دنباله هندسی</button>
                            <button class="seq-type-tab-btn whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300 transition duration-200" data-target="seq-triangular">دنباله مثلثی</button>
                            <button class="seq-type-tab-btn whitespace-nowrap py-3 px-4 border-b-2 font-medium text-sm text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300 transition duration-200" data-target="seq-fibonacci">دنباله فیبوناچی</button>
                        </nav>
                    </div>
                    
                    <div class="mt-4">

                        <div id="seq-arithmetic" class="seq-type-content space-y-2">
                            <label for="arithmetic-operation" class="block font-bold mb-2">انتخاب عملیات:</label>
                            <div class="relative custom-select-container" data-sequence-type="arithmetic">
                                <button type="button" id="arithmetic-operation" data-operation=""
                                	class="custom-select-trigger w-full flex justify-between items-center border border-green-500 rounded-xl p-4 text-xl font-extrabold text-green-800 shadow-md hover:bg-green-100 transition duration-150 focus:outline-none focus:ring-4 focus:ring-green-500 focus:ring-opacity-50"
                                	onclick="toggleDropdown(this)">
                                	<span id="arithmetic-operation-label">عملیات مورد نظر را انتخاب کنید...</span>
                                	<svg id="arithmetic-chevron" class="w-6 h-6 text-green-600 transition-transform transform rotate-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M19 9l-7 7-7-7"></path></svg>
                                </button>
                                <div id="arithmetic-operation-options"
                                	class="custom-select-options absolute z-20 w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-2xl max-h-60 overflow-y-auto hidden">
                                	<button type="button" class="select-option w-full text-right p-3 hover:bg-gray-100 transition duration-100" data-value="nth" onclick="selectSequenceOperation('arithmetic', 'nth', 'محاسبه جمله n-ام')">محاسبه جمله n-ام ($a_n$)</button>
                                	<button type="button" class="select-option w-full text-right p-3 hover:bg-gray-100 transition duration-100" data-value="sum_n" onclick="selectSequenceOperation('arithmetic', 'sum_n', 'محاسبه جمع n جمله اول')">محاسبه جمع n جمله اول ($S_n$ با $a_1, d$)</button>
                                	<button type="button" class="select-option w-full text-right p-3 hover:bg-gray-100 transition duration-100" data-value="sum_fl" onclick="selectSequenceOperation('arithmetic', 'sum_fl', 'محاسبه جمع با جمله اول و آخر')">محاسبه جمع با جمله اول و آخر ($S_n$ با $a_1, a_n$)</button>
                                </div>
                            </div>
                            <div id="arithmetic-fields-container" class="space-y-3 pt-3">
                                <p class="text-center text-gray-500">پس از انتخاب عملیات، فرمول و کادرهای ورودی نمایش داده می‌شود.</p>
			    </div>
                            <button onclick="calculateSequence('arithmetic')" class="p-3 btn-3d btn-green w-full">محاسبه</button>
                            <p id="arithmetic-result" class="mt-4 text-2xl text-center font-bold"></p>
                        </div>
                        

                        <div id="seq-geometric" class="seq-type-content hidden space-y-2">
                            <label for="geometric-operation" class="block font-bold mb-2">انتخاب عملیات:</label>
                            <div class="relative custom-select-container" data-sequence-type="geometric">
                                <button type="button" id="geometric-operation" data-operation=""
                                	class="custom-select-trigger w-full flex justify-between items-center border border-blue-500 rounded-xl p-4 text-xl font-extrabold text-blue-800 shadow-md hover:bg-blue-100 transition duration-150 focus:outline-none focus:ring-4 focus:ring-blue-500 focus:ring-opacity-50"
                                	onclick="toggleDropdown(this)">
                                	<span id="geometric-operation-label">عملیات مورد نظر را انتخاب کنید...</span>
                                	<svg id="geometric-chevron" class="w-6 h-6 text-blue-600 transition-transform transform rotate-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M19 9l-7 7-7-7"></path></svg>
                                </button>
                                <div id="geometric-operation-options"
                                	class="custom-select-options absolute z-20 w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-2xl max-h-60 overflow-y-auto hidden">
                                	<button type="button" class="select-option w-full text-right p-3 hover:bg-gray-100 transition duration-100" data-value="nth" onclick="selectSequenceOperation('geometric', 'nth', 'محاسبه جمله n-ام')">محاسبه جمله n-ام ($a_n$)</button>
                                	<button type="button" class="select-option w-full text-right p-3 hover:bg-gray-100 transition duration-100" data-value="sum_n" onclick="selectSequenceOperation('geometric', 'sum_n', 'محاسبه جمع n جمله اول')">محاسبه جمع n جمله اول ($S_n$)</button>
                                	<button type="button" class="select-option w-full text-right p-3 hover:bg-gray-100 transition duration-100" data-value="sum_fl" onclick="selectSequenceOperation('geometric', 'sum_inf', 'محاسبه جمع نامتناهی')">محاسبه جمع نامتناهی ($S_\infty$)</button>
                                </div>
                            </div>
                            <div id="geometric-fields-container" class="space-y-3 pt-3">
                                <p class="text-center text-gray-500">پس از انتخاب عملیات، فرمول و کادرهای ورودی نمایش داده می‌شود.</p>
			    </div>
                            <button onclick="calculateSequence('geometric')" class="p-3 btn-3d btn-green w-full">محاسبه</button>
                            <p id="geometric-result" class="mt-4 text-2xl text-center font-bold"></p>
                        </div>
                        

                        <div id="seq-triangular" class="seq-type-content hidden space-y-2">
                            <p class="text-center font-bold pb-2">محاسبه عدد مثلثی n-ام ($T_n$)</p>
                            <p class="text-center text-xl font-semibold">$$T_n = \frac{n(n+1)}{2}$$</p>
                            <input type="number" id="triangular-n" dir="ltr" class="p-2 focus:outline-none border text-center rounded-lg w-full" placeholder="شماره جمله (n)">
                            <button onclick="calculateSequence('triangular')" class="p-3 btn-3d btn-green w-full">محاسبه</button>
                            <p id="triangular-result" class="mt-4 text-2xl text-center font-bold"></p>
                        </div>

                        <div id="seq-fibonacci" class="seq-type-content hidden space-y-2">
                            <p class="text-center font-bold pb-2">محاسبه جمله n-ام دنبالۀ فیبوناچی ($F_n$)</p>
                            <p class="text-center text-xl font-semibold">$$F_n = \frac{\phi^n - (-\phi)^{-n}}{\sqrt{5}}$$</p>
                            <input type="number" id="fibonacci-n" dir="ltr" class="p-2 focus:outline-none border text-center rounded-lg w-full" placeholder="شماره جمله (n)">
                            <button onclick="calculateSequence('fibonacci')" class="p-3 btn-3d btn-green w-full">محاسبه</button>
                            <p id="fibonacci-result" class="mt-4 text-2xl text-center font-bold"></p>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        
        <!-- Physics Page -->
        <div id="physics-page" class="page">
            <!-- Content for Physics page -->
        </div>
        
        <!-- Chemistry Page -->
        <div id="chemistry-page" class="page">
             <!-- Content for Chemistry page -->
        </div>

        <!-- Biology Page -->
        <div id="biology-page" class="page">
             <!-- Content for Biology page -->
        </div>

        <!-- Geology Page -->
        <div id="geology-page" class="page">
             <!-- Content for Geology page -->
        </div>

        <!-- Astrology Page -->
        <div id="astrology-page" class="page">
             <!-- Content for Aastrology page -->
        </div>

        <!-- Persian Page -->
        <div id="persian-page" class="page">
             <!-- Content for Persian page -->
        </div>

        <!-- English Page -->
        <div id="english-page" class="page">
             <!-- Content for English page -->
        </div>

        <!-- Arabic Page -->
        <div id="arabic-page" class="page">
             <!-- Content for Arabic page -->
        </div>

        <!-- Labs Page -->
        <div id="simulations-page" class="page">
            <h2 class="text-2xl font-bold text-center mb-6 text-slate-900">🔬 آزمایش‌های مجازی (PhET)</h2>
            <div id="subject-buttons" class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
                <button data-subject="riazi" class="subject-btn w-full p-4 btn-3d bg-blue-600 text-white text-lg flex flex-col items-center hover:bg-blue-700">ریاضی</button>
                <button data-subject="fizik" class="subject-btn w-full p-4 btn-3d bg-red-600 text-white text-lg flex flex-col items-center hover:bg-red-700">فیزیک</button>
                <button data-subject="shimi" class="subject-btn w-full p-4 btn-3d bg-purple-600 text-white text-lg flex flex-col items-center hover:bg-purple-700">شیمی</button>
                <button data-subject="zist" class="subject-btn w-full p-4 btn-3d bg-green-600 text-white text-lg flex flex-col items-center hover:bg-green-710">زیست</button>
            </div>
            
            <div id="lab-main-content" class="bg-white rounded-lg shadow-xl p-4">
                <div id="lab-list-container">
                    <h3 id="lab-list-title" class="text-xl font-semibold mb-4 text-center text-gray-700">لطفاً یک موضوع را انتخاب کنید.</h3>
                    <div id="lab-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div>
                </div>
                <div id="lab-iframe-container" class="hidden relative pt-[75%] bg-gray-100 rounded-lg shadow-inner">
                    <iframe id="lab-iframe" src="" class="absolute top-0 left-0 w-full h-full border-0 rounded-lg" allowfullscreen title="شبیه‌ساز PhET"></iframe>
                </div>
            </div>
        </div>
        
        <!-- Games Page -->
        <div id="games-page" class="page">
            <div id="game-buttons" class="grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6"></div>
            <div id="game-iframe-container" class="hidden relative pt-[160%] md:pt-[75%] bg-gray-100 rounded-lg shadow-inner">
                <iframe id="game-iframe" src="" class="absolute top-0 left-0 w-full h-full border-0 rounded-lg" title="بازی"></iframe>
                <div id="iframe-placeholder" class="absolute inset-0 flex items-center justify-center text-gray-500 font-semibold text-lg p-4 bg-white rounded-lg">
                    لطفاً یک بازی را انتخاب کنید.
                </div>
            </div>
        </div>

    </div>

    <!-- Custom Message Box HTML -->
    <div id="message-box-container" class="message-box-overlay">
        <div class="message-box">
            <h3 id="message-box-title" class="text-xl font-bold mb-4"></h3>
            <p id="message-box-content" class="mb-6"></p>
            <button onclick="hideMessageBox()" class="btn-3d btn-green px-6 py-2">باشه</button>
        </div>
    </div>


    <script>
        // --- Navigation and Page Management ---
        const pageHistory = ['home-page'];
        const pageHeader = document.getElementById('page-header');
        const pageTitle = document.getElementById('page-title');

        function navigateTo(pageId, title = '') {
            document.querySelectorAll('.page').forEach(page => page.classList.remove('active'));
            const newPage = document.getElementById(pageId);
            if(newPage) {
                newPage.classList.add('active');
            } else {
                console.error(`Page with ID "${pageId}" not found.`);
                document.getElementById('home-page').classList.add('active'); // Fallback to home
            }

            if (pageId === 'home-page') {
                pageHeader.classList.add('hidden');
            } else {
                pageHeader.classList.remove('hidden');
                // Handle complex page titles and resets
                if (pageId === 'math-page') {
                    // Reset math page to show button grid
                    document.getElementById('math-tool-buttons').classList.remove('hidden');
                    document.querySelectorAll('.math-tool').forEach(tool => tool.classList.add('hidden'));
                    title = 'ریاضیات'; // Force title to be correct
                }
                pageTitle.textContent = title;
            }

            if (pageHistory[pageHistory.length - 1] !== pageId) {
                pageHistory.push(pageId);
            }
            window.scrollTo(0, 0);
        }

        function goBack() {
            const currentPageId = pageHistory[pageHistory.length - 1];
            // --- Custom Back Logic for Math Page ---
            if (currentPageId === 'math-page') {

                // Check for active Perimeter sub-tool
                const activeperimeterPage = document.querySelector('#shape-perimeter .perimeter-tool-page:not(.hidden)');
                if (activeperimeterPage) {
                    activeperimeterPage.classList.add('hidden');
                    document.getElementById('perimeter-shape-selection').classList.remove('hidden');
                    return; // Stay on math-page, show perimeter selection
                }

                // Check for active Area sub-tool
                const activeAreaPage = document.querySelector('#shape-area .area-tool-page:not(.hidden)');
                if (activeAreaPage) {
                    activeAreaPage.classList.add('hidden');
                    document.getElementById('area-shape-selection').classList.remove('hidden');
                    return; // Stay on math-page, show area selection
                }
                
                // Check for active Volume sub-tool
                const activeVolumePage = document.querySelector('#shape-volume .volume-tool-page:not(.hidden)');
                if (activeVolumePage) {
                    activeVolumePage.classList.add('hidden');
                    document.getElementById('volume-shape-selection').classList.remove('hidden');
                    return; // Stay on math-page, show volume selection
                }

                // Check for active main math tool
                const toolButtons = document.getElementById('math-tool-buttons');
                if (toolButtons.classList.contains('hidden')) {
                    toolButtons.classList.remove('hidden');
                    document.querySelectorAll('.math-tool').forEach(tool => tool.classList.add('hidden'));
                    pageTitle.textContent = 'ریاضیات';
                    return; // Stay on math-page, show tool grid
                }
            }

            if (pageHistory.length > 1) {
                pageHistory.pop();
                const previousPageId = pageHistory[pageHistory.length - 1];
                // This is a simplification. A more robust solution would store titles with history.
                const previousPageTitle = document.querySelector(`[onclick*="${previousPageId}"]`)?.textContent || '';
                navigateTo(previousPageId, previousPageTitle); 
            } else {
                navigateTo('home-page');
            }
        }

        // --- Splash Screen & Initializers ---
        window.onload = () => {
            const splashScreen = document.getElementById('splash-screen');
            const mainContainer = document.getElementById('main-container');
            setTimeout(() => {
                splashScreen.style.opacity = '0';
                setTimeout(() => {
                    splashScreen.style.display = 'none';
                    mainContainer.style.opacity = '1';
                    
                    // Render KaTeX for any static math formulas on the page
                    if(window.renderMathInElement) {
                        renderMathInElement(document.body, { delimiters: [{left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}] });
                    }
                }, 1000); 
            }, 1000); 
	        initializeMathPalette();
		    initializeGamesPage();
            initializeLabsPage();
            initializeVennDiagram();
            initializeConverter();
        };

        // --- Event Listener for AI Input Enter Key ---
	function isDesktop() {
            return !/Mobi|Android/i.test(navigator.userAgent) && !('ontouchstart' in window);
	}

        document.getElementById('ai-input').addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
            	if (isDesktop()) {
			if (!event.shiftKey) {
                	event.preventDefault(); // Prevent default action (like form submission)
                	solveWithAI(false);
            		}
            	}
            } else {}
            setTimeout(autoResizeTextarea, 0);
        });

        // --- Global state for the uploaded file ---
        let attachedFile = null;
        // --- Global state for Text-to-Speech ---
        let ttsAudio = null;
        let ttsState = 'idle'; // idle, loading, playing, paused

        // --- File Attachment & Cancellation Logic ---
        function cancelFile() {
            document.getElementById('file-preview-container').classList.add('hidden');
            document.getElementById('file-input').value = ''; // Clear the file input
            attachedFile = null;
        }
        
        document.getElementById('file-input').addEventListener('change', (event) => {
             const file = event.target.files[0];
             if (file) {
                if (!file.type.startsWith('image/')) {
                    showMessageBox('خطای فایل', 'در حال حاضر فقط فایل‌های تصویری پشتیبانی می‌شوند.');
                    cancelFile();
                    return;
                }

                const reader = new FileReader();
                reader.onload = function(e) {
                    const base64Data = e.target.result.split(',')[1];
                    attachedFile = {
                        mimeType: file.type,
                        data: base64Data
                    };
                    
                    document.getElementById('file-preview-image').src = e.target.result;
                    document.getElementById('file-preview-name').textContent = file.name;
                    document.getElementById('file-preview-container').classList.remove('hidden', 'items-center', 'justify-between', 'p-2', 'bg-gray-100', 'rounded-lg');
                    document.getElementById('file-preview-container').classList.add('flex', 'items-center', 'justify-between', 'p-2', 'bg-gray-100', 'rounded-lg');
                }
                reader.readAsDataURL(file);
             }
        });
        

        // --- Calculator Logic ---
        const calcInputEl = document.getElementById('calc-input');
        const calculatorContainer = document.getElementById('calculator-container');
        const backspaceBtn = document.getElementById('calc-backspace');

        let expression = '0';

        function updateCalculatorDisplay() {
            calcInputEl.textContent = expression;
        }

        function handleCalculatorInput(key) {
            const operators = ['+', '-', '×', '÷'];
            const lastChar = expression.slice(-1);

            if (expression === 'خطا' || expression === 'Infinity') {
                expression = '0';
            }

            if (/\d/.test(key)) { // Digit
                if (expression === '0') {
                    expression = key;
                } else {
                    expression += key;
                }
            } else if (key === '.') { // Decimal
                const parts = expression.replace(/[+\-×÷()]/g, ' ').split(' ');
                const lastPart = parts[parts.length - 1];
                if (lastPart && !lastPart.includes('.')) {
                    expression += '.';
                }
            } else if (key === '(') {
                if (expression === '0') {
                    expression = '(';
                } else if (!isNaN(lastChar) || lastChar === ')') {
                    expression += '×(';
                } else {
                    expression += '(';
                }
            } else if (key === ')') {
                const openParenCount = (expression.match(/\(/g) || []).length;
                const closeParenCount = (expression.match(/\)/g) || []).length;
                if (openParenCount > closeParenCount && !operators.includes(lastChar) && lastChar !== '(') {
                    expression += ')';
                }
            } else if (operators.includes(key)) {
                if (operators.includes(lastChar)) {
                    expression = expression.slice(0, -1) + key;
                } else if (lastChar !== '(') {
                    expression += key;
                }
            } else if (key === 'C') { // Clear
                expression = '0';
            } else if (key === '⌫') { // Backspace
                if (expression.length > 1) {
                    expression = expression.slice(0, -1);
                } else {
                    expression = '0';
                }
            } else if (key === '±') { // Plus/Minus
                // Simple implementation: only works if the expression is a single number
                if (!isNaN(Number(expression))) {
                    expression = String(Number(expression) * -1);
                }
            } else if (key === '=') { // Equals
                if (expression.trim() === '' || operators.includes(lastChar)) return;
                try {
                    let evalExpression = expression.replace(/×/g, '*').replace(/÷/g, '/');
                    const result = new Function('return ' + evalExpression)();
                    expression = String(parseFloat(result.toFixed(10)));
                } catch (error) {
                    console.error("Calculation Error:", error);
                    expression = 'خطا';
                }
            }
            updateCalculatorDisplay();
        }

        calculatorContainer.addEventListener('click', (event) => {
            const button = event.target.closest('button');
            if (!button || button.id === 'calc-backspace') return;
            const key = button.dataset.key || button.textContent.trim();
            handleCalculatorInput(key);
        });

        backspaceBtn.addEventListener('click', () => {
            handleCalculatorInput('⌫');
        });

        document.addEventListener('keydown', (event) => {
            if (!document.getElementById('calculator-page').classList.contains('active')) return;

            let key = event.key;
            let mappedKey = null;

            if (/\d/.test(key) || key === '.') {
                mappedKey = key;
            } else if (['+', '-', '(', ')'].includes(key)) {
                mappedKey = key;
            } else if (key === '*') {
                mappedKey = '×';
            } else if (key === '/') {
                mappedKey = '÷';
            } else if (key === 'Enter' || key === '=') {
                mappedKey = '=';
            } else if (key === 'Backspace') {
                mappedKey = '⌫';
            } else if (key === 'Escape' || key.toLowerCase() === 'c') {
                mappedKey = 'C';
            }
            
            if (mappedKey) {
                event.preventDefault();
                const button = document.querySelector(`#calculator-container button[data-key="${mappedKey.replace('×', '*').replace('÷', '/')}"]`);
                 if (button) {
                    button.classList.add('active');
                    setTimeout(() => button.classList.remove('active'), 100);
                 }
                handleCalculatorInput(mappedKey);
            }
        });
        
        document.getElementById('calc-mode-toggle').addEventListener('click', (e) => {
            navigateTo('advanced-calculator-page', 'ماشین حساب پیشرفته');
        });

        // --- Advanced Calculator & KamiAI Logic ---
        function autoResizeTextarea() {
	    const textarea = document.getElementById('ai-input');
            textarea.style.height = 'auto';
            textarea.style.height = textarea.scrollHeight + 'px';
        }

        const inputElement = document.getElementById('ai-input');

        if (inputElement) {
            inputElement.addEventListener('input', autoResizeTextarea);
            autoResizeTextarea(); 
        }

        let attachedFileAdvanced = null;
        const advancedCalcInput = document.getElementById('advanced-calc-input');
        const latexPreview = document.getElementById('latex-preview');

        // Live LaTeX Preview handler
        advancedCalcInput.addEventListener('input', () => {
            const text = advancedCalcInput.value;
            if (text.trim() === '') {
                latexPreview.innerHTML = '';
                return;
            }
            try {
                // Render the text directly. KaTeX will process it.
                katex.render(text, latexPreview, {
                    throwOnError: true,
                    displayMode: true
                });
            } catch (error) {
                latexPreview.innerHTML = `<span class="katex-error">${error.message.replace(/KaTeX parse error: /g, '')}</span>`;
            }
        });

        function insertAtCursor(inputElement, textToInsert) {
            const startPos = inputElement.selectionStart;
            const endPos = inputElement.selectionEnd;
            const text = inputElement.value;
            
            let finalInsert = textToInsert.replace(/\{\}/g, '');
            let cursorPos = textToInsert.indexOf('{ }');

            inputElement.value = text.substring(0, startPos) + finalInsert + text.substring(endPos);
            
            if (cursorPos !== -1) {
                const newCursorPos = startPos + cursorPos + 1;
                inputElement.focus();
                inputElement.setSelectionRange(newCursorPos, newCursorPos);
            } else {
                const newCursorPos = startPos + finalInsert.length;
                inputElement.focus();
                inputElement.setSelectionRange(newCursorPos, newCursorPos);
            }
        }

        const mathPalettes = {
            basic: [ { display: '\\frac{\\square}{\\square}', insert: '\\frac{ }{ }', title: "کسر" }, { display: '\\square^\\square', insert: '{ }^{ }', title: "توان" }, { display: '\\sqrt{\\square}', insert: '\\sqrt{ }', title: "رادیکال" }, { display: '\\sqrt[3]{\\square}', insert: '\\sqrt[3]{ }', title: "رادیکال با فُرجۀ 3" }, { display: '\\sqrt[\\square]{\\square}', insert: '\\sqrt[ ]{ }', title: "رادیکال با فرجۀ n" }, { display: '\\frac{d}{d\\square}', insert: '\\frac{d}{d{ }}({ })', title: "مشتق اول" } , { display: '\\frac{d^2}{{d\\square}^2}', insert: '\\frac{d^2}{d{ }^2}({ })', title: "مشتق دوم" } , { display: '\\int{\\square}', insert: '\\int{ }d{ }', title: "انتگرال" }, { display: '\\int_{\\square}^{\\square}', insert: '\\int_{ }^{ } {{ } d{ }}', title: "انتگرال معین" }, { display: '\\sum_{\\square = \\square}^{\\square}', insert: '\\sum_{{ } = { }}^{ } { }', title: "جمع‌زنی" }, { display: '\\lim_{\\square \\to \\square}', insert: '\\lim_{{ } \\to { }}{ }', title: "حد" }, { display: '[\\square, \\square, \\square]', insert: '[{ }, { }, { }]', title: "بردار ردیفی 3×1" }, { display: '\\begin{pmatrix} \\square & \\square \\\\ \\square & \\square \\end{pmatrix}', insert: '\\begin{pmatrix} { } & { } \\\\ { } & { } \\end{pmatrix}', title: "ماتریس 2×2" }, { display: '\\dot{\\square}', insert: '\\dot{ }', title: "نقطه" }, { display: '\\ddot{\\square}', insert: '\\ddot{ }', title: "دونقطه" }, { display: '\\acute{\\square}', insert: '\\acute{ }', title: "اَکسانتگو" }, { display: '\\grave{\\square}', insert: '\\grave{ }', title: "گراو" }, { display: '\\check{\\square}', insert: '\\check{ }', title: "هاتچک" }, { display: '\\breve{\\square}', insert: '\\breve{ }', title: "بریو" }, { display: '\\tilde{\\square}', insert: '\\tilde{ }', title: "مَدَّک" }, { display: '\\bar{\\square}', insert: '\\bar{ }', title: "بار" }, { display: '\\vec{\\square}', insert: '\\vec{ }', title: "بردار" }, { display: '\\mathbf{A}', insert: '\\mathbf{ }', title: "بردار" } , { display: '\\hat{\\square}', insert: '\\hat{ }', title: "کلاه (برآوردگر)" }, { display: '\\overline{\\square}', insert: '\\overline{ }', title: "خط بالا" }, { display: '\\underline{\\square}', insert: '\\underline{ }', title: "خط پایین" }, { display: '\\stackrel{\\frown}{AB}', insert: '\\stackrel{\\frown}{ }', title: "کمان" }, {display: '\\{{\\square} \\}', insert: '\\left\\{{ }\\right\\}', title: "آکولاد" } , { display: '\\boxed{x}', insert: '\\boxed{ }', title: "باکس" }, { display: '\\overbrace{\\square}^{\\square}', insert: '\\overbrace{ }^{ }', title: "آکوبند بالا" } ],
            radical: [ { display: '\\frac{\\square}{\\square}', insert: '\\frac{ }{ }', title: "کسر" } , { display: '\\square^2', insert: '{ }^{2}', title: "مربع (مجذور)" } , { display: '\\square^\\square', insert: '{ }^{ }', title: "توان" } , { display: '\\sqrt{\\square}', insert: '\\sqrt{ }', title: "جذر" }, { display: '\\sqrt[3]{\\square}', insert: '\\sqrt[3]{ }', title: "رادیکال با فرجۀ 3" }, { display: '\\sqrt[n]{\\square}', insert: '\\sqrt[n]{ }', title: "ریشۀ nاُم" }, { display: '\\infty', insert: '\\infty ', title: "بی‌نهایت" }, { display: '-\\infty', insert: '-\\infty ', title: "منفی بی‌نهایت" }, { display: '\\pi', insert: '\\pi ', title: "عدد پی" }, { display: 'e', insert: 'e ', title: "عدد اویلر یا عدد نپر" }, { display: 'e^{\\square}', insert: 'e^{ }', title: "تابع نمایی" }, { display: '\\ln(\\square)', insert: '\\ln()', title: "لگاریتم طبیعی" }, { display: '\\log(\\square)', insert: '\\log()', title: "لگاریتم بر مبنای 10" }, { display: '\\log_{\\square}(\\square)', insert: '\\log_{ }({ })', title: "لگاریتم" }, { display: '|\\square|', insert: '\\left| { } \\right|', title: "قدر مطلق" }, { display: '\\square \\leq \\square', insert: '{ } \\leq { }', title: "کوچکتر یا مساویِ" }, { display: '\\square \\geq \\square', insert: '{ } \\geq { }', title: "بزرگتر یا مساویِ" }, { display: '\\square \\neq \\square', insert: '{ } \\neq { }', title: "نامساویِ" } ],
            calculus: [ { display: '\\frac{d}{d\\square}', insert: '\\frac{d}{d{ }}({ })', title: "مشتق اول" } , { display: '\\frac{d^2}{{d\\square}^2}', insert: '\\frac{d^2}{d{ }^2}({ })', title: "مشتق دوم" } , { display: '\\frac{\\partial}{\\partial\\square}', insert: '\\frac{\\partial}{\\partial{ }}({ })', title: "مشتق جزئی" } , { display: '\\frac{\\partial^2}{{\\partial\\square}^2}', insert: '\\frac{\\partial^2}{\\partial{ }^2}({ })', title: "مشتق جزئی دوم" } , { display: '\\frac{\\partial^2}{\\partial\\square\\partial\\square}', insert: '\\frac{\\partial^2}{\\partial{ }\\partial{ }}({ })', title: "مشتق جزئی مختلط" } , { display: '\\int{\\square}', insert: '\\int{ }d{ }', title: "انتگرال نامعین" }, { display: '\\int_{a}^{b}', insert: '\\int_{ }^{ } {{ } d{ }}', title: "انتگرال معین" }, { display: '\\iint{\\square\\square}', insert: '\\iint{ } d{ } d{ }', title: "انتگرال نامعین دوگانه" } , { display: '\\int_{\\square}^{\\square}\\int_{\\square}^{\\square}', insert: '\\int_{ }^{ }\\int_{ }^{ } {{ } d{ } d{ }}', title: "انتگرال معین دوگانه" } , { display: '\\iiint\\square\\square\\square', insert: '\\int\\int\\int {{ } d{ } d{ } d{ }}', title: "انتگرال نامعین سه‌گانه" } , { display: '\\int_{\\square}^{\\square}\\int_{\\square}^{\\square}\\int_{\\square}^{\\square}', insert: '\\int_{ }^{ }\\int_{ }^{ }\\int_{ }^{ } {{ } d{ } d{ } d{ }}', title: "انتگرال معین سه‌گانه" } , { display: '\\oint_{\\square}\\square', insert: '\\oint_{ }{{ } d{ }}', title: "انتگرال کانتوری (روی مسیر بسته)" }, { display: '\\oiint_{\\square}\\square', insert: '\\oiint_{ }{{ } d{ }}', title: "انتگرال سطحی بسته" } , { display: '\\sum_{\\square = \\square}^{\\square}', insert: '\\sum_{{ } = { }}^{ } { }', title: "جمع‌زنی" }, { display: '\\prod_{\\square = \\square}^{\\square}', insert: '\\prod_{{ } = { }}^{ } { }', title: "حاصل‌ضرب" }, { display: '\\lim_{\\square \\to \\square}', insert: '\\lim_{{ } \\to { }} { }', title: "حد" }, { display: '\\lim_{\\square \\to \\square^-}', insert: '\\lim_{{ } \\to { }^-} { }', title: "حد چپ" }, { display: '\\lim_{\\square \\to \\square^+}', insert: '\\lim_{{ } \\to { }^+} { }', title: "حد راست" }, { display: 'f\'_\+(x)', insert: 'f(x)={ }, f\'_\+(x)=?', title: "مشتق راست" } , { display: 'f\'_\-(x)', insert: 'f(x)={ }, f\'_\-(x)=?', title: "مشتق چپ" }, { display: '\\begin{cases} \\square & \\square \\\\ \\square & \\square \\end{cases}', insert: '\\begin{cases} { } & { } \\\\ { } & { } \\end{cases}', title: "تابع چندضابطه‌ای" }, { display: '\\begin{cases} \\square & \\square \\\\ \\square & \\square \\\\ \\square & \\square \\end{cases}', insert: '\\begin{cases} { } & { } \\\\ { } & { } \\\\ { } & { } \\end{cases}', title: "تابع چندضابطه‌ای" } ],
            matrix: [ { display: '[\\square,\\square]', insert: '[{ },{ }]', title: "بردار ردیفی 2×1" }, { display: '[\\square,\\square,\\square]', insert: '[{ },{ },{ }]', title: "بردار ردیفی 3×1" }, { display: '[\\square,\\square,\\square,\\square]', insert: '[{ },{ },{ },{ }]', title: "بردار ردیفی 4×1" }, { display: '\\begin{bmatrix} \\square \\\\ \\square \\end{bmatrix}', insert: '\\begin{bmatrix} { } \\\\ { } \\end{bmatrix}', title: "بردار ستونی 1×2" } , { display: '\\begin{bmatrix} \\square \\\\ \\square \\\\ \\square \\end{bmatrix}', insert: '\\begin{bmatrix} { } \\\\ { } \\\\ { } \\end{bmatrix}', title: "بردار ستونی 1×3" } , { display: '\\begin{bmatrix} \\square \\\\ \\square \\\\ \\square \\\\ \\square \\end{bmatrix}', insert: '\\begin{bmatrix} { } \\\\ { } \\\\ { } \\\\ { } \\end{bmatrix}', title: "بردار ستونی 1×4" } , { display: '\\begin{pmatrix} \\square & \\square \\\\ \\square & \\square \\end{pmatrix}', insert: '\\begin{pmatrix} { } & { } \\\\ { } & { } \\end{pmatrix}', title: "ماتریس 2×2" }, {display: '\\begin{pmatrix} \\square & \\square & \\square \\\\ \\square & \\square & \\square \\end{pmatrix}', insert: '\\begin{pmatrix} { } & { } & { } \\\\ { } & { } & { } \\end{pmatrix}', title: "ماتریس 3×2" } , {display: '\\begin{pmatrix} \\square & \\square \\\\ \\square & \\square \\\\ \\square & \\square \\end{pmatrix}', insert: '\\begin{pmatrix} { } & { } \\\\ { } & { } \\\\ { } & { } \\end{pmatrix}', title: "ماتریس 2×3" } , {display: '\\begin{pmatrix} \\square & \\square & \\square \\\\ \\square & \\square & \\square \\\\ \\square & \\square & \\square \\end{pmatrix}', insert: '\\begin{pmatrix} { } & { } & { } \\\\ { } & { } & { } \\\\ { } & { } & { } \\end{pmatrix}', title: "ماتریس 3×3" },{"display": "\\tiny \\begin{pmatrix} a_{11} & \\cdots & a_{1n} \\\\ \\vdots & \\ddots & \\vdots \\\\ a_{m1} & \\cdots & a_{mn} \\end{pmatrix}","insert": "\\begin{pmatrix} { } & \\cdots & { } \\\\ \\vdots & \\ddots & \\vdots \\\\ { } & \\cdots & { } \\end{pmatrix}", "title": "ماتریس عمومی m×n"},{ "display": "\\det(A)", "insert": "\\det({ })", "title": "دترمینان" },{ "display": "A^{-1}", "insert": "{ }^{-1}", "title": "ماتریس معکوس" },{ "display": "A^{T}", "insert": "{ }^{T}", "title": "ترانَهاده" },{ "display": "\\bar{A}", "insert": "\\bar{ }", "title": "مزدوج مختلط" },{ "display": "A^{\\dagger}", "insert": "{ }^{\\dagger}", "title": "ترانَهادۀ مزدوج" },{ "display": "\\text{adj}(A)", "insert": "\\text{adj}({ })", "title": "ماتریس الحاقی" },{ "display": "\\text{tr}(A)", "insert": "\\text{tr}({ })", "title": "ترِیس ماتریس" },{ "display": "\\text{I}", "insert": "\\text{I}", "title": "ماتریس یکه/ماتریس همانی" },{ "display": "\\lambda", "insert": "\\lambda ", "title": "مقدار ویژه" },{ "display": "\\mathbf{v}", "insert": "\\mathbf{v}", "title": "بردار ویژه" },{ "display": "\\begin{vmatrix} \\square & \\square \\\\ \\square & \\square \\end{vmatrix}", "insert": "\\begin{vmatrix} { } & { } \\\\ { } & { } \\end{vmatrix}", "title": "دترمینان 2×2 (نماد)" } ],
            trig: [ { display: '\\pi', insert: '\\pi', title: "عدد پی" }, { display: '^{\\circ}', insert: '^{\\circ}', title: "درجه" }, { display: '\\text{rad}', insert: '\\text{rad}', title: "رادیان" }, { display: '\\sin \\square', insert: '\\sin({ })', title: "سینوس" }, { display: '\\cos \\square', insert: '\\cos({ })', title: "کسینوس" }, { display: '\\tan \\square', insert: '\\tan({ })', title: "تانژانت" }, { display: '\\sec \\square', insert: '\\sec({ })', title: "سکانت" }, { display: '\\csc \\square', insert: '\\csc({ })', title: "کسکانت" }, { display: '\\cot \\square', insert: '\\cot({ })', title: "کتانژانت" }, { display: '\\sin^{-1} \\square', insert: '\\arcsin({ })', title: "وارون سینوس" }, { display: '\\cos^{-1} \\square', insert: '\\arccos({ })', title: "وارون کسینوس" }, { display: '\\tan^{-1} \\square', insert: '\\arctan({ })', title: "وارون تانژانت" }, { display: '\\sinh \\square', insert: '\\sinh({ })', title: "سینوس هذلولی" }, { display: '\\cosh \\square', insert: '\\cosh({ })', title: "کسینوس هذلولی" }, { display: '\\tanh \\square', insert: '\\tanh({ })', title: "تانژانت هذلولی" }, { display: '\\mathrm{sech} \\square', insert: '\\mathrm{sech}({ })', title: "سکانت هذلولی" }, { display: '\\mathrm{csch} \\square', insert: '\\mathrm{csch}({ })', title: "کسکانت هذلولی" }, { display: '\\coth \\square', insert: '\\coth({ })', title: "کتانژانت هذلولی" }, { display: '\\sinh^{-1} \\square', insert: '\\operatorname{arsinh}({ })', title: "وارون سینوس هذلولی" }, { display: '\\cosh^{-1} \\square', insert: '\\operatorname{arcosh}({ })', title: "وارون کسینوس هذلولی" }, { display: '\\tanh^{-1} \\square', insert: '\\operatorname{artanh}({ })', title: "وارون تانژانت هذلولی" }, { display: '\\text{sech}^{-1} \\text{ } \\square', insert: '\\operatorname{arsech}({ })', title: "وارون سکانت هذلولی" }, { display: '\\text{csch}^{-1} \\text{ } \\square', insert: '\\operatorname{arcsch}({ })', title: "وارون کسکانت هذلولی" }, { display: '\\coth^{-1} \\square', insert: '\\operatorname{arrcoth}({ })', title: "وارون کتانژانت هذلولی" } ],
            operators: [
  { "display": "\\times", "insert": " \\times ", "title": "ضرب [خارجی]" },
  { "display": "\\div", "insert": " \\div ", "title": "تقسیم" },
  { "display": "\\cdot", "insert": " \\cdot ", "title": "ضرب نقطه‌ای)" },
  { "display": "\\forall", "insert": "\\forall ", "title": "برای همه" },
  { "display": "\\exists", "insert": "\\exists ", "title": "وجود دارد" },
  { "display": "\\nexists", "insert": "\\nexists ", "title": "وجود ندارد" },
  { "display": "\\cup", "insert": "\\cup ", "title": "اجتماع" },
  { "display": "\\cap", "insert": "\\cap ", "title": "اشتراک" },
  { "display": "\\subseteq", "insert": " \\subseteq ", "title": "زیرمجموعه (با تساوی)" },
  { "display": "\\supseteq", "insert": "\\supseteq", "title": "فرا مجموعه یا اَبَرمجموعه (با تساوی)" },
  { "display": "\\subset", "insert": "\\subset", "title": "زیرمجموعه محض یا زیرمجموعۀ سِره" },
  { "display": "\\wedge", "insert": "\\wedge ", "title": "عطف (واوِ منطقی، And)" },
  { "display": "\\vee", "insert": "\\vee ", "title": "فصل (یا منطقی، Or)" },
  { "display": "\\parallel", "insert": "\\parallel ", "title": "موازی است با" },
  { "display": "\\perp", "insert": "\\perp ", "title": "عمود است بر" },
  { "display": "\\in", "insert": "\\in ", "title": "عضوی از" },
  { "display": "\\notin", "insert": "\\notin ", "title": "نیست عضوی از" },
  { "display": "\\\\n(A)", "insert": "\\n()", "title": "تعداد اعضای مجموعه" },
  { "display": "\\Biggm|", "insert": "\\Biggm| ", "title": "به طوری که" },
  { "display": "\\mid", "insert": "\\mid ", "title": "عاد می‌کند" },
  { "display": "\\nmid", "insert": "\\nmid ", "title": "عاد نمی‌کند" },
  { "display": "\\rightleftharpoons", "insert": "\\rightleftharpoons ", "title": "تعادل شیمیایی" },
  { "display": "\\to", "insert": "\\to", "title": "حد/تابع به سمت/پیکان" },
  { "display": "\\Rightarrow", "insert": "\\Rightarrow", "title": "پیکان بالا/پایین نویس" },
  { "display": "\\xrightarrow[\\square]{\\square}", "insert": "\\xrightarrow[{ }]{ }", "title": "نتیجه‌گیری / دلالت/آنگاه" },
  { "display": "\\oplus", "insert": "\\oplus ", "title": "جمع در دایره" },
  { "display": "\\otimes", "insert": "\\otimes ", "title": "ضرب در دایره" },
  { "display": "\\odot", "insert": "\\odot ", "title": "نقطه در دایره" },
  { "display": "\\neq", "insert": "\\neq", "title": "نامساوی" },
  { "display": "\\geq", "insert": "\\geq", "title": "بزرگتر مساوی" },
  { "display": "\\leq", "insert": "\\leq", "title": "کوچکتر مساوی" },
  { "display": "\\equiv", "insert": "\\equiv", "title": "همانی/به طور همانی برابر است" },
  { "display": "\\sim", "insert": "\\sim ", "title": "تشابه" },
  { "display": "\\simeq", "insert": "\\simeq ", "title": "تقریباً برابر" },
  { "display": "\\approx", "insert": "\\approx ", "title": "تقریباً مساوی" },
  { "display": "\\cong", "insert": "\\cong ", "title": "هم‌نهشت" },
  { "display": "\\propto", "insert": "\\propto ", "title": "متناسب است با" },
  { "display": "\\therefore", "insert": "\\therefore ", "title": "بنابراین" },
  { "display": "\\because", "insert": "\\because ", "title": "زیرا" }
],
            greeks: [
  { "display": "\\pi", "insert": "\\pi ", "title": "عدد پی" },
  { "display": "^{\\circ}", "insert": "^{\\circ}", "title": "درجه" },
  { "display": "\\infty", "insert": "\\infty ", "title": "بی‌نهایت" },
  { "display": "\\pm", "insert": "\\pm ", "title": "بعلاوه/منهای یا مثبت‌منفی" },
  { "display": "\\emptyset", "insert": "\\emptyset ", "title": "مجموعه تهی" },
  { "display": "\\nabla", "insert": "\\nabla ", "title": "نابلا (دِل)" },
  { "display": "\\Delta", "insert": "\\Delta ", "title": "دلتا بزرگ / تغییرات" },
  { "display": "\\mathbb{N}", "insert": "\\mathbb{N}", "title": "اعداد طبیعی" },
  { "display": "\\mathbb{W}", "insert": "\\mathbb{W}", "title": "اعداد حسابی" },
  { "display": "\\mathbb{Z}", "insert": "\\mathbb{Z}", "title": "اعداد صحیح" },
  { "display": "\\mathbb{Q}", "insert": "\\mathbb{Q}", "title": "اعداد گویا" },
  { "display": "\\mathbb{Q}^c", "insert": "\\mathbb{Q}^c", "title": "اعداد گنگ" },
  { "display": "\\mathbb{R}", "insert": "\\mathbb{R}", "title": "اعداد حقیقی" },
  { "display": "\\mathbb{C}", "insert": "\\mathbb{C}", "title": "اعداد مختلط" },
  { "display": "\\mathbb{P}", "insert": "\\mathbb{P}", "title": "اعداد اول" },
  { "display": "\\alpha", "insert": "\\alpha ", "title": "آلفا" },
  { "display": "\\beta", "insert": "\\beta ", "title": "بتا" },
  { "display": "\\gamma", "insert": "\\gamma ", "title": "گاما (کوچک)" },
  { "display": "\\delta", "insert": "\\delta ", "title": "دلتا (کوچک)" },
  { "display": "\\epsilon", "insert": "\\epsilon ", "title": "اِپسیلون" },
  { "display": "\\varepsilon", "insert": "\\varepsilon ", "title": "اِپسیلون" },
  { "display": "\\zeta", "insert": "\\zeta ", "title": "زِتا" },
  { "display": "\\eta", "insert": "\\eta ", "title": "اِتا" },
  { "display": "\\theta", "insert": "\\theta ", "title": "تِتا" },
  { "display": "\\iota", "insert": "\\iota ", "title": "یوتا" },
  { "display": "\\kappa", "insert": "\\kappa ", "title": "کاپّا" },
  { "display": "\\lambda", "insert": "\\lambda ", "title": "لاندا" },
  { "display": "\\mu", "insert": "\\mu ", "title": "مو (میکرو)" },
  { "display": "\\nu", "insert": "\\nu ", "title": "نو" },
  { "display": "\\xi", "insert": "\\xi ", "title": "کسی" },
  { "display": "\\omicron", "insert": "\\omicron ", "title": "اُمیکرون" },
  { "display": "\\rho", "insert": "\\rho ", "title": "رو" },
  { "display": "\\sigma", "insert": "\\sigma ", "title": "سیگما (کوچک)" },
  { "display": "\\tau", "insert": "\\tau ", "title": "تاو" },
  { "display": "\\upsilon", "insert": "\\upsilon ", "title": "اوپسیلون" },
  { "display": "\\phi", "insert": "\\phi ", "title": "فی" },
  { "display": "\\varphi", "insert": "\\varphi ", "title": "فی" },
  { "display": "\\chi", "insert": "\\chi ", "title": "خی" },
  { "display": "\\psi", "insert": "\\psi ", "title": "پسی" },
  { "display": "\\omega", "insert": "\\omega ", "title": "اومگا (کوچک)" },
  { "display": "\\Gamma", "insert": "\\Gamma ", "title": "گاما (بزرگ)" },
  { "display": "\\Theta", "insert": "\\Theta ", "title": "تِتا (بزرگ)" },
  { "display": "\\Lambda", "insert": "\\Lambda ", "title": "لاندا (بزرگ)" },
  { "display": "\\Xi", "insert": "\\Xi ", "title": "کسی (بزرگ)" },
  { "display": "\\Upsilon", "insert": "\\Upsilon ", "title": "اوپسیلون (بزرگ)" },
  { "display": "\\Phi", "insert": "\\Phi ", "title": "فی (بزرگ)" },
  { "display": "\\Psi", "insert": "\\Psi ", "title": "پسی (بزرگ)" },
  { "display": "\\Omega", "insert": "\\Omega ", "title": "اومگا (بزرگ/اهم)" },
  { "display": "\\mho", "insert": "\\mho ", "title": "زیمِنس یا مهو (رسانایی)" },
  { "display": "\\AA", "insert": "\\AA ", "title": "آنگستروم" },
  { "display": "\\hbar", "insert": "\\hbar ", "title": "اچ‌بار (ثابت پلانک کاهش یافته)" }
],
        };

        function initializeMathPalette() {
            Object.keys(mathPalettes).forEach(key => {
                const container = document.getElementById(`palette-content-${key}`);
                if(!container) return;
                container.innerHTML = ''; // Clear previous buttons
                const symbols = mathPalettes[key];
                symbols.forEach(symbol => {
                    const btn = document.createElement('button');
                    btn.className = 'btn-3d btn-gray math-symbol-btn';
                    btn.dataset.insert = symbol.insert;
                    if (symbol.title) {

	                btn.title = symbol.title;

                    }
                    container.appendChild(btn);
                    try {
                        katex.render(symbol.display, btn, { throwOnError: false, displayMode: false });
                    } catch (e) { btn.textContent = symbol.insert; }
                    btn.addEventListener('click', () => insertAtCursor(advancedCalcInput, btn.dataset.insert));
                });
            });

            const tabs = document.querySelectorAll('.palette-tabs button');
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    document.querySelectorAll('.palette-content').forEach(c => c.classList.remove('active'));
                    const paletteContent = document.getElementById(`palette-content-${tab.dataset.palette}`);
                    if(paletteContent) {
                        paletteContent.classList.add('active');
                    }
                });
            });
        }
        
        document.getElementById('file-input-advanced').addEventListener('change', (event) => {
            const file = event.target.files[0]; if (!file) return;
            const reader = new FileReader();
            reader.onload = function(e) {
                const base64Data = e.target.result.split(',')[1];
                attachedFileAdvanced = { mimeType: file.type, data: base64Data };
                document.getElementById('file-preview-name-advanced').textContent = file.name;
                document.getElementById('file-preview-container-advanced').classList.remove('hidden');
            }
            reader.readAsDataURL(file);
        });

        function cancelFileAdvanced() {
            document.getElementById('file-preview-container-advanced').classList.add('hidden');
            document.getElementById('file-input-advanced').value = '';
            attachedFileAdvanced = null;
        }

        advancedCalcInput.addEventListener('keydown', (event) => { if (event.key === 'Enter') { event.preventDefault(); solveWithAI(true); } });
        
        async function solveWithAI(isAdvanced = false) {
            const apiKey = "AIzaSyBXTG5jmQFKIJAGCpaivN3zl9ywMupCFOA"; 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            const inputElement = document.getElementById(isAdvanced ? 'advanced-calc-input' : 'ai-input');
            const outputElement = document.getElementById(isAdvanced ? 'kami-output' : 'ai-output');
            const plotContainer = document.getElementById('plot-container');
            let userQuery = inputElement.value;
            
            if (!isAdvanced) {
                stopTTS(); 
                document.getElementById('tts-button').classList.add('hidden');
            } else {
                plotContainer.classList.add('hidden');
                plotContainer.innerHTML = '';
            }

            const currentFile = isAdvanced ? attachedFileAdvanced : attachedFile;
            if (!userQuery.trim() && !currentFile) {
                showMessageBox('ورودی خالی', 'لطفاً یک سوال بنویسید یا یک فایل ضمیمه کنید.');
                return;
            }
            if (currentFile && !userQuery.trim()) { 
                userQuery = isAdvanced 
                    ? "این تصویر را به طور کامل توصیف کن و اگر مسئله ریاضی در آن است، آن را حل کن."
                    : "این تصویر را به طور کامل توصیف کن.";
            }

             const systemPrompt = isAdvanced 
                ? "شما KamiAI هستید، مخفف Kamyar's Advanced Mindful Innovative Artificial Intelligence به معنی هوش مصنوعی پیشرفته، هوشیار و نوآورانه کامیار، یک دستیار پیشرفته و متخصص در ریاضیات. شما مسائل پیچیده ریاضی را حل می‌کنید، توابع را رسم می‌کنید، معادلات را حل می‌کنید و راه‌حل‌های گام به گام ارائه می‌دهید. شما هم ورودی‌های متنی و هم ورودی‌های فرمت‌بندی شده با LaTeX را درک و پردازش می‌کنید. پاسخ‌های شما باید دقیق، واضح و آموزشی و با فرمت‌بندی مناسب باشند، از فرمت‌بندی Markdown و LaTeX برای خوانایی بهتر استفاده کنید؛ از LaTeX برای روابط و معادلات و Mrakdown برای جداول (یه وقت بین این دوتا قاطی نکنی و روابط LaTeX رو به صورت ناقص و به هم ریخته توی جدول نشون بدیا!). اگر کاربر درخواست رسم یک تابع را دارد، ابتدا باید فرمول تابع را در یک برچسب (تگ) مشخص به این صورت ارائه دهید: <plot>fn: x^3 - 2*x^2 + 5</plot>. همیشه برای توان از `^` و برای ضرب صریح از `*` استفاده کنید (مثال: `2*x` به جای `2x`)؛ برای توابع هذلولی معکوس (مانند `arsinh`، `arcosh`، `artanh` و غیره)، از تعریف آن‌ها استفاده کرده و آن را به تابع رسم (plot function) بدهید (مثال: به جای `arsinh(x)`، تابع رسم را `log({x} + sqrt({x}2 + 1))` بدهید). پس از برچسب (تگ) رسم، توضیح متنی فارسی را ارائه دهید. کاربر کدهای LaTeX رندر نشده را برای روابط، معادلات و فرمول‌های خود به شما خواهد داد. اگر ورودی کاربر به صورت `f(x)={...}, f\'_\-(x)=?` بود، این به معنای آن است که اگر تابع `f(x)` برابر با `...` باشد، در این صورت مشتق چپ تابع `f(x)` چه خواهد بود؛ و برعکس، برای علامت `+` به معنای مشتق راست تابع `f(x)` است.  شما در یک برنامه تخصصی تحت عنوان «✨کمک‌یار آموزشی» استفاده می‌شوید که شامل 14 بخش است: 🤖پاسخ مسئله با هوش مصنوعی (که قابلیت هایی چون پخش صدا، درک تصاویر، توضیح مفاهیم، حل و توضیح گام به گام مسائل پیچیده، خواندن فرمول ها و روابط ریاضی و نمایش آنها به نحو احسن، رسم جداول با فرمت بندی زیبا را دارا می‌باشد)، 🧮 ماشین حساب (که از دو بخش استاندارد و پیشرفته تشکیل شده است؛ ماشین حساب استاندارد همانند تمامی ماشین حساب های رایج و معمولی عملیات جمع و تفریق و ضرب و تقسیم را انجام می‌دهد و ماشین حساب پیشرفته (که اونجا هم مجهز به توئه و تو اونجا رو کنترل میکنی  و تو الان اونجایی!) میتواند از کاربر ورودی های ریاضی و یا تصویری بگیرد و بفهمد و مسائلش را حل و توصیف کند، مثلا میتواند انتگرال ها و مشتق ها و حد ها و توابع مثلثاتی و عملیات پیشرفته تری را از کاربر به صورت ریاضی (LaTeX) بگیرد و با فرمت بندی LaTeX به زیبایی پاسخ مسائل را نمایش دهد و گام به گام توضیح دهد و رسم نمودار توابع ساده و پیچیده را با دریافت ضابطۀ تابع انجم دهد.)، 📏 تبدیل واحد (که تبدیل واحدهای رایج رو به صورت زیبا و کامپیوتری و آنی محاسبه میکنه با شکل و شمایل زیبا و بصری؛ تبدیل واحد های طول و مساحت و حجم، جرم و انرژی، زمان، دما، زاویه، سرعت و بار الکتریکی و میدان مغناطیسی، داده. البته اگه تبدیل واحد مد نظر کاربر توی برنامه نبود، یه بخش پایینش هست به اسم «✨ مبدل واحد هوشمند» که اونم مجهز به توئه و دست توئه و با کمک هوش مصنوعی KamiAI، به هر تبدیل واحدی دقیق و درست و زیبا جواب میده)، 📐 ریاضیات (این بخش هم 10 قسمت داره: عدد اول است یا نه؟ (که بررسی میکنه عدد اوله یا نه و اگه مرکب بود تجزیه‌اش به عوامل اول رو میاره)، قضیۀ فیثاغورس (با گرفتن دو ضلع مثلث قائم‌الزاویه ضلع مجهول رو حساب میکنه)، محیط و مساحت و حجم اشکال، رسم نمودار تابع (به صورت آنی و دقیق و زیبا و دامنۀ شخصی سازی شدۀ کاربر؛ دارای سه تب رسم نمودار توابع ساده (تک‌ضابطه‌ای)، رسم نمودار توابع چندضابطه‌ای، مقایسه توابع (رسم نمودار همزمان [حداکثر] پنج تابع با ضابطه))، رسم نمودار ون (با گرفتن عبارت مجموعه، به صورت آنی و دقیق و زیبا و بصری، ناحیۀ مورد نظر رو هاشور میزنه)، بخش‌پذیری دو عدد، شمارنده‌ها (با گرفتن عددی طبیعی از کاربر، به صورت آنی تحلیل شمارنده انجام میده؛ یعنی یه جدول میکشه با سطرهای تجزیه به عوامل اول، [لیست] شمارنده‌ها، تعداد شمارنده‌ها[ی طبیعی]، شمارنده‌های اول، تعداد شمارنده‌های اول، شمارنده‌های مرکب، تعداد شمارنده‌های مرکب، تعداد شمارنده‌های زوج، تعداد شمارنده‌های فرد، تعداد شمارنده‌های صحیح.)، دنباله‌ها (دارای چند تب برای نوع دنباله، یک لیست کشویی زیبا و جالب برای نوع عملیات (یافتن جمله n-ام، جمع دنباله) که وقتی زد فرمول مربوطه به صورت LaTeX نمایش داده میشه، چند کادر ورودی برای گرفتن مقادیر لازم برای محاسبۀ عملیات))، ⚛️ فیزیک، 🧪 شیمی، 🧬 زیست، 🌍 زمین‌شناسی، 🔭 نجوم، 📜 ادبیات فارسی ✍️، 🇬🇧 زبان انگلیسی ✍️، 🇸🇦 زبان عربی ✍️، 🔬 آزمایشات (این بخش آزمایشات Phet را به صورت شخصی سازی شده و دسته بندی شده در اختیار کاربران قرار داده است تا مفاهیم درسی و علمی را با انیمیشن و بازی یاد بگیرند.)، 🎮 بازی‌ها (همچنین بازی هایی در این وب اپلیکیشن وجود دارد که کاربر می تواند به صورت آنلاین بازی کرده و لذت ببرد.). اینهارا گفتم که با محیط برنامه آشنا شوی و بتوانی در صورت ناتوانی در پاسخ‌دهی بهینه، به بخش هایی که توانایی پاسخ‌دهی بهتر در آن حوزه دارند کاربر را ارجاع و ارشاد و راهنمایی کنی و تو نقش راهنمای کاربر در این وب‌اپلیکیشن کاربردی-علمیِ چندمنظوره داری. تا کاربر ازت نخواسته انگلیسی یا عربی یا هر زبان دیگه ای حرف بزنی، به فارسی حرف می زنی."

                : "شما KamiAI (کامی‌اِی‌آی) هستید، مخفف «Kamyar's Advanced Mindful Innovative Artificial Intelligence» به معنی هوش مصنوعی پیشرفته، هوشیار و نوآورانه کامیار. شما یک مدل زبان برای کمک به دانش آموزان کنجکاو هستید. پاسخ‌های شما باید آموزشی، دقیق، کاملاً به زبان فارسی و مناسب باشد. مفاهیم را به صورت گام به گام و واضح توضیح دهید. از فرمت‌بندی Markdown و LaTeX برای خوانایی بهتر استفاده کنید.. شما در یک برنامه تخصصی تحت عنوان «✨کمک‌یار آموزشی» استفاده می‌شوید که شامل 14 بخش است: 🤖پاسخ مسئله با هوش مصنوعی (که قابلیت هایی چون پخش صدا، درک تصاویر، توضیح مفاهیم، حل و توضیح گام به گام مسائل پیچیده، خواندن فرمول ها و روابط ریاضی و نمایش آنها به نحو احسن، رسم جداول با فرمت بندی زیبا را دارا می‌باشد و تو الان اونجایی!)، 🧮 ماشین حساب (که از دو بخش استاندارد و پیشرفته تشکیل شده است؛ ماشین حساب استاندارد همانند تمامی ماشین حساب های رایج و معمولی عملیات جمع و تفریق و ضرب و تقسیم را انجام می‌دهد و ماشین حساب پیشرفته (که اونجا هم مجهز به توئه و تو اونجا رو کنترل میکنی) میتواند از کاربر ورودی های ریاضی و یا تصویری بگیرد و بفهمد و مسائلش را حل و توصیف کند، مثلا میتواند انتگرال ها و مشتق ها و حد ها و توابع مثلثاتی و عملیات پیشرفته تری را از کاربر به صورت ریاضی (LaTeX) بگیرد و با فرمت بندی LaTeX به زیبایی پاسخ مسائل را نمایش دهد و گام به گام توضیح دهد و رسم نمودار توابع ساده و پیچیده را با دریافت ضابطۀ تابع انجم دهد.)، 📏 تبدیل واحد (که تبدیل واحدهای رایج رو به صورت زیبا و کامپیوتری و آنی محاسبه میکنه با شکل و شمایل زیبا و بصری؛ تبدیل واحد های طول و مساحت و حجم، جرم و انرژی، زمان، دما، زاویه، سرعت و بار الکتریکی و میدان مغناطیسی، داده. البته اگه تبدیل واحد مد نظر کاربر توی برنامه نبود، یه بخش پایینش هست به اسم «✨ مبدل واحد هوشمند» که اونم مجهز به توئه و دست توئه و با کمک هوش مصنوعی KamiAI، به هر تبدیل واحدی دقیق و درست و زیبا جواب میده)، 📐 ریاضیات (این بخش هم 10 قسمت داره: عدد اول است یا نه؟ (که بررسی میکنه عدد اوله یا نه و اگه مرکب بود تجزیه‌اش به عوامل اول رو میاره)، قضیۀ فیثاغورس (با گرفتن دو ضلع مثلث قائم‌الزاویه ضلع مجهول رو حساب میکنه)، محیط و مساحت و حجم اشکال، رسم نمودار تابع (به صورت آنی و دقیق و زیبا و دامنۀ شخصی سازی شدۀ کاربر؛ دارای سه تب رسم نمودار توابع ساده (تک‌ضابطه‌ای)، رسم نمودار توابع چندضابطه‌ای، مقایسه توابع (رسم نمودار همزمان [حداکثر] پنج تابع با ضابطه))، رسم نمودار ون (با گرفتن عبارت مجموعه، به صورت آنی و دقیق و زیبا و بصری، ناحیۀ مورد نظر رو هاشور میزنه)، بخش‌پذیری دو عدد، شمارنده‌ها (با گرفتن عددی طبیعی از کاربر، به صورت آنی تحلیل شمارنده انجام میده؛ یعنی یه جدول میکشه با سطرهای تجزیه به عوامل اول، [لیست] شمارنده‌ها، تعداد شمارنده‌ها[ی طبیعی]، شمارنده‌های اول، تعداد شمارنده‌های اول، شمارنده‌های مرکب، تعداد شمارنده‌های مرکب، تعداد شمارنده‌های زوج، تعداد شمارنده‌های فرد، تعداد شمارنده‌های صحیح.)، دنباله‌ها (دارای چند تب برای نوع دنباله، یک لیست کشویی زیبا و جالب برای نوع عملیات (یافتن جمله n-ام، جمع دنباله) که وقتی زد فرمول مربوطه به صورت LaTeX نمایش داده میشه، چند کادر ورودی برای گرفتن مقادیر لازم برای محاسبۀ عملیات))، ⚛️ فیزیک، 🧪 شیمی، 🧬 زیست، 🌍 زمین‌شناسی، 🔭 نجوم، 📜 ادبیات فارسی ✍️، 🇬🇧 زبان انگلیسی ✍️، 🇸🇦 زبان عربی ✍️، 🔬 آزمایشات (این بخش آزمایشات Phet را به صورت شخصی سازی شده و دسته بندی شده در اختیار کاربران قرار داده است تا مفاهیم درسی و علمی را با انیمیشن و بازی یاد بگیرند.)، 🎮 بازی‌ها (همچنین بازی هایی در این وب اپلیکیشن وجود دارد که کاربر می تواند به صورت آنلاین بازی کرده و لذت ببرد.). اینهارا گفتم که با محیط برنامه آشنا شوی و بتوانی در صورت ناتوانی در پاسخ‌دهی بهینه، به بخش هایی که توانایی پاسخ‌دهی بهتر در آن حوزه دارند کاربر را ارجاع و ارشاد و راهنمایی کنی و تو نقش راهنمای کاربر در این وب‌اپلیکیشن کاربردی-علمیِ چندمنظوره داری. تا کاربر ازت نخواسته انگلیسی یا عربی یا هر زبان دیگه ای حرف بزنی، به فارسی حرف می زنی.";
            
            outputElement.innerHTML = `<div class="flex justify-center items-center p-4"><svg class="animate-spin h-8 w-8 text-green-700" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></div>`;
            
            const payload = { contents: [{ parts: [] }], systemInstruction: { parts: [{ text: systemPrompt }] }, };
            if (userQuery.trim()) { payload.contents[0].parts.push({ text: userQuery }); }
            if (currentFile) { payload.contents[0].parts.push({ inlineData: { mimeType: currentFile.mimeType, data: currentFile.data } }); }

            try {
                const response = await fetchWithRetry(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                if (!response.ok) { const errorData = await response.json(); throw new Error(errorData.error?.message || `HTTP error! status: ${response.status}`); }
                const result = await response.json();
                const candidate = result.candidates?.[0];

                if (isAdvanced) cancelFileAdvanced(); else cancelFile();
                
                if (candidate && candidate.content?.parts?.[0]?.text) {
                    let rawText = candidate.content.parts[0].text;
                    
                    if(isAdvanced) {
                        const plotMatch = rawText.match(/<plot>fn:\s*(.*?)<\/plot>/);
                        if (plotMatch && plotMatch[1]) {
                            plotContainer.classList.remove('hidden');
                            const targetElement = document.getElementById('plot-container');
                            
const rect = targetElement.getBoundingClientRect();
                            const plotWidth = rect.width;
                            const plotHeight = rect.height > 0 ? rect.height : 400; // خواندن ارتفاع یا پیش فرض 400
                            try {
                                // function-plot uses '^' for exponents. The model is now instructed to use '^'.
                                // We replace any '**' with '^' as a safeguard in case the model makes a mistake.
                                let fnString = plotMatch[1].replace(/\*\*/g, '^').replace('pi', 'PI').replace('arc', 'a').replace('ar', 'a');

                                functionPlot({
                                    target: '#plot-container',
		                    width: plotWidth + 20,
		                    height: plotHeight,
                                    data: [{ fn: fnString, color: '#15803d' }],
                                    grid: true,
                                    tip: { xLine: true, yLine: true },
                                });
                            } catch (e) {
                                console.error("Plotting Error:", e);
                                plotContainer.innerHTML = `<p class="text-red-500 text-center">خطا در رسم نمودار.</p>`;
                            }
                            rawText = rawText.replace(/<plot>.*?<\/plot>/s, '');
                        }
                    }

                    outputElement.innerHTML = parseAndStyleResponse(rawText);
                    
                    if (!isAdvanced) { document.getElementById('tts-button').classList.remove('hidden'); }
                    if (window.renderMathInElement) { renderMathInElement(outputElement, { delimiters: [{left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}] }); }

                } else { throw new Error('پاسخ معتبری از هوش مصنوعی دریافت نشد.'); }
            } catch (error) {
                console.error('AI Error:', error);
                if (error instanceof TypeError && error.message.includes('Failed to fetch')) { showMessageBox('خطای اتصال', 'لطفا VPN خود را روشن کنید.'); } 
                else { showMessageBox('خطای API', `متاسفانه خطایی در ارتباط با هوش مصنوعی رخ داد. (${error.message})`); }
                outputElement.innerHTML = `<p class="text-red-500 text-center">خطا در دریافت پاسخ.</p>`;
                if (isAdvanced) cancelFileAdvanced(); else cancelFile();
            }
        }
        
        async function fetchWithRetry(url, options, retries = 3, delay = 1000) {
            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(url, options);
                    if (response.status !== 429 && response.status < 500) {
                        return response;
                    }
                    // Don't log retry attempts to console
                } catch (error) {
                    if (i === retries - 1) throw error;
                }
                await new Promise(res => setTimeout(res, delay * (i + 1)));
            }
        }

        // --- Text-to-Speech (TTS) Logic ---

        function updateTtsButton(state) {
            const icons = { play: document.getElementById('tts-icon-play'), loading: document.getElementById('tts-icon-loading'), pause: document.getElementById('tts-icon-pause') };
            Object.values(icons).forEach(icon => icon.classList.add('hidden'));
            if (state === 'loading') icons.loading.classList.remove('hidden');
            else if (state === 'playing') icons.pause.classList.remove('hidden');
            else icons.play.classList.remove('hidden');
            ttsState = state;
        }

        function stopTTS() { if (ttsAudio) { ttsAudio.pause(); ttsAudio = null; } updateTtsButton('idle'); }

        async function playTTS() {
            if (ttsState === 'loading') return;
            if (ttsState === 'playing') { ttsAudio.pause(); updateTtsButton('paused'); return; }
            if (ttsState === 'paused') { ttsAudio.play(); updateTtsButton('playing'); return; }
            
            const textToSpeak = document.getElementById('ai-output').textContent;
            if (!textToSpeak.trim()) return;
            
            updateTtsButton('loading');
            
            const apiKey = "AIzaSyBXTG5jmQFKIJAGCpaivN3zl9ywMupCFOA" 
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-tts:generateContent?key=${apiKey}`;

            const payload = { contents: [{ parts: [{ text: textToSpeak }] }], generationConfig: { responseModalities: ["AUDIO"], speechConfig: { voiceConfig: { prebuiltVoiceConfig: { voiceName: "Puck" } } } }, model: "gemini-2.5-flash-preview-tts" };

            try {
                const response = await fetchWithRetry(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                if (!response.ok) throw new Error(`TTS API Error: ${response.statusText}`);
                const result = await response.json();
                const audioData = result?.candidates?.[0]?.content?.parts?.[0]?.inlineData?.data;
                const mimeType = result?.candidates?.[0]?.content?.parts?.[0]?.inlineData?.mimeType;

                if (!audioData || !mimeType.startsWith("audio/")) { throw new Error('داده صوتی معتبری دریافت نشد.'); }
                
                const sampleRate = parseInt(mimeType.match(/rate=(\d+)/)?.[1] || "24000", 10);
                const pcmData = base64ToArrayBuffer(audioData);
                const wavBlob = pcmToWav(new Int16Array(pcmData), sampleRate);
                ttsAudio = new Audio(URL.createObjectURL(wavBlob));
                ttsAudio.play();
                updateTtsButton('playing');
                ttsAudio.onended = () => updateTtsButton('idle');

            } catch(error) {
                console.error("TTS Error:", error);
                showMessageBox('خطای صدا', 'متاسفانه امکان پخش صدا وجود ندارد.');
                updateTtsButton('idle');
            }
        }

        function base64ToArrayBuffer(base64) { const bs = window.atob(base64); const len = bs.length; const bytes = new Uint8Array(len); for (let i = 0; i < len; i++) { bytes[i] = bs.charCodeAt(i); } return bytes.buffer; }
        function pcmToWav(pcmData, sampleRate) {
            const buffer = new ArrayBuffer(44 + pcmData.length * 2);
            const view = new DataView(buffer);
            const writeString = (offset, str) => { for (let i = 0; i < str.length; i++) view.setUint8(offset + i, str.charCodeAt(i)); };
            writeString(0, 'RIFF'); view.setUint32(4, 36 + pcmData.length * 2, true); writeString(8, 'WAVE');
            writeString(12, 'fmt '); view.setUint32(16, 16, true); view.setUint16(20, 1, true);
            view.setUint16(22, 1, true); view.setUint32(24, sampleRate, true); view.setUint32(28, sampleRate * 2, true);
            view.setUint16(32, 2, true); view.setUint16(34, 16, true); writeString(36, 'data');
            view.setUint32(40, pcmData.length * 2, true);
            for (let i = 0; i < pcmData.length; i++) { view.setInt16(44 + i * 2, pcmData[i], true); }
            return new Blob([view], { type: 'audio/wav' });
        }

        <!-- Unit Converter Logic -->
        
        const unitData = {
            // Base: Meter (متر)
            "طول": {
                "متر (m)": 1,
                "کیلومتر (km)": 1000,
                "سانتی‌متر (cm)": 0.01,
                "میلی‌متر (mm)": 0.001,
                "اینچ (in)": 0.0254,
                "فوت (ft)": 0.3048,
                "مایل (mi)": 1609.344,
                "یارد (yd)": 0.9144,
            },
            // Base: Square Meter (متر مربع)
            "مساحت": {
                "متر مربع (m²)": 1,
                "کیلومتر مربع (km²)": 1000000,
                "سانتی‌متر مربع (cm²)": 0.0001,
                "هکتار (ha)": 10000,
                "جریب (acre)": 4046.86,
                "فوت مربع (ft²)": 0.092903,
            },
            // Base: Cubic Meter (متر مکعب)
            "حجم": {
                "متر مکعب (m³)": 1,
                "لیتر (L)": 0.001,
                "میلی‌لیتر (mL)": 0.000001,
                "گالن آمریکایی (US gal)": 0.00378541,
                "فوت مکعب (ft³)": 0.0283168,
            },
            // Base: Kilogram (کیلوگرم)
            "جرم": {
                "کیلوگرم (kg)": 1,
                "گرم (g)": 0.001,
                "میلی‌گرم (mg)": 0.000001,
                "تن (tonne)": 1000,
                "اونس (oz)": 0.0283495,
                "پوند (lb)": 0.453592,
            },
            // Base: Second (ثانیه)
            "زمان": {
                "ثانیه (s)": 1,
                "دقیقه (min)": 60,
                "ساعت (h)": 3600,
                "روز (day)": 86400,
                "سال (year)": 31557600, // سال زمینی تقریبی
            },
            // Base: Joule (J)
            "انرژی": {
                "ژول (J)": 1,
                "کیلوژول (kJ)": 1000,
                "کالری (cal)": 4.184,
                "کیلوکالری (kcal)": 4184,
                "وات ساعت (Wh)": 3600,
                "الکترون ولت (eV)": 1.60218e-19,
            },
            // Base: Kelvin (K) - غیر خطی
            "دما": {
                // toBase: مقدار ورودی به کلوین, fromBase: کلوین به واحد مقصد
                "سلسیوس (°C)": { toBase: v => v + 273.15, fromBase: v => v - 273.15 },
                "فارنهایت (°F)": { toBase: v => (v - 32) * 5 / 9 + 273.15, fromBase: v => (v - 273.15) * 9 / 5 + 32 },
                "کلوین (K)": { toBase: v => v, fromBase: v => v }
            },
            // Base: Radian (rad)
            "زاویه": {
                "رادیان (rad)": 1,
                "درجه (deg)": Math.PI / 180,
                "گراد (grad)": Math.PI / 200,
            },
            // Base: Meter/Second (متر بر ثانیه)
            "سرعت": {
                "متر بر ثانیه (m/s)": 1,
                "کیلومتر بر ساعت (km/h)": 1 / 3.6,
                "مایل بر ساعت (mph)": 0.44704,
                "فوت بر ثانیه (ft/s)": 0.3048,
                "گره (knot)": 0.514444,
            },
            // Base: Byte (B)
            "داده": {
                "بایت (B)": 1,
                "کیلوبایت (KB)": 1024, // 1024^1
                "مگابایت (MB)": 1048576, // 1024^2
                "گیگابایت (GB)": 1073741824, // 1024^3
                "ترابایت (TB)": 1099511627776, // 1024^4
            },
            // Base: Coulomb (C)
            "بار الکتریکی": {
                "کولن (C)": 1,
                "میکروکولن (µC)": 0.000001,
                "آمپر ساعت (Ah)": 3600,
                "الکترون (e)": 1.602176634e-19, // بار بنیادی
            },
            // Base: Tesla (T)
            "میدان مغناطیسی": {
                "تسلا (T)": 1,
                "گاوس (G)": 1e-4,
                "میکروتـسلا (µT)": 1e-6,
                "وبر بر متر مربع (Wb/m²)": 1, // تعریف تسلا
            }
        };

        // المان‌های DOM
        const tabsContainer = document.getElementById('converter-tabs');
        const contentWrapper = document.getElementById('conversion-content-wrapper');
        const errorMessage = document.getElementById('error-message');

        let currentTabId = 'con-length';

        const conversionTemplate = `
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 p-4 md:p-8 rounded-xl">
                
                <!-- تبدیل از واحد (Source) -->
                <div class="space-y-3 p-4 bg-white rounded-lg border border-indigo-200 shadow-md">
                    <label class="block text-sm font-bold text-gray-700">تبدیل از:</label>
                    <!-- Custom Select for Source Unit -->
                    <div class="relative custom-select-container" data-side="source">
                        <button type="button" id="source-unit-trigger" data-unit="" 
                                class="custom-select-trigger w-full flex justify-between items-center border border-indigo-300 rounded-xl p-4 text-xl font-extrabold text-indigo-800 shadow-md hover:bg-indigo-100 transition duration-150 focus:outline-none focus:ring-4 focus:ring-indigo-500 focus:ring-opacity-50"
                                onclick="toggleDropdown(this)">
                            <span id="source-unit-label">انتخاب واحد</span>
                            <!-- Inline SVG Chevron Down Icon -->
                            <svg class="w-6 h-6 text-indigo-600 transition-transform transform rotate-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="source-unit-options" 
                            class="custom-select-options absolute z-20 w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-2xl max-h-60 overflow-y-auto hidden dropdown-open">
                        </div>
                    </div>
                    <input type="number" id="source-value" class="converter-input p-2 w-full text-center text-2xl rounded-lg bg-white focus:ring-indigo-500" placeholder="مقدار را وارد کنید" oninput="convert('source')" dir="ltr">
                </div>

                <!-- تبدیل به واحد (Target) -->
                <div class="space-y-3 p-4 bg-white rounded-lg border border-emerald-200 shadow-md">
                    <label class="block text-sm font-bold text-gray-700">تبدیل به:</label>
                    <!-- Custom Select for Target Unit -->
                    <div class="relative custom-select-container" data-side="target">
                        <button type="button" id="target-unit-trigger" data-unit="" 
                                class="custom-select-trigger w-full flex justify-between items-center border border-emerald-300 rounded-xl p-4 text-xl font-extrabold text-emerald-800 shadow-md hover:bg-emerald-100 transition duration-150 focus:outline-none focus:ring-4 focus:ring-emerald-500 focus:ring-opacity-50"
                                onclick="toggleDropdown(this)">
                            <span id="target-unit-label">انتخاب واحد</span>
                            <!-- Inline SVG Chevron Down Icon -->
                            <svg class="w-6 h-6 text-emerald-600 transition-transform transform rotate-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div id="target-unit-options" 
                            class="custom-select-options absolute z-20 w-full mt-2 bg-white border border-gray-200 rounded-xl shadow-2xl max-h-60 overflow-y-auto hidden dropdown-open">
                        </div>
                    </div>
                    <input type="number" id="target-value" class="converter-input w-full p-2 text-center text-2xl rounded-lg bg-white text-emerald-700 font-extrabold focus:ring-emerald-700" placeholder="نتیجه تبدیل" readonly dir="rtl">
                </div>
            </div>
            <div class="mt-2 text-center text-xs text-gray-500 p-2">
                با وارد کردن عدد در هر یک از کادرها، تبدیل معکوس به صورت خودکار انجام می‌شود.
            </div>
        `;

        function toggleDropdown(triggerElement) {
            const optionsList = triggerElement.nextElementSibling;
            const chevron = triggerElement.querySelector('svg');
            
            // بستن تمام لیست‌های باز به جز لیست فعلی
            document.querySelectorAll('.custom-select-options').forEach(list => {
                if (list !== optionsList) {
                    list.classList.add('hidden');
                    list.previousElementSibling.querySelector('svg').classList.remove('rotate-180');
                }
            });

            // باز و بسته کردن لیست فعلی
            optionsList.classList.toggle('hidden');
            chevron.classList.toggle('rotate-180');
        }

        /**
         * انتخاب واحد از لیست گزینه‌ها
         * @param {HTMLElement} optionElement گزینه‌ای که کلیک شده است
         */
        function selectUnit(optionElement) {
            const selectedUnit = optionElement.getAttribute('data-unit');
            const side = optionElement.closest('.custom-select-container').getAttribute('data-side');
            
            const trigger = document.querySelector(`#${currentTabId} #${side}-unit-trigger`);
            const label = document.querySelector(`#${currentTabId} #${side}-unit-label`);
            const optionsList = optionElement.closest('.custom-select-options');
            
            // به‌روزرسانی مقدار دکمه و لیبل
            trigger.setAttribute('data-unit', selectedUnit);
            label.textContent = selectedUnit;

            // به‌روزرسانی کلاس‌ها
            optionsList.querySelectorAll('.custom-option').forEach(opt => opt.classList.remove('selected'));
            optionElement.classList.add('selected');

            // بستن لیست
            optionsList.classList.add('hidden');
            trigger.querySelector('svg').classList.remove('rotate-180');

            // انجام تبدیل
            if (side === 'source') {
                convert('source');
            } else {
                convert('target'); // تبدیل معکوس برای به‌روزرسانی مقدار سورس
            }
        }
        
        // بستن دراپ‌داون‌ها هنگام کلیک در خارج از آن‌ها
        document.addEventListener('click', (event) => {
            const isSelect = event.target.closest('.custom-select-container');
            if (!isSelect) {
                document.querySelectorAll('.custom-select-options').forEach(list => {
                    list.classList.add('hidden');
                    list.previousElementSibling.querySelector('svg').classList.remove('rotate-180');
                });
            }
        });

        function switchTab(tabId, quantityKey) {
            currentTabId = tabId;
            
            // 1. به روز رسانی استایل تب‌ها
            document.querySelectorAll('.converter-tab-btn').forEach(btn => {
                btn.classList.remove('tab-active', 'text-green-600', 'border-green-600');
                btn.classList.add('text-gray-500', 'border-transparent');
                
                if (btn.getAttribute('data-target') === tabId) {
                    btn.classList.add('tab-active', 'text-green-600', 'border-green-600');
                    btn.classList.remove('text-gray-500', 'border-transparent');
                }
            });

            // 2. نمایش محتوای تب فعال و پنهان کردن بقیه
            document.querySelectorAll('.con-tab-content').forEach(content => {
                content.classList.add('hidden');
                if (content.id === tabId) {
                    content.classList.remove('hidden');
                    // اگر محتوای تب خالی است، الگو را اضافه کنید.
                    if (content.innerHTML === '') {
                        content.innerHTML = conversionTemplate;
                    }
                }
            });

            // 3. پر کردن لیست‌های انتخابی واحدها
            populateUnitSelects(quantityKey, tabId);

            // 4. اطمینان از پاک شدن و انجام تبدیل اولیه (0 به 0)
            const sourceValueInput = document.querySelector(`#${tabId} #source-value`);
            const targetValueInput = document.querySelector(`#${tabId} #target-value`);

            if (sourceValueInput) sourceValueInput.value = '';
            if (targetValueInput) targetValueInput.value = '';
            
            errorMessage.classList.add('hidden');
            convert('source');
        }

        function populateUnitSelects(quantityKey, tabId) {
            const units = Object.keys(unitData[quantityKey]);
            const sourceOptionsDiv = document.querySelector(`#${tabId} #source-unit-options`);
            const targetOptionsDiv = document.querySelector(`#${tabId} #target-unit-options`);
            
            const sourceTrigger = document.querySelector(`#${tabId} #source-unit-trigger`);
            const targetTrigger = document.querySelector(`#${tabId} #target-unit-trigger`);

            // اگر المان‌ها پیدا نشدند، متوقف شو
            if (!sourceOptionsDiv || !targetOptionsDiv) return;

            // پاک کردن گزینه‌های قبلی
            sourceOptionsDiv.innerHTML = '';
            targetOptionsDiv.innerHTML = '';
            
            units.forEach((unit, index) => {
                const optionHtml = `<div class="custom-option cursor-pointer p-3 border-b border-gray-100 last:border-b-0 text-lg text-gray-700 hover:text-indigo-800 transition duration-100" data-unit="${unit}" onclick="selectUnit(this)">${unit}</div>`;
                sourceOptionsDiv.innerHTML += optionHtml;
                targetOptionsDiv.innerHTML += optionHtml;

                // تنظیم پیش‌فرض هنگام ساخت
                if (index === 0) {
                    sourceTrigger.setAttribute('data-unit', unit);
                    document.querySelector(`#${tabId} #source-unit-label`).textContent = unit;
                }
                if (index === 1) {
                    targetTrigger.setAttribute('data-unit', unit);
                    document.querySelector(`#${tabId} #target-unit-label`).textContent = unit;
                } else if (units.length === 1 && index === 0) {
                    // اگر فقط یک واحد باشد، هر دو را یکی قرار می‌دهد
                    targetTrigger.setAttribute('data-unit', unit);
                    document.querySelector(`#${tabId} #target-unit-label`).textContent = unit;
                }
            });
            
            // کلاس selected را برای واحدهای پیش‌فرض اعمال کنید (بعد از پر شدن)
            sourceOptionsDiv.querySelector(`[data-unit="${sourceTrigger.getAttribute('data-unit')}"]`).classList.add('selected');
            targetOptionsDiv.querySelector(`[data-unit="${targetTrigger.getAttribute('data-unit')}"]`).classList.add('selected');
        }

        function convert(origin) {
            errorMessage.classList.add('hidden');
            
            // یافتن المان‌های مربوط به تب فعال
            const tabId = currentTabId;
            const sourceTrigger = document.querySelector(`#${tabId} #source-unit-trigger`);
            const targetTrigger = document.querySelector(`#${tabId} #target-unit-trigger`);
            const sourceValueInput = document.querySelector(`#${tabId} #source-value`);
            const targetValueInput = document.querySelector(`#${tabId} #target-value`);

            // اگر المان‌ها پیدا نشدند یا مقادیر واحد ست نشده‌اند
            if (!sourceTrigger || !targetTrigger || !sourceTrigger.getAttribute('data-unit')) return;

            let sourceUnit, targetUnit, value;
            
            if (origin === 'source') {
                value = parseFloat(sourceValueInput.value);
                sourceUnit = sourceTrigger.getAttribute('data-unit');
                targetUnit = targetTrigger.getAttribute('data-unit');
            } else { // origin === 'target' (تبدیل معکوس)
                value = parseFloat(targetValueInput.value);
                sourceUnit = targetTrigger.getAttribute('data-unit');
                targetUnit = sourceTrigger.getAttribute('data-unit');
            }

            // اگر ورودی عدد نیست، خروجی را پاک کنید و در صورت نیاز پیغام خطا دهید
            if (isNaN(value)) {
                if (sourceValueInput.value !== '' || targetValueInput.value !== '') {
                     errorMessage.classList.remove('hidden');
                }
                if (origin === 'source') {
                    targetValueInput.value = '';
                } else {
                    sourceValueInput.value = '';
                }
                return;
            }
            
            let targetValue;
            const quantityKey = document.querySelector(`[data-target="${tabId}"]`).getAttribute('data-quantity-key');
            const units = unitData[quantityKey];

            try {
                if (quantityKey === "دما") {
                    // تبدیل دمای غیرخطی (از واحد مبدأ به کلوین، سپس از کلوین به واحد مقصد)
                    const sourceConversion = units[sourceUnit];
                    const targetConversion = units[targetUnit];

                    const valueInBase = sourceConversion.toBase(value);
                    targetValue = targetConversion.fromBase(valueInBase);

                } else {
                    // تبدیل خطی (ضربی)
                    const sourceFactor = units[sourceUnit];
                    const targetFactor = units[targetUnit];

                    const valueInBase = value * sourceFactor;
                    targetValue = valueInBase / targetFactor;
                }

                // نمایش نتیجه با حداکثر ۱۲ رقم دقت و حذف صفرهای انتهایی
                // toPrecision(12) دقت را حفظ می‌کند، سپس parseFloat تبدیل به عدد می‌کند و صفرهای اضافی را حذف می‌کند.
                const displayValue = parseFloat(targetValue.toPrecision(12));
                
                if (origin === 'source') {
                    targetValueInput.value = displayValue.toLocaleString('en-US', {useGrouping: false});
                } else {
                    sourceValueInput.value = displayValue.toLocaleString('en-US', {useGrouping: false});
                }

            } catch (error) {
                console.error("خطا در محاسبه تبدیل:", error);
                if (origin === 'source') {
                    targetValueInput.value = 'خطای محاسبه';
                } else {
                    sourceValueInput.value = 'خطای محاسبه';
                }
            }
        }

        /**
         * مقداردهی اولیه برنامه
         */
        function initializeConverter() {
            // اضافه کردن شنونده رویداد به دکمه‌های تب
            const tabButtons = document.querySelectorAll('.converter-tab-btn');
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.getAttribute('data-target');
                    const quantityKey = button.getAttribute('data-quantity-key');
                    switchTab(tabId, quantityKey);
                });
            });

            // فعال کردن تب اول به صورت پیش‌فرض (طول)
            const firstTab = tabButtons[0];
            const initialTabId = firstTab.getAttribute('data-target');
            const initialQuantityKey = firstTab.getAttribute('data-quantity-key');
            
            // تنظیم کلاس فعال برای اولین تب قبل از switchTab
            firstTab.classList.add('tab-active', 'text-green-600', 'border-green-600');
            firstTab.classList.remove('text-gray-500', 'border-transparent');
            
            switchTab(initialTabId, initialQuantityKey);
        }

        // --- Smart Unit Converter ---
        async function convertWithAI() {
            const inputEl = document.getElementById('converter-input');
            const outputEl = document.getElementById('converter-output');
            const loadingEl = document.getElementById('converter-loading');
            const userQuery = inputEl.value;

            if (!userQuery.trim()) {
                showMessageBox('ورودی خالی', 'لطفاً درخواست تبدیل خود را وارد کنید.');
                return;
            }

            loadingEl.classList.remove('hidden');
            outputEl.classList.add('hidden');

            const apiKey = "AIzaSyBXTG5jmQFKIJAGCpaivN3zl9ywMupCFOA";
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            
            const systemPrompt = "شما یک مبدل واحد هوشمند به نام KamiAI هستید (مخفف Kamyar's Advanced Mindful Innovative Artificial Intelligence به معنی هوش مصنوعی پیشرفته، هوشیار و نوآورانه کامیار). کاربر درخواست زبان طبیعی را به زبان فارسی ارائه خواهد کرد. درخواست را تجزیه کنید، تبدیل را انجام دهید و *ابتدل* نتیجه نهایی را با واحد آن در یک خط اول برگردانید، و سپس در خطوط دیگر می توانید توضیحات یا چیز دیگری بدهید. مختصر باشد. به جای استفاده از  و اینها، به صورت نماد علمی و با فرمت LaTeX بنویس. شما در یک برنامه تخصصی تحت عنوان «✨کمک‌یار آموزشی» استفاده می‌شوید که شامل 8 بخش است: 🤖پاسخ مسئله با هوش مصنوعی (که قابلیت هایی چون پخش صدا، درک تصاویر، توضیح مفاهیم، حل و توضیح گام به گام مسائل پیچیده، خواندن فرمول ها و روابط ریاضی و نمایش آنها به نحو احسن، رسم جداول با فرمت بندی زیبا را دارا می‌باشد)، 🧮 ماشین حساب (که از دو بخش استاندارد و پیشرفته تشکیل شده است؛ ماشین حساب استاندارد همانند تمامی ماشین حساب های رایج و معمولی عملیات جمع و تفریق و ضرب و تقسیم را انجام می‌دهد و ماشین حساب پیشرفته (که اونجا هم مجهز به توئه و تو اونجا رو کنترل میکنی) میتواند از کاربر ورودی های ریاضی و یا تصویری بگیرد و بفهمد و مسائلش را حل و توصیف کند، مثلا میتواند انتگرال ها و مشتق ها و حد ها و توابع مثلثاتی و عملیات پیشرفته تری را از کاربر به صورت ریاضی (LaTeX) بگیرد و با فرمت بندی LaTeX به زیبایی پاسخ مسائل را نمایش دهد و گام به گام توضیح دهد و رسم نمودار توابع ساده و پیچیده را با دریافت ضابطۀ تابع انجم دهد.)، 📏 تبدیل واحد (که تبدیل واحدهای رایج رو به صورت زیبا و کامپیوتری و آنی محاسبه میکنه با شکل و شمایل زیبا و بصری؛ تبدیل واحد های طول و مساحت و حجم، جرم و انرژی، زمان، دما، زاویه، سرعت و بار الکتریکی و میدان مغناطیسی، داده. البته اگه تبدیل واحد مد نظر کاربر توی برنامه نبود، یه بخش پایینش هست به اسم «✨ مبدل واحد هوشمند» که اونم مجهز به توئه و دست توئه  و تو الان اونجایی! و با کمک هوش مصنوعی KamiAI، به هر تبدیل واحدی دقیق و درست و زیبا جواب میده)، 📐 ریاضیات (این بخش هم 10 قسمت داره: عدد اول است یا نه؟ (که بررسی میکنه عدد اوله یا نه و اگه مرکب بود تجزیه‌اش به عوامل اول رو میاره)، قضیۀ فیثاغورس (با گرفتن دو ضلع مثلث قائم‌الزاویه ضلع مجهول رو حساب میکنه)، محیط و مساحت و حجم اشکال، رسم نمودار تابع (به صورت آنی و دقیق و زیبا و دامنۀ شخصی سازی شدۀ کاربر؛ دارای سه تب رسم نمودار توابع ساده (تک‌ضابطه‌ای)، رسم نمودار توابع چندضابطه‌ای، مقایسه توابع (رسم نمودار همزمان [حداکثر] پنج تابع با ضابطه))، رسم نمودار ون (با گرفتن عبارت مجموعه، به صورت آنی و دقیق و زیبا و بصری، ناحیۀ مورد نظر رو هاشور میزنه)، بخش‌پذیری دو عدد، شمارنده‌ها (با گرفتن عددی طبیعی از کاربر، به صورت آنی تحلیل شمارنده انجام میده؛ یعنی یه جدول میکشه با سطرهای تجزیه به عوامل اول، [لیست] شمارنده‌ها، تعداد شمارنده‌ها[ی طبیعی]، شمارنده‌های اول، تعداد شمارنده‌های اول، شمارنده‌های مرکب، تعداد شمارنده‌های مرکب، تعداد شمارنده‌های زوج، تعداد شمارنده‌های فرد، تعداد شمارنده‌های صحیح.)، دنباله‌ها (دارای چند تب برای نوع دنباله، یک لیست کشویی زیبا و جالب برای نوع عملیات (یافتن جمله n-ام، جمع دنباله) که وقتی زد فرمول مربوطه به صورت LaTeX نمایش داده میشه، چند کادر ورودی برای گرفتن مقادیر لازم برای محاسبۀ عملیات))، ⚛️ فیزیک، 🧪 شیمی، 🧬 زیست، 🌍 زمین‌شناسی، 🔭 نجوم، 📜 ادبیات فارسی ✍️، 🇬🇧 زبان انگلیسی ✍️، 🇸🇦 زبان عربی ✍️، 🔬 آزمایشات (این بخش آزمایشات Phet را به صورت شخصی سازی شده و دسته بندی شده در اختیار کاربران قرار داده است تا مفاهیم درسی و علمی را با انیمیشن و بازی یاد بگیرند.)، 🎮 بازی‌ها (همچنین بازی هایی در این وب اپلیکیشن وجود دارد که کاربر می تواند به صورت آنلاین بازی کرده و لذت ببرد.). اینهارا گفتم که با محیط برنامه آشنا شوی و بتوانی در صورت ناتوانی در پاسخ‌دهی بهینه، به بخش هایی که توانایی پاسخ‌دهی بهتر در آن حوزه دارند کاربر را ارجاع و ارشاد و راهنمایی کنی و تو نقش راهنمای کاربر در این وب‌اپلیکیشن کاربردی-علمیِ چندمنظوره داری. تا کاربر ازت نخواسته انگلیسی یا عربی یا هر زبان دیگه ای حرف بزنی، به فارسی حرف می زنی.";
            
            const payload = {
                contents: [{ parts: [{ text: userQuery }] }],
                systemInstruction: { parts: [{ text: systemPrompt }] }
            };

            try {
                const response = await fetchWithRetry(apiUrl, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
                if (!response.ok) { const errorData = await response.json(); throw new Error(errorData.error?.message || `HTTP error! status: ${response.status}`); }
                const result = await response.json();
                const candidate = result.candidates?.[0];

                if (candidate && candidate.content?.parts?.[0]?.text) {
                    let rawText = candidate.content.parts[0].text;
                    rawText = rawText.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
                    const lines = rawText.split('\n');
                    const firstLine = lines.shift() || "";
                    const remainingText = lines.join('\n').replace(/\n/g, '<br>');
                    const styledOutput = `

        		<div class="text-xl text-black-700 text-center mb-1">

            			${firstLine}

        		</div>

        		<div class="kamiAdvnc-output text-black-700">

            			${remainingText}

        		</div>

		    `;
                    outputEl.innerHTML = styledOutput;
                    outputEl.classList.remove('hidden');
                } else {
                    throw new Error('پاسخ معتبری دریافت نشد.');
                }
            } catch (error) {
                console.error('Converter AI Error:', error);
                showMessageBox('خطای تبدیل', `متاسفانه خطایی رخ داد: ${error.message}`);
            } finally {
                loadingEl.classList.add('hidden');
            }
            if (window.renderMathInElement) { renderMathInElement(outputEl, { delimiters: [{left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}] }); }
        }

        document.getElementById('converter-input').addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                convertWithAI();
            }
        });

        // --- Math Tools Logic ---
        function showMathTool(toolId, title) {
            document.getElementById('math-tool-buttons').classList.add('hidden'); // Hide button grid
            document.querySelectorAll('.math-tool').forEach(tool => {
        // حذف کلاس 'hidden' و کلاس انیمیشن از همه ابزارها 
        // تا فقط ابزار انتخابی نمایش داده شود (در صورت وجود منطق پیچیده‌تر)
        tool.classList.add('hidden');
        tool.classList.remove('fadeIn-active');
    });
            const tool = document.getElementById(toolId);
            if(tool) {
                tool.classList.remove('hidden');
                tool.classList.add('fadeIn-active');
                // Re-render KaTeX in case the new tool has static formulas
                if (window.renderMathInElement) {
                    renderMathInElement(tool);
                }
            }
            pageTitle.textContent = title;
        }

        const input = document.getElementById('prime-input');
        const resultEl = document.getElementById('prime-result');
        // اجرای checkPrime با Enter
        input.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                checkPrime();
            }
        });

	  function checkPrime() {
	    const num = parseInt(input.value);

	    if (isNaN(num) || num < 1) {
	      resultEl.textContent = 'لطفا یک عدد طبیعی وارد کنید.';
	      resultEl.style.color = 'red';
	      return;
	    }
	
	    if (num === 1) {
	      resultEl.textContent = `عدد ${num} نه اول است و نه مرکب.`;
	      resultEl.style.color = 'black';
	      return;
	    }

	    // بررسی اول بودن و همزمان آماده‌سازی برای تجزیه
	    let isPrime = true;
	    for (let i = 2, s = Math.sqrt(num); i <= s; i++) {
	      if (num % i === 0) {
	        isPrime = false;
	        break;
	      }
	    }

	    if (isPrime) {
	      resultEl.textContent = `${num} عددی اول است.`;
	      resultEl.style.color = 'green';
	    } else {
	      const factors = primeFactorization(num);
	      const latex = `\\(${num} ${formatFactors(factors)}\\)`;
	      resultEl.innerHTML = `${num} عددی مرکب است.<br>${latex}`;
	      resultEl.style.color = 'orange';
	      // رندر KaTeX برای فرمول لاتکسی
	      renderMathInElement(resultEl, {
	        delimiters: [
	          { left: "\\(", right: "\\)", display: false },
	          { left: "\\[", right: "\\]", display: true }
	        ]
	      });

	    }
	  }

	  // تابع تجزیه به عوامل اول
	  function primeFactorization(n) {
	    const factors = {};
	    let d = 2;
	    while (n > 1) {
	      while (n % d === 0) {
	        factors[d] = (factors[d] || 0) + 1;
	        n /= d;
      }
	      d++;
    }
	    return factors;
	  }

	  // فرمت نمایش توان‌دار (مثل 24 = 2³×3)
	  function formatFactors(factors) {
	    const parts = [];
	    for (const [prime, power] of Object.entries(factors)) {
	      parts.push(power > 1 ? `${prime}^{${power}}` : `${prime}`);
	    }
	    return `= ${parts.join(' \\times ')}`;
	  }

        
        function calculatePythagorean() {
            const a = parseFloat(document.getElementById('pythagorean-a').value);
            const b = parseFloat(document.getElementById('pythagorean-b').value);
            const c = parseFloat(document.getElementById('pythagorean-c').value);
            const resultEl = document.getElementById('pythagorean-result');
            
            try {
                let resultText = '';
		if ((!isNaN(a) && a <= 0) || (!isNaN(b) && b <= 0) || (!isNaN(c) && c <= 0)) {

	             throw new Error("مقادیر ضلع‌ها باید مثبت باشند؛ زیرا این مقادیر تشکیل یک مثلث نمی‌دهند.");
	
        }
                if (!isNaN(a) && !isNaN(b) && isNaN(c)) {
		     if (Math.sqrt(a*a + b*b) >= (a + b) || (Math.sqrt(a*a + b*b) == a || Math.sqrt(a*a + b*b) == b)) throw new Error("این مقادیر تشکیل یک مثلث نمی‌دهند (قانون نابرابری مثلث نقض شد).");
                    resultText = `$$c = \\sqrt{${a*a}+${b*b}} = \\boxed{\\sqrt{${(a*a+b*b)}}} = \\boxed{${Math.sqrt(a*a + b*b)}}$$`;
                } else if (!isNaN(a) && isNaN(b) && !isNaN(c)) {
                     if (c < a) throw new Error("وتر باید بزرگتر از ضلع باشد.");
		     if (Math.sqrt(c*c - a*a) >= (a + c) || (Math.sqrt(c*c - a*a) == 0) || (Math.sqrt(c*c - a*a) == a || Math.sqrt(c*c - a*a) == c)) throw new Error("این مقادیر تشکیل یک مثلث نمی‌دهند (قانون نابرابری مثلث نقض شد).");
                    resultText = `$$b = \\sqrt{${c*c}-${a*a}} = \\boxed{\\sqrt{${(c*c-a*a)}}} = \\boxed{${Math.sqrt(c*c - a*a)}}$$`;
                } else if (isNaN(a) && !isNaN(b) && !isNaN(c)) {
                     if (c < b) throw new Error("وتر باید بزرگتر از ضلع باشد.");
		     if (Math.sqrt(c*c - b*b) >= (b + c) || (Math.sqrt(c*c - b*b) == 0) || (Math.sqrt(c*c - b*b) == b || Math.sqrt(c*c - b*b) == c)) throw new Error("این مقادیر تشکیل یک مثلث نمی‌دهند (قانون نابرابری مثلث نقض شد).");
                    resultText = `$$a = \\sqrt{${c*c}-${b*b}} = \\boxed{\\sqrt{${(c*c-b*b)}}} = \\boxed{${Math.sqrt(c*c - b*b)}}$$`;
                } else {
                    throw new Error("لطفا دقیقا دو کادر را پر کنید.");
                }

                resultEl.textContent = resultText;
		resultEl.style.color = 'black';
            } catch (error) {
                resultEl.textContent = `خطا: ${error.message}`;
		resultEl.style.color = 'red';
            }
            if (window.renderMathInElement) {
                renderMathInElement(resultEl);
            }
        }

        // --- Perimeter Tools ---
        function showperimeterShape(shapeId) {
            document.getElementById('perimeter-shape-selection').classList.add('hidden');
            const shapeTool = document.getElementById(shapeId);
            shapeTool.classList.remove('hidden');
            if (window.renderMathInElement) { renderMathInElement(shapeTool); }
        }

        function calculatePerimeter(shape) {
            let resultEl, P = 0, resultText = '';
            try {

                if (shape === 'square') {
                    const side = parseFloat(document.getElementById('perimeter-square-side').value);
                    if (isNaN(side) || side <= 0) throw new Error("ضلع معتبر وارد کنید.");
                    P = 4 * side;
                    resultEl = document.getElementById('perimeter-square-result');
                } else if (shape === 'circle') {
                    const radius = parseFloat(document.getElementById('perimeter-circle-radius').value);
                    if (isNaN(radius) || radius <= 0) throw new Error("شعاع معتبر وارد کنید.");
                    P = 2 * Math.PI * radius;
                    resultEl = document.getElementById('perimeter-circle-result');
                } else if (shape === 'triangle') {
                    const a = parseFloat(document.getElementById('perimeter-triangle-a').value);
                    const b = parseFloat(document.getElementById('perimeter-triangle-b').value);
                    const c = parseFloat(document.getElementById('perimeter-triangle-c').value);
                    if (isNaN(a) || isNaN(b) || isNaN(c) || a <= 0 || b <= 0 || c <= 0) throw new Error("اضلاع معتبر وارد کنید.");
                    P = a + b + c;
                    resultEl = document.getElementById('perimeter-triangle-result');
                } else if (shape === 'rectangle') {
                    const a = parseFloat(document.getElementById('perimeter-rectangle-length').value);
                    const b = parseFloat(document.getElementById('perimeter-rectangle-width').value);
                    if (isNaN(a) || isNaN(b) || a <= 0 || b <= 0) throw new Error("طول و عرض معتبر وارد کنید.");
                    P = (a + b) * 2;
                    resultEl = document.getElementById('perimeter-rectangle-result');
                }
                resultText = `$$P =${P}$$`;
                resultEl.textContent = resultText;
                resultEl.className = 'mt-4 text-2xl text-center font-bold text-green-600';
		if (window.renderMathInElement) {
			renderMathInElement(resultEl);
            	}

            } catch (error) {
                if(result) {
                    resultEl.textContent = `خطا: ${error.message}`;
                    resultEl.className = 'mt-4 font-bold text-2xl text-center text-red-600';
                }
            }
        }

        document.getElementById('perimeter-square-side').addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                calculatePerimeter('square');
            }
        });

        document.getElementById('perimeter-circle-radius').addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                calculatePerimeter('circle');
            }
        });

        document.getElementById('perimeter-triangle-c').addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                calculatePerimeter('triangle');
            }
        });

        document.getElementById('perimeter-rectangle-width').addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                calculatePerimeter('rectangle');
            }
        });

        // --- Area Tools ---
        function showAreaShape(shapeId) {
            document.getElementById('area-shape-selection').classList.add('hidden');
            const shapeTool = document.getElementById(shapeId);
            shapeTool.classList.remove('hidden');
            if (window.renderMathInElement) { renderMathInElement(shapeTool); }
        }

        function calculateArea(shape) {
            let resultEl, result = 0, resultText = '';
            try {

                if (shape === 'square') {
                    const side = parseFloat(document.getElementById('area-square-side').value);
                    if (isNaN(side) || side <= 0) throw new Error("ضلع معتبر وارد کنید.");
                    result = side * side;
                    resultEl = document.getElementById('area-square-result');
                } else if (shape === 'circle') {
                    const radius = parseFloat(document.getElementById('area-circle-radius').value);
                    if (isNaN(radius) || radius <= 0) throw new Error("شعاع معتبر وارد کنید.");
                    result = Math.PI * (radius ** 2);
                    resultEl = document.getElementById('area-circle-result');
                } else if (shape === 'triangle') {
                    const base = parseFloat(document.getElementById('area-triangle-base').value);
                    const height = parseFloat(document.getElementById('area-triangle-height').value);
                    if (isNaN(base) || isNaN(height) || base <= 0 || height <= 0) throw new Error("قاعده و ارتفاع معتبر وارد کنید.");
                    result = 0.5 * base * height;
                    resultEl = document.getElementById('area-triangle-result');
                } else if (shape === 'rectangle') {
                    const a = parseFloat(document.getElementById('area-rectangle-length').value);
                    const b = parseFloat(document.getElementById('area-rectangle-width').value);
                    if (isNaN(a) || isNaN(b) || a <= 0 || b <= 0) throw new Error("طول و عرض معتبر وارد کنید.");
                    result = a * b;
                    resultEl = document.getElementById('area-rectangle-result');
                }
                resultText = `$$A =${result}$$`;
                resultEl.textContent = resultText;
                resultEl.className = 'mt-4 text-2xl text-center font-bold text-green-600';
		if (window.renderMathInElement) {
			renderMathInElement(resultEl);
            	}

            } catch (error) {
                if(result) {
                    resultEl.textContent = `خطا: ${error.message}`;
                    resultEl.className = 'mt-4 font-bold text-2xl text-center text-red-600';
                }
            }
        }

        document.getElementById('area-square-side').addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                calculateArea('square');
            }
        });

        document.getElementById('area-circle-radius').addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                calculateArea('circle');
            }
        });

        document.getElementById('area-triangle-height').addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                calculateArea('triangle');
            }
        });

        document.getElementById('area-rectangle-width').addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                calculateArea('rectangle');
            }
        });

        // Plotter
        document.getElementById('plot-tabs').addEventListener('click', (e) => {
            if (e.target.classList.contains('plot-tab-btn')) {
                document.querySelectorAll('.plot-tab-btn').forEach(btn => {
                    btn.classList.remove('text-green-600', 'border-green-600');
                    btn.classList.add('text-gray-500', 'border-transparent', 'hover:text-gray-700', 'hover:border-gray-300');
                });
                e.target.classList.add('text-green-600', 'border-green-600');
                e.target.classList.remove('text-gray-500', 'border-transparent', 'hover:text-gray-700', 'hover:border-gray-300');
                
                document.querySelectorAll('.plot-tab-content').forEach(content => content.classList.add('hidden'));
                document.getElementById(e.target.dataset.target).classList.remove('hidden');
            }
        });

        const inputEl = document.getElementById('math-plot-input');
        inputEl.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                plotMathFunction();
            }
        });

	const plotColors = ['#15803d', '#2563eb', '#dc2626', '#f97316', '#7c3aed']; // Green, Blue, Red, Orange, Purple
	const plotColor = ['green', 'blue', 'red', 'orange', 'purple'];

        let pieceWiseFormulaCounter = 3;

        function showPlotterHelp() {
            const helpText = "از نمادهای استاندارد جاوا اسکریپت استفاده کنید:\n" +
                "ضرب: * (مثال: 2*x)\n" +
                "تقسیم: / (مثال: x/2)\n" +
                "توان: ضرب به تعداد توان (مثال: x²=x*x یا x³=x*x*x) یا از pow(b, e) استفاده کنید که به جای b پایه و به جای e توان را قرار دهید. برای توابع نمایی با پایۀ e (عدد اویلر) از exp(e) که e توان است.\n" +
                "رادیکال با فرجۀ 2: sqrt(x)\n" +
                "رادیکال با فرجۀ 3: cbrt(x)\n" +
                "قدرمطلق: abs(x)\n" +
                "مثلثاتی: sin(x), cos(x), tan(x) و ...\n" +
                "وارون مثلثاتی: asin(x), acos(x), atan(x) و ...\n" +
                "مثلثاتی هذلولی: sinh(x), cosh(x), tanh(x) و ...\n" +
                "لگاریتم: log(x, b) (که b پایه یا مبنا است), log(x) (پایه 10), log(x, 2) (پایه 2) و برای لگاریتم طبیعی (ln(x)) از log(x, exp).\n" +
                "ثابت‌ها: π=pi, e=exp(1)";
            showMessageBox('راهنمای رسم نمودار', helpText);
        }

	function getPlotDimensions(targetId) {
            const targetElement = document.getElementById(targetId);
            
const rect = targetElement.getBoundingClientRect();
            
const plotWidth = rect.width;
            
const plotHeight = rect.height > 0 ? rect.height : 400; // خواندن ارتفاع یا پیش فرض 400
            return { plotWidth, plotHeight };
	}

	function processFnString(fn) {
            return fn.replace(/\^/g, '**').replace(/pi/gi, 'PI');
	}

	function getDomain(minId, maxId) {
            const ixMin = document.getElementById(minId).value;
            const ixMax = document.getElementById(maxId).value;
            let xMin = -6;
            let xMax = 6;
            if (ixMin !== '' && ixMax !== '') {
                xMin = parseFloat(ixMin);
                xMax = parseFloat(ixMax);
            }
            return [xMin, xMax];
	}

        function plotMathFunction() {
            const target = '#math-plot-target';
            let fn = inputEl.value;

            document.getElementById('math-plot-target').innerHTML = ''; // Clear previous plot

            const targetElement = document.getElementById('math-plot-target');
            
const rect = targetElement.getBoundingClientRect();
            
const plotWidth = rect.width;
            
const plotHeight = rect.height > 0 ? rect.height : 400; // خواندن ارتفاع یا پیش فرض 400

            if (!fn) {
                showMessageBox('خطا', 'لطفا ضابطه تابع را وارد کنید.');
                return;
            }
            
            try {
                // Process string for function-plot
                let fnString = fn.replace(/\^/g, '**').replace(/pi/gi, 'PI');

		const ixMin = document.getElementById('math-plot-xMin').value;

	        const ixMax = document.getElementById('math-plot-xMax').value;

		let xMin = -6;
	
        let xMax = 6;
	        if (ixMin !== '' && ixMax !== '') {
	
            xMin = ixMin;
	            xMax = ixMax;
	
        }

                functionPlot({
                    target: target,
                    width: plotWidth + 28,
                    height: plotHeight,
                    data: [{ fn: fnString, color: '#15803d', graphType: 'polyline' }], // Added color
                    grid: true,
                    tip: { xLine: true, yLine: true },
                    xAxis: { domain: [xMin, xMax], label: 'x' },
                    yAxis: { label: 'y' },
                });
            } catch (err) {
                console.error("Plotting Error:", err);
                showMessageBox('خطای فرمول', 'ضابطه تابع وارد شده معتبر نیست.');
                document.querySelector(target).innerHTML = '';
            }
        }

	function addPiecewiseFormula() {
            const container = document.getElementById('piecewise-formulas-container');
            pieceWiseFormulaCounter++;
            const newFormulaDiv = document.createElement('div');
            newFormulaDiv.className = 'piecewise-formula flex items-center gap-2 border p-3 rounded-lg bg-gray-50';
            newFormulaDiv.setAttribute('data-id', pieceWiseFormulaCounter);
            newFormulaDiv.innerHTML = `
                <span class="font-bold">اگر</span>
                <input type="text" class="piecewise-condition p-2 border focus:outline-none rounded-lg text-left w-1/3" dir="ltr" placeholder="شرط (مثلاً x>2)">
                <span class="font-bold">آنگاه</span>
                <input type="text" class="piecewise-function p-2 border focus:outline-none rounded-lg text-left w-2/3" dir="ltr" placeholder="ضابطه (مثلاً 5-x)">
                <button onclick="removePiecewiseFormula(this)" class="p-2 text-red-500 hover:text-red-700 shrink-0" title="حذف ضابطه">

                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>

                </button>


            `;
            container.appendChild(newFormulaDiv);

            newFormulaDiv.querySelector('.piecewise-condition').addEventListener('input', updatePiecewiseLatex);
            newFormulaDiv.querySelector('.piecewise-function').addEventListener('input', updatePiecewiseLatex);
            updatePiecewiseLatex();
	}

	function removePiecewiseFormula(buttonElement) {
            const formulaDiv = buttonElement.closest('.piecewise-formula');
            if (formulaDiv) {
                formulaDiv.remove();
                updatePiecewiseLatex(); // به روزرسانی لاتک پس از حذف
            }
	}

	function updatePiecewiseLatex() {
            const formulas = document.querySelectorAll('#piecewise-formulas-container .piecewise-formula');
            let latexCode = 'f(x) = \\begin{cases}';
            formulas.forEach((formula, index) => {
                const condition = formula.querySelector('.piecewise-condition').value.trim();
                const fn = formula.querySelector('.piecewise-function').value.trim();
                const latexFn = fn
                    .replace(/\*/g, '\\cdot ')
                const latexCond = condition.replace(/<|<=|>=|>/g, (match) => {
                    if (match === '<=') return '\\le';
                    if (match === '>=') return '\\ge';
                    return match;
                });
                if (fn && condition) {
                    latexCode += ` ${latexFn} & \\text{if } ${latexCond} \\\\`;
                } else if (fn) {
                    latexCode += ` ${latexFn} & \\text{otherwise} \\\\`;
                }
            });
            latexCode += '\\end{cases}';

            const latexTarget = document.getElementById('math-piecewise-latex');
            try {
                if (typeof katex !== 'undefined' && formulas.length > 0) {
                    katex.render(latexCode, latexTarget, { displayMode: true, throwOnError: false });
                } else if (formulas.length === 0) {
                    latexTarget.innerHTML = '<span class="text-gray-500">پیش‌نمایش ضوابط تابع</span>';
                } else {
                    latexTarget.textContent = latexCode;
                }
            } catch (e) {
                latexTarget.textContent = 'خطا در رندر لاتکس';
                console.error("Katex error:", e);
            }            
	}

	function plotPiecewiseFunction() {
            const { plotWidth, plotHeight } = getPlotDimensions('math-piecewise-target');
            const [xMinGlobal, xMaxGlobal] = getDomain('piecewise-xMin', 'piecewise-xMax');
            const formulas = document.querySelectorAll('#piecewise-formulas-container .piecewise-formula');

            let plotData = [];

            document.getElementById('math-piecewise-target').innerHTML = ''; // Clear previous plot

            formulas.forEach(formula => {
                const condition = formula.querySelector('.piecewise-condition').value.trim();
                const fn = formula.querySelector('.piecewise-function').value.trim();
                if (fn) {
                    let range = conditionToRange(condition, xMinGlobal, xMaxGlobal);
                    if (!condition) {
                    	range = [xMinGlobal, xMaxGlobal];
                    }
                    if (range[0] < range[1]) {
                    	plotData.push({
                    		fn: processFnString(fn),
                    		range: range,
                    		graphType: 'polyline',
                    		color: '#059669',
                    	});
                    } else if (condition) {
                    	showMessageBox('خطا در شرط', `شرط ${condition} برای تابع ${fn} نامعتبر یا خالی است.`);
                    	return;
                    }
                }
            });
            if (plotData.length === 0) {
                showMessageBox('خطا', 'لطفا حداقل یک ضابطه معتبر را وارد کنید.');
                return;
            }
            function conditionToRange(cond, xMinGlobal, xMaxGlobal) {
                cond = cond.replace(/\s/g, ''); // حذف فاصله‌ها
                let min = xMinGlobal;
                let max = xMaxGlobal;
                const rangeMatch = cond.match(/^(\d+(\.\d+)?)(<=|<)x(<=|<)(\d+(\.\d+)?)$/i);
                if (rangeMatch) {
                    min = parseFloat(rangeMatch[1]);
                    max = parseFloat(rangeMatch[5]);
                    return [min, max];
                }
                const lessThanMatch = cond.match(/^x(<=|<)(\d+(\.\d+)?)$/i);
                if (lessThanMatch) {
                    max = parseFloat(lessThanMatch[2]);
                    return [xMinGlobal, max];
                }
                const greaterThanMatch = cond.match(/^x(>=|>)(\d+(\.\d+)?)$/i);
                if (greaterThanMatch) {
                    min = parseFloat(greaterThanMatch[2]);
                    return [min, xMaxGlobal];
                }
                const reverseLessThanMatch = cond.match(/^(\d+(\.\d+)?)(<=|<)x$/i);
                if (reverseLessThanMatch) {
                    min = parseFloat(reverseLessThanMatch[1]);
                    return [min, xMaxGlobal];
                }
                return [xMinGlobal, xMaxGlobal];
            }

            try {
                functionPlot({
                    target: '#math-piecewise-target',
                    width: plotWidth + 28,
                    height: plotHeight,
                    data: plotData,
                    grid: true,
                    tip: { xLine: true, yLine: true },
                    xAxis: { domain: [xMinGlobal, xMaxGlobal], label: 'x' },
                    yAxis: { label: 'y' },
                });
            } catch (err) {
                showMessageBox('خطای فرمول', 'خطا در رسم نمودار چندضابطه‌ای. ضابطه‌ها را بررسی کنید.');
            }
	}

	document.addEventListener('DOMContentLoaded', () => {
            const initialPiecewiseInputs = document.querySelectorAll('#piecewise-formulas-container input');
            initialPiecewiseInputs.forEach(input => {
                input.addEventListener('input', updatePiecewiseLatex);
            });
            updatePiecewiseLatex();
	});

	function addComparisonFormula() {
            const container = document.getElementById('comparison-formulas-container');
            const formulas = document.querySelectorAll('#comparison-formulas-container .comp-function');
            const index = formulas.length;
            const color = plotColors[index]; // چرخش رنگ‌ها
            const colors = plotColor[index]; // چرخش رنگ‌ها
            const name = ['f','g','h', 'i', 'j', 'k', 'l'][index];
            const newFormulaDiv = document.createElement('div');

            newFormulaDiv.className = 'comparison-formula flex items-center gap-2';
            newFormulaDiv.dir = 'ltr';
            newFormulaDiv.innerHTML = `
                <input type="text" class="comp-function p-2 border border-${colors}-400 pr-3 focus:outline-none rounded-lg text-left w-full" style="color: ${color}; dir="ltr" placeholder="${name}(x)=">
                <button onclick="removeComparisonFormula(this)" class="p-2 text-red-500 hover:text-red-700 shrink-0" title="حذف تابع">

                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>

                </button>


            `;
            container.appendChild(newFormulaDiv);
            updateComparisonButtonState();
	}

	function updateComparisonButtonState() {
            const formulas = document.querySelectorAll('#comparison-formulas-container .comp-function');
            const button = document.getElementById('plotComparisonButton');

            if (formulas.length >= 5) {
                button.disabled = true;
                button.classList.add('opacity-50', 'cursor-not-allowed');
                button.classList.remove('btn-blue', 'hover:bg-blue-600');
            } else {
                button.disabled = false;
                button.classList.remove('opacity-50', 'cursor-not-allowed');
                button.classList.add('btn-blue');
            }
	}

	function removeComparisonFormula(buttonElement) {
            const formulaDiv = buttonElement.closest('.comparison-formula');
            if (formulaDiv) {
                formulaDiv.remove();
            }
            updateComparisonButtonState();
	}

	function plotComparisonFunctions() {
            const { plotWidth, plotHeight } = getPlotDimensions('math-comparison-target');
            const [xMin, xMax] = getDomain('comparison-xMin', 'comparison-xMax');
            const formulas = document.querySelectorAll('#comparison-formulas-container .comp-function');
            let plotData = [];
            let isValid = true;
            formulas.forEach((input, index) => {
                const fn = input.value.trim();
                if (fn) {
                    plotData.push({
                    	fn: processFnString(fn),
                    	color: plotColors[index % plotColors.length],
                    	graphType: 'polyline',
                    });
                }
            });
            if (plotData.length === 0) {
                showMessageBox('خطا', 'لطفا حداقل یک ضابطه را وارد کنید.');
                return;
            }
            document.getElementById('math-comparison-target').innerHTML = ''; // Clear previous plot
            try {
                functionPlot({
                    target: '#math-comparison-target',
                    width: plotWidth + 28,
                    height: plotHeight,
                    data: plotData,
                    grid: true,
                    tip: { xLine: true, yLine: true },
                    xAxis: { domain: [xMin, xMax], label: 'x' },
                    yAxis: { label: 'y' },
                });
            } catch (err) {
                showMessageBox('خطای فرمول', 'خطا در رسم نمودار توابع مقایسه‌ای.');
            }
	}

	document.addEventListener('DOMContentLoaded', () => {
            const piecewiseInputs = document.querySelectorAll('#piecewise-formulas-container input');
            piecewiseInputs.forEach(input => {
                input.addEventListener('input', updatePiecewiseLatex);
            });
            updatePiecewiseLatex();
	});

        // Divisibility
        function checkDivisibility() {
            const a = parseInt(document.getElementById('div-a').value);
            const b = parseInt(document.getElementById('div-b').value);
            const resultEl = document.getElementById('divisibility-result');
            
            if (isNaN(a) || isNaN(b)) {
                resultEl.textContent = 'لطفا هر دو عدد را وارد کنید.';
                resultEl.style.color = 'red';
                return;
            }
            if (b === 0) {
                resultEl.textContent = 'خطا: تقسیم بر صفر ممکن نیست.';
                resultEl.style.color = 'red';
                return;
            }
            
            if (a % b === 0) {
                resultEl.textContent = `بله، ${a} بر ${b} بخش‌پذیر است. (خارج قسمت: ${a/b})`;
                resultEl.style.color = 'green';
            } else {
                resultEl.textContent = `خیر، ${a} بر ${b} بخش‌پذیر نیست. (باقیمانده: ${a%b})`;
                resultEl.style.color = 'orange';
            }
        }

        // Volume
        function showVolumeShape(shapeId) {
            document.getElementById('volume-shape-selection').classList.add('hidden');
            const shapeTool = document.getElementById(shapeId);
            shapeTool.classList.remove('hidden');
            if (window.renderMathInElement) { renderMathInElement(shapeTool); }
        }
        
        function calculateVolume(shape) {
            let resultEl, volume = 0;
            try {
                if (shape === 'cube') {
                    const side = parseFloat(document.getElementById('volume-cube-side').value);
                    if (isNaN(side) || side <= 0) throw new Error('ضلع معتبر وارد کنید.');
                    volume = side ** 3;
                    resultEl = document.getElementById('volume-cube-result');
                } else if (shape === 'sphere') {
                    const radius = parseFloat(document.getElementById('volume-sphere-radius').value);
                    if (isNaN(radius) || radius <= 0) throw new Error('شعاع معتبر وارد کنید.');
                    volume = (4/3) * Math.PI * (radius ** 3);
                    resultEl = document.getElementById('volume-sphere-result');
                } else if (shape === 'cylinder') {
                    const r = parseFloat(document.getElementById('volume-cylinder-radius').value);
                    const h = parseFloat(document.getElementById('volume-cylinder-height').value);
                    if (isNaN(r) || isNaN(h) || r <= 0 || h <= 0) throw new Error('شعاع و ارتفاع معتبر وارد کنید.');
                    volume = Math.PI * (r ** 2) * h;
                    resultEl = document.getElementById('volume-cylinder-result');
                } else {
                    throw new Error('لطفا یک شکل را انتخاب کنید.');
                }
                resultText = `$$V = ${volume}$$`;
                resultEl.textContent = resultText;
                resultEl.className = 'mt-4 text-2xl text-center font-bold text-green-600';
		if (window.renderMathInElement) {
			renderMathInElement(resultEl);
            	}            } catch (error) {
                if(resultEl) {
                    resultEl.textContent = `خطا: ${error.message}`;
                    resultEl.className = 'mt-4 text-2xl text-center font-bold text-red-600';
                }
            }
        }

        document.getElementById('volume-cube-side').addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                calculateVolume('cube');
            }
        });

        document.getElementById('volume-sphere-radius').addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                calculateVolume('sphere');
            }
        });

        document.getElementById('volume-cylinder-height').addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                calculateVolume('cylinder');
            }
        });

        // Divisors
        function isPrime(num) {
            if (num <= 1) return false;
            for (let i = 2, s = Math.sqrt(num); i <= s; i++)
                if (num % i === 0) return false;
            return true;
        }

        function getPrimeFactorization(num) {
            const factors = {};
            let n = num;
            for (let i = 2; i * i <= n; i++) {
                while (n % i === 0) {
                    factors[i] = (factors[i] || 0) + 1;
                    n /= i;
                }
            }
            if (n > 1) factors[n] = (factors[n] || 0) + 1;
            return factors;
        }
        
        function formatFactorization(factors) {
             return Object.entries(factors)
                .map(([base, exp]) => exp > 1 ? `${base}^{${exp}}` : `${base}`)
                .join(' \\times ');
        }

        function getAllDivisors(num) {
            const divisors = new Set();
            for (let i = 1; i * i <= num; i++) {
                if (num % i === 0) {
                    divisors.add(i);
                    divisors.add(num / i);
                }
            }
            return Array.from(divisors).sort((a, b) => a - b);
        }

        function analyzeDivisors() {
            const num = parseInt(document.getElementById('divisor-input').value);
            const resultsEl = document.getElementById('divisor-results');
            
            if (isNaN(num) || num <= 0) {
                showMessageBox('خطا', 'لطفا یک عدد طبیعی وارد کنید.');
                resultsEl.classList.add('hidden');
                return;
            }
            
            const factors = getPrimeFactorization(num);
            const divisors = getAllDivisors(num);
            const primeDivisors = divisors.filter(d => isPrime(d));
            const compositeDivisors = divisors.filter(d => d > 1 && !isPrime(d));
            const evenDivisors = divisors.filter(d => d % 2 === 0);
            const oddDivisors = divisors.filter(d => d % 2 !== 0);

            document.getElementById('divisor-factorization').textContent = `$${formatFactorization(factors)}$`;
            document.getElementById('divisor-list').textContent = '{'+divisors.join(', ')+'}';
            document.getElementById('divisor-count').textContent = divisors.length;
            document.getElementById('divisor-prime-list').textContent = '{'+primeDivisors.join(', ')+'}';
            document.getElementById('divisor-prime-count').textContent = primeDivisors.length;
            document.getElementById('divisor-composite-list').textContent = '{'+compositeDivisors.join(', ')+'}';
            document.getElementById('divisor-composite-count').textContent = compositeDivisors.length;
            document.getElementById('divisor-even-count').textContent = evenDivisors.length;
            document.getElementById('divisor-odd-count').textContent = oddDivisors.length;
            document.getElementById('divisor-integer-count').textContent = divisors.length * 2;
            
            resultsEl.classList.remove('hidden');
            // Render KaTeX for the factorization
            if (window.renderMathInElement) {
                renderMathInElement(resultsEl, { delimiters: [{left: '$', right: '$', display: false}] });
            }
        }

        document.getElementById('divisor-input').addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                analyzeDivisors();
            }
        });

        // Sequence Tools
        document.getElementById('sequence-type-tabs').addEventListener('click', (e) => {
            if (e.target.classList.contains('seq-type-tab-btn')) {
                document.querySelectorAll('.seq-type-tab-btn').forEach(btn => {
                    btn.classList.remove('text-green-600', 'border-green-600');
                    btn.classList.add('text-gray-500', 'border-transparent', 'hover:text-gray-700', 'hover:border-gray-300');
                });
                e.target.classList.add('text-green-600', 'border-green-600');
                e.target.classList.remove('text-gray-500', 'border-transparent', 'hover:text-gray-700', 'hover:border-gray-300');
                
                document.querySelectorAll('.seq-type-content').forEach(content => content.classList.add('hidden'));
                document.getElementById(e.target.dataset.target).classList.remove('hidden');
            }
        });

	const sequenceFormulas = {
            'arithmetic': {
                'nth': {
                    latex: '$$a_n = a_1 + (n - 1)d$$',
                    inputs: [
                    	{ id: 'seq-arith-a1', placeholder: 'جمله اول (a₁)', type: 'number' },
                    	{ id: 'seq-arith-d', placeholder: 'قدر نسبت (d)', type: 'number' },
                    	{ id: 'seq-arith-n', placeholder: 'تعداد جملات (n)', type: 'number' },
                    ]
                },
                'sum_n': {
                    latex: '$$S_n = \\frac{n}{2}(2a_1 + (n - 1)d)$$',
                    inputs: [
                    	{ id: 'seq-arith-sumn-a1', placeholder: 'جمله اول (a₁)', type: 'number' },
                    	{ id: 'seq-arith-sumn-d', placeholder: 'قدر نسبت (d)', type: 'number' },
                    	{ id: 'seq-arith-sumn-n', placeholder: 'شماره جمله (n)', type: 'number' },
                    ]
                },
                'sum_fl': {
                    latex: '$$S_n = \\frac{n(a_1 + a_n)}{2}$$',
                    inputs: [
                    	{ id: 'seq-arith-sumfl-a1', placeholder: 'جمله اول (a₁)', type: 'number' },
                    	{ id: 'seq-arith-sumfl-an', placeholder: 'جمله آخر (aₙ)', type: 'number' },
                    	{ id: 'seq-arith-sumfl-n', placeholder: 'تعداد جملات (n)', type: 'number' },
                    ]
                }
            },
            'geometric': {
                'nth': {
                    latex: '$$a_n = a_1 r^{n-1}$$',
                    inputs: [
                    	{ id: 'seq-geom-a1', placeholder: 'جمله اول (a₁)', type: 'number' },
                    	{ id: 'seq-geom-r', placeholder: 'قدر نسبت (r)', type: 'number' },
                    	{ id: 'seq-geom-n', placeholder: 'شماره جمله (n)', type: 'number' },
                    ]
                },
                'sum_n': {
                    latex: '$$S_n = a_1 \\frac{1-r^n}{1-r}$$',
                    inputs: [
                    	{ id: 'seq-geom-sumn-a1', placeholder: 'جمله اول (a₁)', type: 'number' },
                    	{ id: 'seq-geom-sumn-r', placeholder: 'قدر نسبت (r)', type: 'number' },
                    	{ id: 'seq-geom-sumn-n', placeholder: 'تعداد جملات (n)', type: 'number' },
                    ]
                },
                'sum_inf': {
                    latex: '$$S_\\infty = \\frac{a_1}{1-r}, |r|<1$$',
                    inputs: [
                    	{ id: 'seq-geom-suminf-a1', placeholder: 'جمله اول (a₁)', type: 'number' },
                    	{ id: 'seq-geom-suminf-r', placeholder: 'قدر نسبت (r), |r|<1', type: 'number' },
                    ]
                }
            }
	}

	function toggleDropdown(triggerElement) {
            document.querySelectorAll('.custom-select-options').forEach(options => {
                if (options.id !== triggerElement.nextElementSibling.id) {
                    options.classList.add('hidden');
                }
            });
            document.querySelectorAll('.custom-select svg').forEach(svg => {
                if (svg.id !== triggerElement.querySelector('svg').id) {
                    svg.classList.remove('rotate-180');
                }
            });
            const optionsDiv = triggerElement.nextElementSibling;
            optionsDiv.classList.toggle('hidden');
            const chevron = triggerElement.querySelector('svg');
            chevron.classList.toggle('rotate-180');
	}

	function selectSequenceOperation(sequenceType, operationValue, operationLabel) {
            const triggerBtn = document.getElementById(`${sequenceType}-operation`);
            const labelSpan = document.getElementById(`${sequenceType}-operation-label`);
            const optionsDiv = document.getElementById(`${sequenceType}-operation-options`);
            const chevron = document.getElementById(`${sequenceType}-chevron`);
            triggerBtn.setAttribute('data-operation', operationValue);
            labelSpan.textContent = operationLabel;
            optionsDiv.classList.add('hidden');
            chevron.classList.remove('rotate-180');
            showSequenceFields(sequenceType, operationValue);
	}

	document.addEventListener('click', (e) => {
            if (!e.target.closest('.custom-select-container')) {
                document.querySelectorAll('.custom-select-options').forEach(options => options.classList.add('hidden'));
                document.querySelectorAll('.custom-select svg').forEach(svg => svg.classList.remove('rotate-180'));
            }
	});

	function showSequenceFields(sequenceType, operation = null) {
            if (!operation) {
                operation = document.getElementById(`${sequenceType}-operation`)?.getAttribute('data-operation');
            }
            const container = document.getElementById(`${sequenceType}-fields-container`);
            const resultEl = document.getElementById(`${sequenceType}-result`);
            container.innerHTML = '';
            resultEl.textContent = '';
            if (!operation || !sequenceFormulas[sequenceType] || !sequenceFormulas[sequenceType][operation]) {
                container.innerHTML = '<p class="text-center text-gray-500">پس از انتخاب عملیات، فرمول و کادرهای ورودی نمایش داده می‌شود.</p>';
                return;
            }
            const { latex, inputs } = sequenceFormulas[sequenceType][operation];
            const latexDiv = document.createElement('p');
            latexDiv.className = 'text-center text-xl font-semibold';
            latexDiv.innerHTML = latex;
            container.appendChild(latexDiv);
            inputs.forEach(input => {
                const inputEl = document.createElement('input');
                inputEl.type = input.type;
                inputEl.id = input.id;
                inputEl.dir = 'ltr';
                inputEl.className = 'p-2 focus:outline-none border text-center rounded-lg w-full';
                inputEl.placeholder = input.placeholder;
                container.appendChild(inputEl);
            });
            if (window.renderMathInElement) {
                window.renderMathInElement(container);
            }
	}

	function calculateSequence(sequenceType) {
            const operation = document.getElementById(`${sequenceType}-operation`)?.getAttribute('data-operation');
            const resultEl = document.getElementById(`${sequenceType}-result`);

            if (sequenceType === 'arithmetic') {
                if (operation === 'nth') return calculateArithmeticNth(resultEl);
                if (operation === 'sum_n') return calculateArithmeticSumNTerms(resultEl);
                if (operation === 'sum_fl') return calculateArithmeticSumFirstLast(resultEl);
            }

            else if (sequenceType === 'geometric') {
                if (operation === 'nth') return calculateGeometricNth(resultEl);
                if (operation === 'sum_n') return calculateGeometricSumNTerms(resultEl);
                if (operation === 'sum_inf') return calculateGeometricSumInfinite(resultEl);
            }

            else if (sequenceType === 'triangular') {
                return calculateTriangular(resultEl);
            }
            else if (sequenceType === 'fibonacci') {
                return calculateFibonacci(resultEl);
            }
            resultEl.textContent = 'لطفاً عملیات مورد نظر را انتخاب کنید.';
            resultEl.className = 'mt-4 text-xl text-center font-bold text-gray-500';
	}

        function calculateArithmeticNth(resultEl) {
            const a1 = parseFloat(document.getElementById('seq-arith-a1')?.value);
            const d = parseFloat(document.getElementById('seq-arith-d')?.value);
            const n = parseFloat(document.getElementById('seq-arith-n')?.value);


            if (isNaN(a1) || isNaN(d) || isNaN(n)) {
                resultEl.textContent = 'خطا: لطفا تمام مقادیر را وارد کنید.';
                resultEl.className = 'mt-2 text-2xl text-center font-bold text-red-600';
                return;
            }
            if (!Number.isInteger(n) || n <= 0) {

                resultEl.textContent = 'خطا: تعداد جملات (n) باید یک عدد طبیعی باشد.';

                resultEl.className = 'mt-2 text-2xl text-center font-bold text-red-600';

                return;

            }

            const an = a1 + (n - 1) * d;
            resultEl.textContent = `جمله ${n}-ام برابر است با: $$a_{${n}}=${an}$$`;
            resultEl.className = 'text-2xl text-center font-bold text-green-600';
	    if (window.renderMathInElement) window.renderMathInElement(resultEl);
        }

        function calculateArithmeticSumFirstLast(resultEl) {
            const a1 = parseFloat(document.getElementById('seq-arith-sumfl-a1')?.value);
            const an = parseFloat(document.getElementById('seq-arith-sumfl-an')?.value);
            const n = parseFloat(document.getElementById('seq-arith-sumfl-n')?.value);


            if (isNaN(a1) || isNaN(an) || isNaN(n)) {
                resultEl.textContent = 'خطا: لطفا تمام مقادیر را وارد کنید.';
                resultEl.className = 'mt-2 text-2xl text-center font-bold text-red-600';
                return;
            }
            if (!Number.isInteger(n) || n <= 0) {

                resultEl.textContent = 'خطا: تعداد جملات (n) باید یک عدد طبیعی باشد.';

                resultEl.className = 'mt-2 text-2xl text-center font-bold text-red-600';

                return;

            }
            const sn = (n / 2) * (a1 + an);
            resultEl.textContent = `مجموع ${n} جمله برابر است با: $$S_{${n}}=${sn}$$`;
            resultEl.className = 'mt-2 text-2xl text-center font-bold text-green-600';
	    if (window.renderMathInElement) window.renderMathInElement(resultEl);
        }

        function calculateArithmeticSumNTerms(resultEl) {
            const a1 = parseFloat(document.getElementById('seq-arith-sumn-a1')?.value);
            const d = parseFloat(document.getElementById('seq-arith-sumn-d')?.value);
            const n = parseFloat(document.getElementById('seq-arith-sumn-n')?.value);


            if (isNaN(a1) || isNaN(d) || isNaN(n)) {
                resultEl.textContent = 'خطا: لطفا تمام مقادیر را وارد کنید.';
                resultEl.className = 'mt-2 text-2xl text-center font-bold text-red-600';
                return;
            }
            if (!Number.isInteger(n) || n <= 0) {

                resultEl.textContent = 'خطا: تعداد جملات (n) باید یک عدد طبیعی باشد.';

                resultEl.className = 'mt-2 text-2xl text-center font-bold text-red-600';

                return;

            }
            const sn = (n / 2) * (2 * a1 + (n - 1) * d);
            resultEl.textContent = `مجموع ${n} جمله برابر است با: $$S_{${n}}=${sn}$$`;
            resultEl.className = 'mt-2 text-2xl text-center font-bold text-green-600';
	    if (window.renderMathInElement) window.renderMathInElement(resultEl);
        }

        function calculateGeometricNth(resultEl) {
            const a1 = parseFloat(document.getElementById('seq-geom-a1')?.value);
            const r = parseFloat(document.getElementById('seq-geom-r')?.value);
            const n = parseFloat(document.getElementById('seq-geom-n')?.value);


            if (isNaN(a1) || isNaN(r) || isNaN(n)) {
                resultEl.textContent = 'خطا: لطفا تمام مقادیر را وارد کنید.';
                resultEl.className = 'mt-2 text-2xl text-center font-bold text-red-600';
                return;
            }
            if (!Number.isInteger(n) || n <= 0) {

                resultEl.textContent = 'خطا: تعداد جملات (n) باید یک عدد طبیعی باشد.';

                resultEl.className = 'mt-2 text-2xl text-center font-bold text-red-600';

                return;

            }
            const an = a1 * Math.pow(r, n - 1);
            resultEl.textContent = `جمله ${n}-ام برابر است با: $$a_{${n}}=${an}$$`;
            resultEl.className = 'mt-2 text-2xl text-center font-bold text-green-600';
	    if (window.renderMathInElement) window.renderMathInElement(resultEl);
        }

        function calculateGeometricSumNTerms(resultEl) {
            const a1 = parseFloat(document.getElementById('seq-geom-sumn-a1')?.value);
            const r = parseFloat(document.getElementById('seq-geom-sumn-r')?.value);
            const n = parseFloat(document.getElementById('seq-geom-sumn-n')?.value);


            if (isNaN(a1) || isNaN(r) || isNaN(n)) {
                resultEl.textContent = 'خطا: لطفا تمام مقادیر را وارد کنید.';
                resultEl.className = 'mt-2 text-2xl text-center font-bold text-red-600';
                return;
            }
            if (!Number.isInteger(n) || n <= 0) {

                resultEl.textContent = 'خطا: تعداد جملات (n) باید یک عدد طبیعی باشد.';

                resultEl.className = 'mt-2 text-2xl text-center font-bold text-red-600';

                return;

            }
            let sn;
            if (r === 1) {
                sn = a1 * n;
            } else {
                sn = a1 * (1 - Math.pow(r, n)) / (1 - r);
            }
            resultEl.textContent = `مجموع ${n} جمله اول برابر است با: $$S_{${n}}=${sn}$$`;
            resultEl.className = 'mt-2 text-2xl text-center font-bold text-green-600';
	    if (window.renderMathInElement) window.renderMathInElement(resultEl);
        }
        
        function calculateGeometricSumInfinite(resultEl) {
            const a1 = parseFloat(document.getElementById('seq-geom-suminf-a1')?.value);
            const r = parseFloat(document.getElementById('seq-geom-suminf-r')?.value);


            if (isNaN(a1) || isNaN(r) || Math.abs(r) >= 1) {
                resultEl.textContent = 'خطا: مقادیر را به درستی وارد کنید. (قدر نسبت r باید بین -1 و 1 باشد)';
                resultEl.className = 'mt-2 text-2xl text-center font-bold text-red-600';
                return;
            }
            const s_inf = a1 / (1 - r);
            resultEl.textContent = `مجموع نامتناهی برابر است با: $$S_{\\infty}=${s_inf}$$`;
            resultEl.className = 'mt-2 text-2xl text-center font-bold text-green-600';
	    if (window.renderMathInElement) window.renderMathInElement(resultEl);
        }

        function calculateTriangular(resultEl) {
            const n = parseFloat(document.getElementById('triangular-n')?.value);


            if (isNaN(n) || !Number.isInteger(n) || n <= 0) {
                resultEl.textContent = 'خطا: شماره جمله (n) باید یک عدد طبیعی باشد.';
                resultEl.className = 'mt-2 text-2xl text-center font-bold text-red-600';
                return;
            }
            const tn = (n * (n + 1)) / 2;
            resultEl.textContent = `عدد مثلثی ${n}-ام برابر است با: $$T_{${n}}=${tn}$$`;
            resultEl.className = 'mt-2 text-2xl text-center font-bold text-green-600';
	    if (window.renderMathInElement) window.renderMathInElement(resultEl);
        }

        function calculateFibonacci(resultEl) {
            const n = parseFloat(document.getElementById('fibonacci-n')?.value);


            if (isNaN(n)|| !Number.isInteger(n) || n <= 0 || n > 1500) {
                resultEl.textContent = 'خطا: شماره جمله (n) باید یک عدد صحیح و مثبت باشد (حداکثر تا 1500).';
                resultEl.className = 'mt-2 text-2xl text-center font-bold text-red-600';
                return;
            }
            if (n === 1 || n === 2) {
                var fn = 1n; // 1n نشان دهنده BigInt است
            } else {
                let a = 1n
                b = 1n;
                for (let i = 3; i <= n; i++) {
                	const next = a + b;
                	a = b;
                	b = next;
                }
                var fn = b;
            }
            resultEl.textContent = `جمله ${n}-ام فیبوناچی برابر است با: $$F_{${n}}=${fn.toString()}$$`;
            resultEl.className = 'mt-2 text-2xl text-center font-bold text-green-600';
	    if (window.renderMathInElement) window.renderMathInElement(resultEl);
        }

        document.getElementById('fibonacci-n').addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                calculateSequence('fibonacci')
            }
        });

        document.getElementById('triangular-n').addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                calculateSequence('triangular')
            }
        });

        // Venn Diagram
        let hatchPattern;
        function createHatchPattern() {
            const hatchCanvas = document.createElement('canvas');
            const hatchCtx = hatchCanvas.getContext('2d');
            hatchCanvas.width = 10;
            hatchCanvas.height = 10;
            hatchCtx.strokeStyle = 'rgba(0, 0, 0, 0.5)';
            hatchCtx.lineWidth = 1;
            hatchCtx.beginPath();
            hatchCtx.moveTo(0, 0);
            hatchCtx.lineTo(10, 10);
            hatchCtx.moveTo(0, 10);
            hatchCtx.lineTo(10, 0);
            hatchCtx.stroke();
            return hatchCanvas.getContext('2d').createPattern(hatchCanvas, 'repeat');
        }
        
        function initializeVennDiagram() {
            hatchPattern = createHatchPattern();
            drawVennDiagram(); // Draw a default empty state
        }
        
        function drawVennDiagram() {
            const canvas = document.getElementById('venn-canvas');
            const container = canvas.parentElement;
            const containerWidth = container.clientWidth-10;
	
    const containerHeight = container.clientHeight;
	
    canvas.width = containerWidth;
	
    canvas.height = 400;
            const ctx = canvas.getContext('2d');
            const expr = document.getElementById('venn-input').value;

            // Simple parsing to detect sets
            const hasA = /[Aa]/.test(expr) || expr.trim() === "";
            const hasB = /[Bb]/.test(expr) || expr.trim() === "";
            const hasC = /[Cc]/.test(expr);
            
            const numSets = (hasA ? 1 : 0) + (hasB ? 1 : 0) + (hasC ? 1 : 0);

            // --- NEW ROBUST PARSER ---
            let safeExpr = expr.trim()
                .replace(/\\cap/g, ' & ').replace(/\cap/g, ' & ').replace(/\^/g, ' & ').replace(/∩/g, ' & ') // intersection
                .replace(/\\cup/g, ' | ').replace(/\cup/g, ' | ').replace(/\+/g, ' | ').replace(/∪/g, ' | ') // union
                .replace(/\\Delta/g, ' ^ ').replace(/Δ/g, ' ^ ') // symmetric difference (JS XOR)
                .replace(/'/g, 'c').replace(/\^c/g, 'c') // normalize complement
                .replace(/[Aa]/g, 'A')
                .replace(/[Bb]/g, 'B')
                .replace(/[Cc]/g, 'C')
                .replace(/\b[Uu]\b/g, '(true)'); // Universe set (word boundary)

            // Handle complement 'c' applied to single letters, groups, or complex terms

            // A - c -> (!A)

            // Note: Applying repeatedly to handle nested complements like ((A')')'

            for(let i=0; i<5; i++) {
                // Case 1: Single letter complement (Ac, Bc, Cc)

                safeExpr = safeExpr.replace(/([A-Z])c/g, ' (!($1)) ');

                
                // Case 2: Parenthesized expression complement ((A | B)c)

                safeExpr = safeExpr.replace(/\((.*?)\)c/g, '(!($1))');

            }
            // Handle more complex nesting like ((A|B)|C)c
            for(let i=0; i<5; i++) {
                safeExpr = safeExpr.replace(/\((.*?)\)c/g, '(!($1))');
            }
            
            // Handle difference '-'
            // A - B -> (A & !B)
            // This assumes left-to-right precedence, e.g. A - B - C -> (A & !B) & !C
            safeExpr = safeExpr.replace(/\s*-\s*/g, ' & !');

            if (safeExpr.trim() === "") safeExpr = "false";
            // Default to 'false' if input is empty
            // --- END NEW PARSER ---

            let evaluator;
            try {
                evaluator = new Function('A', 'B', 'C', `return ${safeExpr};`);
                // Test the evaluator to catch syntax errors early
                evaluator(true, false, true); 
            } catch (e) {
                console.error("Venn parse error:", e);
                console.error("Failed expression:", safeExpr);
                showMessageBox('خطای عبارت', `عبارت وارد شده نامعتبر است: ${e.message}. عبارت ترجمه شده: ${safeExpr}`);
                return;
            }

            // Clear canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw Universe (U)
            ctx.fillStyle = '#FFFFFF';
            ctx.strokeStyle = '#000000';
            ctx.lineWidth = 2;
            ctx.strokeRect(5, 5, canvas.width - 22, canvas.height - 10);
            ctx.fillRect(5, 5, canvas.width - 22, canvas.height - 10);
            ctx.fillStyle = '#334155'; // رنگ متن (مثلاً خاکستری/آبی تیره)

            ctx.font = '22px "Cambria Math", serif';
            ctx.fillText('U', 25, 25);

            // Define circle geometries
            const r = 70;
            const c1 = { x: canvas.width / 2 - (numSets > 1 ? r / 1.5 : 0), y: canvas.height / 2 - (numSets === 3 ? r / 2 : 0) };
            const c2 = { x: canvas.width / 2 + (numSets > 1 ? r / 1.5 : 0), y: canvas.height / 2 - (numSets === 3 ? r / 2 : 0) };
            const c3 = { x: canvas.width / 2, y: canvas.height / 2 + r / 1.2 };

            const pathA = new Path2D();
            if(hasA) pathA.arc(c1.x, c1.y, r, 0, 2 * Math.PI);
            
            const pathB = new Path2D();
            if(hasB) pathB.arc(c2.x, c2.y, r, 0, 2 * Math.PI);
            
            const pathC = new Path2D();
            if(hasC) pathC.arc(c3.x, c3.y, r, 0, 2 * Math.PI);

            // --- REDESIGNED DRAWING ORDER ---
            
            // 1. Draw semi-transparent base fills
            ctx.lineWidth = 2;
            if (hasA) { ctx.fillStyle = 'rgba(255, 87, 87, 0.15)'; ctx.fill(pathA); } // Red-ish
            if (hasB) { ctx.fillStyle = 'rgba(87, 87, 255, 0.15)'; ctx.fill(pathB); } // Blue-ish
            if (hasC) { ctx.fillStyle = 'rgba(87, 255, 87, 0.15)'; ctx.fill(pathC); } // Green-ish

            // 2. Draw shaded region (hatching) by iterating pixels
            ctx.fillStyle = hatchPattern;
            const step = 2; // Check every 2 pixels for performance
            for (let x = 0; x < canvas.width; x += step) {
                for (let y = 0; y < canvas.height; y += step) {
                    const inA = hasA && ctx.isPointInPath(pathA, x, y);
                    const inB = hasB && ctx.isPointInPath(pathB, x, y);
                    const inC = hasC && ctx.isPointInPath(pathC, x, y);
                    
                    try {
                        if (evaluator(inA, inB, inC)) {
                            ctx.fillRect(x, y, step, step);
                        }
                    } catch (e) { /* ignore eval errors during iteration, caught above */ }
                }
            }

            // 3. Draw circle outlines (on top of shading)
            ctx.strokeStyle = 'rgba(0, 0, 0, 0.8)';
            ctx.font = '22px "Cambria Math", serif';
            
            if (hasA) {
                ctx.stroke(pathA);
                ctx.fillStyle = 'black';
                ctx.fillText('A', c1.x - r - 10, c1.y);
            }
            if (hasB) {
                ctx.stroke(pathB);
                ctx.fillStyle = 'black';
                ctx.fillText('B', c2.x + r + 20, c2.y);
            }
            if (hasC) {
                ctx.stroke(pathC);
                ctx.fillStyle = 'black';
                ctx.fillText('C', c3.x, c3.y + r + 20);
            }
        }

        document.getElementById('venn-input').addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                event.preventDefault();
                drawVennDiagram();
            }
        });

        // --- Custom Message Box Logic ---
        const messageBoxContainer = document.getElementById('message-box-container');
        const messageBoxTitle = document.getElementById('message-box-title');
        const messageBoxContent = document.getElementById('message-box-content');

        function showMessageBox(title, content) {
            messageBoxTitle.textContent = title;
            messageBoxContent.innerHTML = content.replace(/\n/g, '<br>');
            messageBoxContainer.classList.add('visible');
        }

        function hideMessageBox() {
            messageBoxContainer.classList.remove('visible');
        }

	document.addEventListener('keydown', function(event) {

	
    if (event.key === 'Enter' && messageBoxContainer.classList.contains('visible')) {

	        event.preventDefault();
	        hideMessageBox();
	}
});

        function parseAndStyleResponse(text) {
            let html = text;

            // 1. Handle Tables
            const tableRegex = /(\|.*\|(?:\r\n|\n|)?)+/g;
            html = html.replace(tableRegex, (table) => {
                const rows = table.trim().split('\n');
                const header = rows[0].split('|').slice(1, -1).map(h => `<th>${h.trim()}</th>`).join('');
                let body = '';
                // Start from row 2 to skip header separator
                for(let i = 2; i < rows.length; i++) {
                    const cells = rows[i].split('|').slice(1, -1).map(c => `<td>${c.trim()}</td>`).join('');
                    body += `<tr>${cells}</tr>`;
                }
                return `<div class="overflow-x-auto"><table class="ai-table"><thead><tr>${header}</tr></thead><tbody>${body}</tbody></table></div>`;
            });
            
            // 2. Headers, Bold, Images, Newlines
            html = html
                 .replace(/^### (.*$)/gm, '<h3 class="text-xl font-bold my-3 text-right">$1</h3>')
                 .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                 .replace(/!\[(.*?)\]\((.*?)\)/g, '<img src="$2" alt="$1" class="my-4 rounded-lg shadow-md mx-auto max-w-full h-auto">')
                 .replace(/\n/g, '<br>');
            
            // 3. Clean up
            html = html.replace(/(<\/h3>)<br>/g, '$1');

            return html;
        }


	// --- PhET Labs Data & Logic ---
        const phetLabs = {
            riazi: [{title:"بازی اعداد و عملیات",url:"https://phet.colorado.edu/sims/html/arithmetic/latest/arithmetic_fa.html",description:"کاوش در عملیات ریاضی و مقادیر اعداد."},{title:"مقایسه کسرها",url:"https://phet.colorado.edu/sims/html/fraction-matcher/latest/fraction-matcher_fa.html",description:"یادگیری و مقایسه کسرها به روش تصویری."},{title:"معرفی کسرها",url:"https://phet.colorado.edu/sims/html/fractions-intro/latest/fractions-intro_fa.html",description:"آشنایی با مفهوم کسرها به کمک شکل و عدد."},{title:"جمع و تفریق کسرها",url:"https://phet.colorado.edu/sims/html/fractions-addition/latest/fractions-addition_fa.html",description:"تمرین جمع و تفریق کسرها با مخرج‌های مشترک و غیر مشترک."},{title:"کاشف تساوی",url:"https://phet.colorado.edu/sims/html/equality-explorer/latest/equality-explorer_fa.html",description:"کاوش و درک تعادل و تساوی در معادلات با متغیر."},{title:"رسم نمودار خطوط",url:"https://phet.colorado.edu/sims/html/graphing-lines/latest/graphing-lines_fa.html",description:"بررسی رابطه بین معادله و نمودار خطی (شیب و عرض از مبدأ)."},{title:"اعداد صحیح در خط اعداد",url:"https://phet.colorado.edu/sims/html/number-line-integers/latest/number-line-integers_fa.html",description:"کاوش و مقایسه اعداد صحیح (مثبت و منفی) روی خط اعداد."},{title:"ساختن اعشار",url:"https://phet.colorado.edu/sims/html/tenths-hundredths/latest/tenths-hundredths_fa.html",description:"یادگیری اعشار، دهم‌ها و صدم‌ها به صورت بصری."},{title:"مقایسه‌گر درصد",url:"https://phet.colorado.edu/sims/html/percent-matcher/latest/percent-matcher_fa.html",description:"تطبیق مقادیر درصد، کسر و اعشار."},{title:"مساحت و محیط",url:"https://phet.colorado.edu/sims/html/area-builder/latest/area-builder_fa.html",description:"ساخت اشکال و محاسبه مساحت و محیط آنها به صورت بصری."},{title:"کاوشگر خط اعداد: کسرها",url:"https://phet.colorado.edu/sims/html/number-line-fractions/latest/number-line-fractions_fa.html",description:"قرار دادن و مقایسه کسرها روی خط اعداد."},{title:"ضرب کسرها",url:"https://phet.colorado.edu/sims/html/fractions-multiplication/latest/fractions-multiplication_fa.html",description:"درک بصری مفهوم ضرب کسرها."},{title:"تقسیم کسرها",url:"https://phet.colorado.edu/sims/html/fractions-division/latest/fractions-division_fa.html",description:"درک بصری مفهوم تقسیم کسرها."},{title:"ضرب و تقسیم اعداد صحیح",url:"https://phet.colorado.edu/sims/html/integer-multiplication/latest/integer-multiplication_fa.html",description:"درک قوانین ضرب و تقسیم برای اعداد مثبت و منفی."},{title:"نشانه‌گذاری علمی",url:"https://phet.colorado.edu/sims/html/scientific-notation/latest/scientific-notation_fa.html",description:"تمرین تبدیل اعداد به نشانه‌گذاری علمی و بالعکس."},{title:"معادلات دو مرحله‌ای",url:"https://phet.colorado.edu/sims/html/two-step-equations/latest/two-step-equations_fa.html",description:"تمرین حل معادلات جبری که به دو مرحله نیاز دارند."},{title:"مقایسه اعشار و کسر",url:"https://phet.colorado.edu/sims/html/decimals-fractions-compare/latest/decimals-fractions-compare_fa.html",description:"تبدیل و مقایسه مقادیر اعشاری و کسری."},{title:"ضرب اعداد صحیح با مدل",url:"https://phet.colorado.edu/sims/html/integer-multiplication-model/latest/integer-multiplication-model_fa.html",description:"استفاده از مدل‌های بصری برای درک ضرب اعداد صحیح."},{title:"جمع و تفریق اعداد صحیح",url:"https://phet.colorado.edu/sims/html/integer-addition-subtraction/latest/integer-addition-subtraction_fa.html",description:"درک جمع و تفریق اعداد مثبت و منفی روی خط اعداد."},{title:"عملیات با کسرها (پیشرفته)",url:"https://phet.colorado.edu/sims/html/fraction-operations/latest/fraction-operations_fa.html",description:"تمرین ترکیبی عملیات جمع، تفریق، ضرب و تقسیم کسرها."},{title:"معادلات خطی: فرم نقطه‌ای-شیب",url:"https://phet.colorado.edu/sims/html/point-slope-form-of-a-line/latest/point-slope-form-of-a-line_fa.html",description:"یادگیری فرم نقطه‌ای-شیب برای معادلات خطی."},{title:"سازنده تابع",url:"https://phet.colorado.edu/sims/html/function-builder/latest/function-builder_fa.html",description:"ساختن و تجزیه توابع ریاضی و مشاهده نحوه عملکرد آنها."},{title:"معادله‌ها و نامعادله‌ها",url:"https://phet.colorado.edu/sims/html/balancing-act/latest/balancing-act_fa.html",description:"استفاده از تعادل برای حل معادلات و نامعادلات مقدماتی."},{title:"جبر مدل مساحت",url:"https://phet.colorado.edu/sims/html/area-model-algebra/latest/area-model-algebra_fa.html",description:"استفاده از مدل مساحت برای ضرب و فاکتورگیری چند جمله‌ای‌ها."},{title:"نمودار توابع درجه دوم",url:"https://phet.colorado.edu/sims/html/graphing-quadratics/latest/graphing-quadratics_fa.html",description:"کاوش در پارامترهای مختلف توابع درجه دوم و تأثیر آنها بر نمودار."},{title:"شیب خط",url:"https://phet.colorado.edu/sims/html/slope/latest/slope_fa.html",description:"یادگیری و محاسبه شیب خط از روی نمودار و نقاط."},{title:"رابطه فیثاغورث",url:"https://phet.colorado.edu/sims/html/pythagorean-theorem/latest/pythagorean-theorem_fa.html",description:"اثبات و استفاده از قضیه فیثاغورث برای مثلث‌های قائم‌الزاویه."},{title:"کاوشگر توان‌ها",url:"https://phet.colorado.edu/sims/html/exponents-explorer/latest/exponents-explorer_fa.html",description:"کاوش در قواعد توان‌ها، از جمله ضرب و تقسیم توان‌ها."},{title:"حل سیستم‌های خطی",url:"https://phet.colorado.edu/sims/html/systems-of-linear-equations/latest/systems-of-linear-equations_fa.html",description:"یافتن نقطه تقاطع (جواب) سیستم‌های معادلات خطی."},{title:"رسم نامعادلات خطی",url:"https://phet.colorado.edu/sims/html/graphing-linear-inequalities/latest/graphing-linear-inequalities_fa.html",description:"رسم مناطق جواب برای نامعادلات خطی در صفحه مختصات."},{title:"معادلات درجه دوم با نمودار",url:"https://phet.colorado.edu/sims/html/quadratic-equation/latest/quadratic-equation_fa.html",description:"بررسی ریشه‌ها (جواب‌ها) و نمودار توابع درجه دوم."},{title:"تبدیلات هندسی",url:"https://phet.colorado.edu/sims/html/geometric-transformations/latest/geometric-transformations_en.html",description:"یادگیری و اعمال انتقال، دوران، بازتاب و انبساط."},{title:"کاوشگر هندسه سه‌بعدی",url:"https://phet.colorado.edu/sims/html/geometric-explorer/latest/geometric-explorer_en.html",description:"مشاهده و چرخش اشکال سه‌بعدی و درک خواص آنها."},{title:"ساخت حجم",url:"https://phet.colorado.edu/sims/html/volume-builder/latest/volume-builder_fa.html",description:"کاوش در مفهوم حجم با استفاده از مکعب‌های واحد."},{title:"زاویه‌ها و مثلث‌ها",url:"https://phet.colorado.edu/sims/html/angles-and-triangles/latest/angles-and-triangles_fa.html",description:"کاوش در اندازه‌گیری زوایا و خواص مثلث‌ها."},{title:"مساحت و محیط دایره",url:"https://phet.colorado.edu/sims/html/circle-area-and-circumference/latest/circle-area-and-circumference_fa.html",description:"درک مفاهیم شعاع، قطر، محیط و مساحت دایره."},{title:"منشور و هرم",url:"https://phet.colorado.edu/sims/html/prisms-and-pyramids/latest/prisms-and-pyramids_en.html",description:"بررسی حجم و مساحت سطح منشورها و هرم‌ها."},{title:"حل سیستم‌های نامعادلات",url:"https://phet.colorado.edu/sims/html/systems-of-inequalities/latest/systems-of-inequalities_en.html",description:"رسم و پیدا کردن ناحیه مشترک جواب‌های سیستم‌های نامعادلات خطی."},{title:"توابع چند جمله‌ای",url:"https://phet.colorado.edu/sims/html/polynomial-functions/latest/polynomial-functions_en.html",description:"رسم و تجزیه و تحلیل ریشه‌ها و رفتار توابع چند جمله‌ای."},{title:"توابع تکه‌ای",url:"https://phet.colorado.edu/sims/html/piecewise-functions/latest/piecewise-functions_en.html",description:"رسم و تجزیه و تحلیل توابعی که با چند قانون تعریف شده‌اند."},{title:"ماشین تریگ",url:"https://phet.colorado.edu/sims/html/trig-tour/latest/trig-tour_fa.html",description:"معرفی توابع سینوس، کسینوس و تانژانت و دایره مثلثاتی."},{title:"نسبت‌های مثلثاتی در دایره",url:"https://phet.colorado.edu/sims/html/unit-circle/latest/unit-circle_fa.html",description:"کاوش در توابع سینوس و کسینوس با استفاده از دایره واحد."},{title:"مقدمه‌ای بر لگاریتم‌ها",url:"https://phet.colorado.edu/sims/html/logarithms-intro/latest/logarithms-intro_en.html",description:"درک لگاریتم‌ها به عنوان معکوس توان‌ها."},{title:"نمودار توابع نمایی و لگاریتمی",url:"https://phet.colorado.edu/sims/html/exponential-logarithmic-functions/latest/exponential-logarithmic-functions_en.html",description:"کاوش در ویژگی‌های توابع نمایی و لگاریتمی و رابطه معکوس آن‌ها."},{title:"قانون کسینوس‌ها و سینوس‌ها",url:"https://phet.colorado.edu/sims/html/law-of-sines-and-cosines/latest/law-of-sines-and-cosines_en.html",description:"استفاده از قوانین سینوس و کسینوس برای حل مثلث‌ها."},{title:"توابع مثلثاتی پیشرفته",url:"https://phet.colorado.edu/sims/html/trigonometric-functions/latest/trigonometric-functions_en.html",description:"کاوش در نمودار، دامنه و برد توابع مثلثاتی."},{title:"رادیکال‌ها و ریشه‌ها",url:"https://phet.colorado.edu/sims/html/roots-and-radicals/latest/roots-and-radicals_en.html",description:"بررسی مفهوم ریشه‌های دوم، سوم و بالاتر."},{title:"تقسیم چند جمله‌ای‌ها",url:"https://phet.colorado.edu/sims/html/polynomial-division/latest/polynomial-division_en.html",description:"یادگیری تقسیم طولانی و ترکیبی چند جمله‌ای‌ها."},{title:"نامعادلات قدر مطلق",url:"https://phet.colorado.edu/sims/html/absolute-value-inequalities/latest/absolute-value-inequalities_en.html",description:"حل نامعادلات شامل قدر مطلق و نمایش جواب در خط اعداد."},{title:"توابع گویای مقدماتی",url:"https://phet.colorado.edu/sims/html/rational-functions-intro/latest/rational-functions-intro_en.html",description:"بررسی مجانب‌ها و ویژگی‌های اولیه توابع گویا."},{title:"نمودار توابع گویا",url:"https://phet.colorado.edu/sims/html/graphing-rational-functions/latest/graphing-rational-functions_en.html",description:"تجزیه و تحلیل پارامترها و رسم نمودار توابع گویا."},{title:"نمودار تابع قدر مطلق",url:"https://phet.colorado.edu/sims/html/absolute-value-function-grapher/latest/absolute-value-function-grapher_en.html",description:"رسم نمودار توابع قدر مطلق و بررسی تأثیر پارامترها."},{title:"مقدمه‌ای بر توابع نمایی",url:"https://phet.colorado.edu/sims/html/exponential-functions-intro/latest/exponential-functions-intro_en.html",description:"بررسی رشد و زوال نمایی با تغییر پارامترها."},{title:"لگاریتم‌ها و مقیاس‌ها",url:"https://phet.colorado.edu/sims/html/logarithms-and-scales/latest/logarithms-and-scales_en.html",description:"کاربرد لگاریتم‌ها در مقیاس‌های مختلف (مانند PH و دسی‌بل)."},{title:"نصف عمر",url:"https://phet.colorado.edu/sims/html/half-life/latest/half-life_fa.html",description:"مدل‌سازی رشد نمایی و زوال (کاربرد در ریاضیات و علوم)."},{title:"مقدمه‌ای بر مشتق",url:"https://phet.colorado.edu/sims/html/calculus-grapher/latest/calculus-grapher_en.html",description:"بررسی رابطه مشتق یک تابع با شیب منحنی آن."},{title:"انتگرال مقدماتی",url:"https://phet.colorado.edu/sims/html/calculus-area/latest/calculus-area_en.html",description:"درک انتگرال به عنوان مساحت زیر نمودار."},{title:"حدود و پیوستگی",url:"https://phet.colorado.edu/sims/html/calculus-limits/latest/calculus-limits_en.html",description:"کاوش در حد توابع از سمت چپ و راست و مفهوم پیوستگی."},{title:"تقریب مساحت",url:"https://phet.colorado.edu/sims/html/area-approximation/latest/area-approximation_en.html",description:"استفاده از مستطیل‌ها برای تقریب مساحت زیر منحنی (مقدمه انتگرال)."},{title:"طول مسیر",url:"https://phet.colorado.edu/sims/html/arc-length/latest/arc-length_en.html",description:"محاسبه طول کمان یک منحنی در حسابان."},{title:"حجم حاصل از دوران",url:"https://phet.colorado.edu/sims/html/volume-of-revolution/latest/volume-of-revolution_en.html",description:"درک روش دیسک و واشر برای محاسبه حجم در حسابان."},{title:"قضیه مقدار میانی",url:"https://phet.colorado.edu/sims/html/intermediate-value-theorem/latest/intermediate-value-theorem_en.html",description:"درک مفهوم قضیه مقدار میانی در حسابان."},{title:"قضیه رول",url:"https://phet.colorado.edu/sims/html/rolle-s-theorem/latest/rolle-s-theorem_en.html",description:"کاوش در قضیه رول و ارتباط آن با مشتق."},{title:"قضیه مقدار میانگین",url:"https://phet.colorado.edu/sims/html/mean-value-theorem/latest/mean-value-theorem_en.html",description:"بررسی قضیه مقدار میانگین برای مشتق و انتگرال."},{title:"مقدمه‌ای بر توابع چند متغیره",url:"https://phet.colorado.edu/sims/html/multivariable-functions/latest/multivariable-functions_en.html",description:"مشاهده نمودار و کانتورهای توابع با دو متغیر مستقل."},{title:"مشتق‌های جزئی",url:"https://phet.colorado.edu/sims/html/partial-derivatives/latest/partial-derivatives_en.html",description:"درک مشتق‌گیری نسبت به یک متغیر در توابع چند متغیره."},{title:"ماتریس‌ها",url:"https://phet.colorado.edu/sims/html/matrix-algebra/latest/matrix-algebra_en.html",description:"تمرین عملیات جمع، تفریق و ضرب ماتریس‌ها."},{title:"تبدیلات خطی",url:"https://phet.colorado.edu/sims/html/linear-transformations/latest/linear-transformations_en.html",description:"مشاهده تأثیر ماتریس‌ها بر تبدیل اشکال در صفحه مختصات."},{title:"بررسی دترمینان",url:"https://phet.colorado.edu/sims/html/determinant-explorer/latest/determinant-explorer_en.html",description:"درک دترمینان به عنوان مقیاس کننده مساحت/حجم و خواص آن."},{title:"فضاهای برداری و زیر فضاها",url:"https://phet.colorado.edu/sims/html/vector-spaces/latest/vector-spaces_en.html",description:"کاوش در پایه‌ها، ابعاد و زیرفضاهای فضاهای برداری."},{title:"مقدمه‌ای بر بردارها",url:"https://phet.colorado.edu/sims/html/vector-addition/latest/vector-addition_fa.html",description:"آشنایی با مفاهیم جمع بردارها، اجزاء و مقادیر آنها."},{title:"بردارها در فضای سه بعدی",url:"https://phet.colorado.edu/sims/html/vector-addition-3d/latest/vector-addition-3d_en.html",description:"جمع و تجزیه بردارها در فضای مختصات سه بعدی."},{title:"مقادیر و بردارهای ویژه",url:"https://phet.colorado.edu/sims/html/eigenvalues-eigenvectors/latest/eigenvalues-eigenvectors_en.html",description:"مشاهده تأثیر تبدیلات خطی بر بردارهای ویژه."},{title:"تجزیه مقدارهای منفرد (SVD)",url:"https://phet.colorado.edu/sims/html/singular-value-decomposition/latest/singular-value-decomposition_en.html",description:"درک تجزیه ماتریس‌ها به مقادیر منفرد و کاربردهای آن."},{title:"توزیع نرمال",url:"https://phet.colorado.edu/sims/html/normal-distribution/latest/normal-distribution_fa.html",description:"درک منحنی زنگی و پارامترهای توزیع نرمال."},{title:"احتمال با سکه",url:"https://phet.colorado.edu/sims/html/coin-flip/latest/coin-flip_fa.html",description:"کاوش در احتمالات از طریق آزمایش‌های پرتاب سکه."},{title:"نمودار دایره‌ای",url:"https://phet.colorado.edu/sims/html/pie-chart/latest/pie-chart_fa.html",description:"ساخت و تفسیر نمودارهای دایره‌ای (Pie Charts)."},{title:"نمایش داده‌ها",url:"https://phet.colorado.edu/sims/html/data-explorer/latest/data-explorer_fa.html",description:"ساخت و تجزیه و تحلیل هیستوگرام، نمودار جعبه‌ای و نمودار پراکندگی."},{title:"رگرسیون خطی",url:"https://phet.colorado.edu/sims/html/least-squares-regression/latest/least-squares-regression_en.html",description:"پیدا کردن بهترین خط برازش برای یک مجموعه داده (رگرسیون)."},{title:"قضیه حد مرکزی",url:"https://phet.colorado.edu/sims/html/central-limit-theorem/latest/central-limit-theorem_en.html",description:"درک توزیع‌های نمونه‌گیری و نقش قضیه حد مرکزی در آمار."},{title:"توزیع دو جمله‌ای",url:"https://phet.colorado.edu/sims/html/binomial-distribution/latest/binomial-distribution_en.html",description:"بررسی توزیع دو جمله‌ای و ارتباط آن با پرتاب‌های مستقل."},{title:"توزیع پواسون",url:"https://phet.colorado.edu/sims/html/poisson-distribution/latest/poisson-distribution_en.html",description:"مدل‌سازی تعداد رخدادها در یک بازه زمانی یا مکانی مشخص."},{title:"انحراف معیار",url:"https://phet.colorado.edu/sims/html/standard-deviation/latest/standard-deviation_en.html",description:"درک بصری مفهوم پراکندگی داده‌ها و انحراف معیار."},{title:"فاصله اطمینان",url:"https://phet.colorado.edu/sims/html/confidence-intervals/latest/confidence-intervals_en.html",description:"یادگیری نحوه ساخت و تفسیر فواصل اطمینان برای میانگین جامعه."},{title:"آزمون فرضیه",url:"https://phet.colorado.edu/sims/html/hypothesis-testing/latest/hypothesis-testing_en.html",description:"مقدمه‌ای بر آمار استنباطی و آزمون‌های آماری."},{title:"قانون اعداد بزرگ",url:"https://phet.colorado.edu/sims/html/law-of-large-numbers/latest/law-of-large-numbers_en.html",description:"مشاهده اینکه چگونه میانگین نمونه به میانگین واقعی جامعه نزدیک می‌شود."},{title:"آمار توصیفی",url:"https://phet.colorado.edu/sims/html/descriptive-statistics/latest/descriptive-statistics_en.html",description:"محاسبه میانگین، میانه، مد و رسم نمودارهای اولیه داده."},{title:"نمودار جعبه‌ای (Box Plot)",url:"https://phet.colorado.edu/sims/html/box-plot-explorer/latest/box-plot-explorer_en.html",description:"کاوش در چارک‌ها، محدوده بین چارکی و نمودارهای جعبه‌ای."},{title:"تبدیل واحدها",url:"https://phet.colorado.edu/sims/html/unit-converter/latest/unit-converter_fa.html",description:"تمرین تبدیل واحدهای اندازه‌گیری مختلف (طول، مساحت، حجم و غیره)."},{title:"تجزیه و تحلیل داده‌های دو متغیره",url:"https://phet.colorado.edu/sims/html/two-variable-data/latest/two-variable-data_en.html",description:"رسم نمودار پراکندگی و بررسی ارتباط بین دو متغیر."},{title:"نمودار تابع قدر مطلق",url:"https://phet.colorado.edu/sims/html/absolute-value-function-grapher/latest/absolute-value-function-grapher_en.html",description:"رسم نمودار توابع قدر مطلق و بررسی تأثیر پارامترها."},{title:"فضاهای برداری تعاملی",url:"https://phet.colorado.edu/sims/html/interactive-vector-spaces/latest/interactive-vector-spaces_en.html",description:"تعامل با بردارهای پایه و زیرفضاهای تولید شده."},{title:"معادلات دیفرانسیل",url:"https://phet.colorado.edu/sims/html/differential-equations/latest/differential-equations_en.html",description:"بررسی بصری پاسخ‌های معادلات دیفرانسیل مرتبه اول."},{title:"معادلات مرتبه دوم",url:"https://phet.colorado.edu/sims/html/second-order-differential-equations/latest/second-order-differential-equations_en.html",description:"حل بصری معادلات دیفرانسیل خطی مرتبه دوم (مانند فنر)."},{title:"مقدمه‌ای بر تبدیل لاپلاس",url:"https://phet.colorado.edu/sims/html/laplace-transform-intro/latest/laplace-transform-intro_en.html",description:"درک بصری تبدیل لاپلاس و کاربردهای آن در حل معادلات."},{title:"تجزیه و تحلیل فوریه",url:"https://phet.colorado.edu/sims/html/fourier-series/latest/fourier-series_en.html",description:"درک چگونگی ساخت توابع پیچیده از جمع سینوس‌ها و کسینوس‌ها."},{title:"سری تیلور",url:"https://phet.colorado.edu/sims/html/taylor-series/latest/taylor-series_en.html",description:"مشاهده نحوه تقریب زدن توابع با استفاده از چند جمله‌ای‌ها."},{title:"اعداد مختلط",url:"https://phet.colorado.edu/sims/html/complex-numbers/latest/complex-numbers_en.html",description:"نمایش بصری و انجام عملیات روی اعداد مختلط در صفحه گاوسی."},{title:"معادلات پارامتری",url:"https://phet.colorado.edu/sims/html/parametric-equations/latest/parametric-equations_en.html",description:"رسم و تجزیه و تحلیل منحنی‌ها با استفاده از معادلات پارامتری."},{title:"معادلات قطبی",url:"https://phet.colorado.edu/sims/html/polar-equations/latest/polar-equations_en.html",description:"رسم توابع و منحنی‌ها در دستگاه مختصات قطبی."},{title:"نمودار رادیکال‌ها",url:"https://phet.colorado.edu/sims/html/graphing-radicals/latest/graphing-radicals_en.html",description:"رسم نمودار توابع رادیکالی و بررسی خواص آن‌ها."},{title:"کسرهای جزئی",url:"https://phet.colorado.edu/sims/html/partial-fractions/latest/partial-fractions_en.html",description:"یادگیری تجزیه کسرها به کسرهای ساده‌تر برای انتگرال‌گیری."},{title:"معادلات نامعلوم",url:"https://phet.colorado.edu/sims/html/undefined-equations/latest/undefined-equations_en.html",description:"بررسی شرایطی که یک عبارت ریاضی (مانند تقسیم بر صفر) نامعلوم می‌شود."},{title:"بردارها در سیستم مختصات",url:"https://phet.colorado.edu/sims/html/vectors-in-coordinate-system/latest/vectors-in-coordinate-system_en.html",description:"بررسی مختصات، اندازه و جهت بردارها در صفحه."},{title:"عملیات برداری پیشرفته",url:"https://phet.colorado.edu/sims/html/advanced-vector-operations/latest/advanced-vector-operations_en.html",description:"تمرین ضرب داخلی (نقطه‌ای) و ضرب خارجی (ضرب برداری) بردارها."},{title:"دنباله‌ها و سری‌ها",url:"https://phet.colorado.edu/sims/html/sequences-and-series/latest/sequences-and-series_en.html",description:"کاوش در رفتار دنباله‌ها و تعیین همگرایی سری‌ها."},{title:"نمودارهای سه‌بعدی",url:"https://phet.colorado.edu/sims/html/3d-grapher/latest/3d-grapher_en.html",description:"مشاهده و چرخش نمودارهای توابع دو متغیره در فضای سه بعدی."},{title:"معادله خط در فضا",url:"https://phet.colorado.edu/sims/html/line-in-space/latest/line-in-space_en.html",description:"درک معادله خطوط و صفحات در فضای سه بعدی."},{title:"انتگرال خط",url:"https://phet.colorado.edu/sims/html/line-integral/latest/line-integral_en.html",description:"درک مفهوم انتگرال خط در یک میدان برداری."},{title:"قضیه گرین",url:"https://phet.colorado.edu/sims/html/green-s-theorem/latest/green-s-theorem_en.html",description:"بررسی ارتباط بین انتگرال خط در مرز یک ناحیه و انتگرال روی ناحیه."},{title:"معادلات دیفرانسیل مرتبه بالاتر",url:"https://phet.colorado.edu/sims/html/higher-order-differential-equations/latest/higher-order-differential-equations_en.html",description:"مدل‌سازی سیستم‌های پیچیده با معادلات دیفرانسیل با مرتبه بالا."},{title:"تبدیلات لاپلاس معکوس",url:"https://phet.colorado.edu/sims/html/inverse-laplace-transform/latest/inverse-laplace-transform_en.html",description:"بررسی چگونگی بازگشت از فضای لاپلاس به تابع اصلی."},{title:"سطوح مقطع",url:"https://phet.colorado.edu/sims/html/conic-sections/latest/conic-sections_en.html",description:"کاوش در دایره، بیضی، سهمی و هذلولی به عنوان برش‌های مخروط."},{title:"توابع مثلثاتی معکوس",url:"https://phet.colorado.edu/sims/html/inverse-trigonometric-functions/latest/inverse-trigonometric-functions_en.html",description:"بررسی نمودار و خواص توابع معکوس مثلثاتی."},{title:"نمودارهای قطبی پیشرفته",url:"https://phet.colorado.edu/sims/html/advanced-polar-graphs/latest/advanced-polar-graphs_en.html",description:"رسم توابع و منحنی‌ها در دستگاه مختصات قطبی (مانند رُزها)."},{title:"جبر گزاره‌ها",url:"https://phet.colorado.edu/sims/html/propositional-logic/latest/propositional-logic_en.html",description:"بررسی عملیات‌های منطقی (مانند AND, OR, NOT) و جداول درستی."},{title:"نظریه گراف مقدماتی",url:"https://phet.colorado.edu/sims/html/graph-theory-intro/latest/graph-theory-intro_en.html",description:"آشنایی با گره‌ها، یال‌ها و مفاهیم اساسی نظریه گراف."},{title:"تبدیلات موجک",url:"https://phet.colorado.edu/sims/html/wavelet-transforms/latest/wavelet-transforms_en.html",description:"تجزیه و تحلیل توابع با استفاده از تبدیل موجک (Wavelet)."},{title:"جبر بولی",url:"https://phet.colorado.edu/sims/html/boolean-algebra/latest/boolean-algebra_en.html",description:"یادگیری و ساده‌سازی عبارات منطقی و مدارهای بولی."},{title:"منطق فازی",url:"https://phet.colorado.edu/sims/html/fuzzy-logic/latest/fuzzy-logic_en.html",description:"درک مفهوم عضویت نسبی و کاربردهای منطق فازی."},{title:"فاکتورگیری چند جمله‌ای‌ها (پیشرفته)",url:"https://phet.colorado.edu/sims/html/advanced-polynomial-factoring/latest/advanced-polynomial-factoring_en.html",description:"تمرین فاکتورگیری چند جمله‌ای‌های درجه بالاتر و پیچیده."},{title:"مزدوج‌های مختلط",url:"https://phet.colorado.edu/sims/html/complex-conjugates/latest/complex-conjugates_en.html",description:"درک مفهوم مزدوج اعداد مختلط و استفاده از آن در تقسیم."},{title:"خواص دترمینان",url:"https://phet.colorado.edu/sims/html/determinant-properties/latest/determinant-properties_en.html",description:"کاوش در تأثیر عملیات سطری و ستونی بر روی دترمینان ماتریس."},{title:"رتبه‌بندی ماتریس",url:"https://phet.colorado.edu/sims/html/matrix-rank/latest/matrix-rank_en.html",description:"تعیین رتبه (Rank) ماتریس و ارتباط آن با فضای ستونی و سطری."},{title:"تجزیه QR",url:"https://phet.colorado.edu/sims/html/qr-decomposition/latest/qr-decomposition_en.html",description:"درک تجزیه ماتریس‌ها به فرم Q و R و کاربرد آن در حل سیستم‌ها."},{title:"سیستم‌های غیر خطی",url:"https://phet.colorado.edu/sims/html/nonlinear-systems/latest/nonlinear-systems_en.html",description:"حل بصری سیستم‌های معادلات شامل توابع غیر خطی."},{title:"نامعادلات قدر مطلق سه‌بعدی",url:"https://phet.colorado.edu/sims/html/3d-absolute-value-inequalities/latest/3d-absolute-value-inequalities_en.html",description:"رسم مناطق جواب برای نامعادلات قدر مطلق در فضای سه بعدی."},{title:"حدود در توابع دو متغیره",url:"https://phet.colorado.edu/sims/html/multivariable-limits/latest/multivariable-limits_en.html",description:"بررسی حدود توابع با دو متغیر در امتداد مسیرهای مختلف."},{title:"قضیه استوکس",url:"https://phet.colorado.edu/sims/html/stokes-theorem/latest/stokes-theorem_en.html",description:"درک ارتباط بین انتگرال سطحی و انتگرال خط مرزی."},{title:"قضیه دیورژانس",url:"https://phet.colorado.edu/sims/html/divergence-theorem/latest/divergence-theorem_en.html",description:"درک ارتباط بین انتگرال حجمی دیورژانس یک میدان برداری و انتگرال سطحی."},{title:"فضاهای متریک",url:"https://phet.colorado.edu/sims/html/metric-spaces/latest/metric-spaces_en.html",description:"کاوش در مفاهیم فاصله و توپولوژی در فضاهای متریک انتزاعی."},{title:"اعداد اول و فاکتورگیری",url:"https://phet.colorado.edu/sims/html/prime-numbers-and-factoring/latest/prime-numbers-and-factoring_en.html",description:"تجزیه اعداد به عوامل اول و درک توزیع اعداد اول."},{title:"جبر مجرد: گروه‌ها",url:"https://phet.colorado.edu/sims/html/abstract-algebra-groups/latest/abstract-algebra-groups_en.html",description:"آشنایی با مفاهیم گروه‌ها، زیرگروه‌ها و عملیات‌های دوتایی."},{title:"جبر مجرد: حلقه‌ها و میدان‌ها",url:"https://phet.colorado.edu/sims/html/abstract-algebra-rings-fields/latest/abstract-algebra-rings-fields_en.html",description:"کاوش در ساختارهای جبری حلقه‌ها و میدان‌ها."},{title:"هندسه غیر اقلیدسی",url:"https://phet.colorado.edu/sims/html/non-euclidean-geometry/latest/non-euclidean-geometry_en.html",description:"مشاهده تفاوت‌های هندسه هذلولی و کروی با هندسه اقلیدسی."},{title:"توپولوژی مقدماتی",url:"https://phet.colorado.edu/sims/html/topology-intro/latest/topology-intro_en.html",description:"درک مفاهیم اولیه فضای توپولوژیک و پیوستگی."},{title:"فضاهای هیلبرت",url:"https://phet.colorado.edu/sims/html/hilbert-spaces/latest/hilbert-spaces_en.html",description:"کاوش در فضاهای برداری با ضرب داخلی (فضاهای هیلبرت)."},{title:"مدل‌سازی رشد جمعیت",url:"https://phet.colorado.edu/sims/html/population-growth/latest/population-growth_fa.html",description:"استفاده از توابع نمایی و لجستیک برای مدل‌سازی رشد."},{title:"مسائل بهینه‌سازی",url:"https://phet.colorado.edu/sims/html/optimization-problems/latest/optimization-problems_en.html",description:"یافتن مقادیر ماکزیمم و مینیمم در توابع با محدودیت."},{title:"تقریب خطی و خطا",url:"https://phet.colorado.edu/sims/html/linear-approximation/latest/linear-approximation_en.html",description:"استفاده از خط مماس برای تقریب زدن توابع و محاسبه خطا."},{title:"نمودار توابع هایپربولیک",url:"https://phet.colorado.edu/sims/html/hyperbolic-functions/latest/hyperbolic-functions_en.html",description:"بررسی توابع سینوس هیپربولیک و کسینوس هیپربولیک."},{title:"منطق مرتبه اول",url:"https://phet.colorado.edu/sims/html/first-order-logic/latest/first-order-logic_en.html",description:"آشنایی با سورها (برای هر، وجود دارد) و استدلال‌های منطقی."},{title:"استدلال استقرایی و قیاسی",url:"https://phet.colorado.edu/sims/html/inductive-deductive-reasoning/latest/inductive-deductive-reasoning_en.html",description:"درک روش‌های استدلال ریاضی و منطقی."},{title:"شبکه‌های عصبی مقدماتی",url:"https://phet.colorado.edu/sims/html/neural-networks-intro/latest/neural-networks-intro_en.html",description:"مدل‌سازی عملکرد پایه شبکه‌های عصبی و وزن‌دهی."},{title:"معادلات دیفرانسیل جزئی (PDE)",url:"https://phet.colorado.edu/sims/html/partial-differential-equations/latest/partial-differential-equations_en.html",description:"مدل‌سازی پدیده‌هایی مانند گرما و موج با PDEها."},{title:"فضاهای فشرده",url:"https://phet.colorado.edu/sims/html/compact-spaces/latest/compact-spaces_en.html",description:"درک مفهوم فضای فشرده در توپولوژی."},{title:"تابع گاما",url:"https://phet.colorado.edu/sims/html/gamma-function/latest/gamma-function_en.html",description:"کاوش در تابع گاما به عنوان تعمیم فاکتوریل."},{title:"تبدیلات موبیوس",url:"https://phet.colorado.edu/sims/html/mobius-transformations/latest/mobius-transformations_en.html",description:"بررسی نگاشت‌های پیچیده و هندسی تبدیل موبیوس."},{title:"مدل‌سازی با نمودارها",url:"https://phet.colorado.edu/sims/html/graph-modeling/latest/graph-modeling_en.html",description:"ساخت مدل‌های ریاضی از موقعیت‌های واقعی با استفاده از نمودارها."},{title:"آنالیز مختلط: انتگرال کُشی",url:"https://phet.colorado.edu/sims/html/cauchy-integral/latest/cauchy-integral_en.html",description:"درک قضیه انتگرال کُشی در توابع مختلط."},{title:"توابع تحلیلی",url:"https://phet.colorado.edu/sims/html/analytic-functions/latest/analytic-functions_en.html",description:"بررسی ویژگی‌های توابع تحلیلی و معادلات کوشی-ریمان."},{title:"انتگرال ریمان-استیلتیس",url:"https://phet.colorado.edu/sims/html/riemann-stieltjes-integral/latest/riemann-stieltjes-integral_en.html",description:"مقدمه‌ای بر تعمیم انتگرال ریمان."},{title:"مقدمه‌ای بر ابعاد بالا",url:"https://phet.colorado.edu/sims/html/high-dimensional-intro/latest/high-dimensional-intro_en.html",description:"تجسم و درک مفاهیم هندسی در ابعاد بالاتر از سه."},{title:"فضاهای اقلیدسی",url:"https://phet.colorado.edu/sims/html/euclidean-spaces/latest/euclidean-spaces_en.html",description:"کاوش در پایه‌ها و خواص فضاهای اقلیدسی (R^n)."},{title:"شبکه‌های پتری",url:"https://phet.colorado.edu/sims/html/petri-nets/latest/petri-nets_en.html",description:"مدل‌سازی سیستم‌های توزیع شده و همزمان با شبکه‌های پتری."},{title:"توزیع‌های نمونه‌گیری",url:"https://phet.colorado.edu/sims/html/sampling-distributions/latest/sampling-distributions_en.html",description:"درک توزیع آماره‌ها از نمونه‌های مختلف."},{title:"خطوط و منحنی‌ها در فضا",url:"https://phet.colorado.edu/sims/html/lines-and-curves-in-space/latest/lines-and-curves-in-space_en.html",description:"تجسم مسیرها، بردارهای مماس و انحنا در فضای سه بعدی."}],
            fizik: [{title:"حرکت پرتابی",url:"https://phet.colorado.edu/sims/html/projectile-motion/latest/projectile-motion_fa.html",description:"تحلیل مسیر حرکت پرتابه‌ها با متغیرهای مختلف (سرعت، زاویه، مقاومت هوا)."},{title:"نیروها و حرکت",url:"https://phet.colorado.edu/sims/html/forces-and-motion/latest/forces-and-motion_fa.html",description:"درک قوانین نیوتن با اعمال نیروها و مشاهده حرکت و شتاب اجسام."},{title:"پارک اسکیت انرژی",url:"https://phet.colorado.edu/sims/html/energy-skate-park-basics/latest/energy-skate-park-basics_fa.html",description:"کاوش در تبدیل انرژی جنبشی و پتانسیل گرانشی."},{title:"اصطکاک و نیروی لغزش",url:"https://phet.colorado.edu/sims/html/friction-on-a-ramp/latest/friction-on-a-ramp_fa.html",description:"بررسی تأثیر ضرایب اصطکاک استاتیک و جنبشی بر روی حرکت سطح شیب‌دار."},{title:"آزمایشگاه برخورد",url:"https://phet.colorado.edu/sims/html/collision-lab/latest/collision-lab_fa.html",description:"تجزیه و تحلیل پایستگی تکانه و انرژی در برخوردهای الاستیک و غیرالاستیک."},{title:"آونگ ساده",url:"https://phet.colorado.edu/sims/html/pendulum-lab/latest/pendulum-lab_fa.html",description:"بررسی دوره تناوب آونگ با تغییر طول نخ و جرم."},{title:"قانون اهم",url:"https://phet.colorado.edu/sims/html/ohms-law/latest/ohms-law_fa.html",description:"کشف رابطه بین ولتاژ، جریان و مقاومت در مدارها."},{title:"کیت ساخت مدار (DC)",url:"https://phet.colorado.edu/sims/html/circuit-construction-kit-dc-basics/latest/circuit-construction-kit-dc-basics_fa.html",description:"ساخت مدارهای ساده سری و موازی با استفاده از باتری، لامپ و مقاومت."},{title:"میدان الکتریکی هاکی",url:"https://phet.colorado.edu/sims/html/electric-field-hockey/latest/electric-field-hockey_fa.html",description:"یادگیری در مورد میدان‌های الکتریکی با قرار دادن بارهای الکتریکی."},{title:"بادکنک و الکتریسیته ساکن",url:"https://phet.colorado.edu/sims/html/balloons-and-static-electricity/latest/balloons-and-static-electricity_fa.html",description:"تجربه شارژ و دشارژ اجسام و نیروی کولن."},{title:"خم کردن نور (شکست)",url:"https://phet.colorado.edu/sims/html/bending-light/latest/bending-light_fa.html",description:"بررسی پدیده‌های بازتاب، شکست و قانون اسنل."},{title:"دید رنگی",url:"https://phet.colorado.edu/sims/html/color-vision/latest/color-vision_fa.html",description:"کاوش در مورد ترکیب نورهای رنگی (RGB) و نحوه دیدن رنگ‌ها توسط چشم."},{title:"موج روی سیم",url:"https://phet.colorado.edu/sims/html/wave-on-a-string/latest/wave-on-a-string_fa.html",description:"بررسی خواص امواج عرضی شامل دامنه، فرکانس و طول موج."},{title:"صوت و موج",url:"https://phet.colorado.edu/sims/html/sound/latest/sound_fa.html",description:"کاوش در امواج طولی، تولید و انتشار صدا."},{title:"اثر فوتوالکتریک",url:"https://phet.colorado.edu/sims/html/photoelectric-effect/latest/photoelectric-effect_fa.html",description:"مشاهده تولید الکترون‌ها توسط نور و درک مفهوم کوانتومی نور."},{title:"طیف جسم سیاه",url:"https://phet.colorado.edu/sims/html/blackbody-spectrum/latest/blackbody-spectrum_fa.html",description:"بررسی ارتباط دما با حداکثر طول موج و شدت تابش."},{title:"اتم‌ها و ایزوتوپ‌ها",url:"https://phet.colorado.edu/sims/html/isotopes-and-atomic-mass/latest/isotopes-and-atomic-mass_fa.html",description:"درک ساختار اتمی، نوترون‌ها، پروتون‌ها و جرم اتمی."},{title:"نیمه عمر",url:"https://phet.colorado.edu/sims/html/half-life/latest/half-life_fa.html",description:"مدل‌سازی واپاشی رادیواکتیو و مفهوم نیمه عمر مواد."},{title:"گازها",url:"https://phet.colorado.edu/sims/html/gas-properties/latest/gas-properties_fa.html",description:"بررسی رفتار گازها با تغییر دما، حجم و فشار (قوانین گازها)."},{title:"مولکول‌ها و جنبش گرمایی",url:"https://phet.colorado.edu/sims/html/molecules-and-light/latest/molecules-and-light_fa.html",description:"مشاهده جنبش گرمایی مولکول‌ها و تأثیر دما بر سرعت آن‌ها."},{title:"فارادی",url:"https://phet.colorado.edu/sims/html/faradays-law/latest/faradays-law_fa.html",description:"آزمایش القای الکترومغناطیسی با آهنربا و سیم‌پیچ."},{title:"سلف‌ها و القای مغناطیسی",url:"https://phet.colorado.edu/sims/html/generator/latest/generator_fa.html",description:"درک نحوه کار ژنراتورها و تولید جریان الکتریکی با چرخش سیم‌پیچ."},{title:"عدسی‌ها و آینه‌ها",url:"https://phet.colorado.edu/sims/html/geometric-optics/latest/geometric-optics_fa.html",description:"ترسیم پرتوها و تشکیل تصویر در عدسی‌های محدب و مقعر و آینه‌ها."},{title:"فشار سیالات",url:"https://phet.colorado.edu/sims/html/fluid-pressure-and-flow/latest/fluid-pressure-and-flow_fa.html",description:"بررسی فشار در سیالات در عمق‌های مختلف و تأثیر چگالی."},{title:"شناوری",url:"https://phet.colorado.edu/sims/html/under-pressure/latest/under-pressure_fa.html",description:"درک نیروی شناوری و چگالی اجسام در آب."},{title:"نیروی گرانش و مدارها",url:"https://phet.colorado.edu/sims/html/gravity-and-orbits/latest/gravity-and-orbits_fa.html",description:"مدل‌سازی حرکت سیارات و قمرها تحت تأثیر گرانش."},{title:"جمع بردارها",url:"https://phet.colorado.edu/sims/html/vector-addition/latest/vector-addition_fa.html",description:"ترکیب بردارها و تجزیه آن‌ها به مؤلفه‌های x و y."},{title:"نیروی مغناطیسی",url:"https://phet.colorado.edu/sims/html/magnets-and-electromagnets/latest/magnets-and-electromagnets_fa.html",description:"بررسی میدان‌های مغناطیسی تولید شده توسط آهنرباها و جریان الکتریکی."},{title:"ساختار اتم",url:"https://phet.colorado.edu/sims/html/rutherford-scattering/latest/rutherford-scattering_fa.html",description:"شبیه‌سازی آزمایش رادرفورد و مدل هسته‌ای اتم."},{title:"مدل بور",url:"https://phet.colorado.edu/sims/html/hydrogen-atom/latest/hydrogen-atom_fa.html",description:"مشاهده سطوح انرژی اتم هیدروژن و جذب و گسیل فوتون‌ها."},{title:"شبیه‌سازی کوانتومی",url:"https://phet.colorado.edu/sims/html/quantum-wave-interference/latest/quantum-wave-interference_en.html",description:"درک دوگانگی موج-ذره برای الکترون‌ها و فوتون‌ها."},{title:"مدارهای RC",url:"https://phet.colorado.edu/sims/html/circuit-construction-kit-ac-dc/latest/circuit-construction-kit-ac-dc_fa.html",description:"ساخت و تحلیل مدارهای خازنی و مقاومتی با جریان متناوب و مستقیم."},{title:"خازن‌ها",url:"https://phet.colorado.edu/sims/html/capacitor-lab-basics/latest/capacitor-lab-basics_fa.html",description:"بررسی ذخیره بار و انرژی در خازن‌ها با تغییر صفحات و فاصله."},{title:"جریان متناوب",url:"https://phet.colorado.edu/sims/html/ac-circuits/latest/ac-circuits_en.html",description:"تجزیه و تحلیل مدارهای RL و RLC با جریان متناوب."},{title:"مکانیک کوانتومی",url:"https://phet.colorado.edu/sims/html/quantum-bound-states/latest/quantum-bound-states_en.html",description:"مشاهده تابع موج در چاه پتانسیل کوانتومی."},{title:"نیروهای میدان",url:"https://phet.colorado.edu/sims/html/field-forces/latest/field-forces_en.html",description:"مقایسه نیروهای الکتریکی، مغناطیسی و گرانشی."},{title:"حرکت دایره‌ای",url:"https://phet.colorado.edu/sims/html/rotation/latest/rotation_fa.html",description:"بررسی سرعت زاویه‌ای، شتاب گریز از مرکز و گشتاور."},{title:"تکانه زاویه‌ای",url:"https://phet.colorado.edu/sims/html/torque/latest/torque_fa.html",description:"درک مفهوم گشتاور نیرو و تعادل دورانی."},{title:"پایداری و تعادل",url:"https://phet.colorado.edu/sims/html/balancing-act/latest/balancing-act_fa.html",description:"آموزش مفاهیم مرکز جرم و تعادل ایستا."},{title:"دینامیک سیالات",url:"https://phet.colorado.edu/sims/html/fluid-dynamics/latest/fluid-dynamics_en.html",description:"بررسی معادله برنولی و جریان آرام سیالات."},{title:"ماشین‌های ساده",url:"https://phet.ado.edu/sims/html/simple-machines/latest/simple-machines_fa.html",description:"کاوش در اهرم‌ها، قرقره‌ها و کار انجام شده توسط آن‌ها."},{title:"مکانیک لاگرانژی",url:"https://phet.colorado.edu/sims/html/lagrangian-mechanics/latest/lagrangian-mechanics_en.html",description:"درک مفاهیم انرژی جنبشی و پتانسیل در فرمول‌بندی لاگرانژ."},{title:"آزمایشگاه کشش",url:"https://phet.colorado.edu/sims/html/hookes-law/latest/hookes-law_fa.html",description:"بررسی قانون هوک و محاسبه ضریب سختی فنر."},{title:"حرکت نوسانی",url:"https://phet.colorado.edu/sims/html/masses-and-springs-lab/latest/masses-and-springs-lab_fa.html",description:"تجزیه و تحلیل نوسانات جرم و فنر و انرژی‌های مرتبط."},{title:"پاشیدگی نور",url:"https://phet.colorado.edu/sims/html/light-dispersion/latest/light-dispersion_en.html",description:"مشاهده تجزیه نور سفید به طیف رنگی توسط منشور."},{title:"تداخل امواج",url:"https://phet.colorado.edu/sims/html/wave-interference/latest/wave-interference_fa.html",description:"آزمایش تداخل و پراش امواج آب، نور و صدا."},{title:"قطبش نور",url:"https://phet.colorado.edu/sims/html/polarization/latest/polarization_en.html",description:"درک مفهوم قطبش و فیلترهای قطبش‌سنج."},{title:"آینه‌های کروی",url:"https://phet.colorado.edu/sims/html/mirror-lab/latest/mirror-lab_fa.html",description:"رسم پرتوها و تشکیل تصویر در آینه‌های کاو و کوژ."},{title:"لنزهای ترکیبی",url:"https://phet.colorado.edu/sims/html/optics-bench/latest/optics-bench_en.html",description:"چیدمان و ترکیب لنزها و آینه‌ها برای ساخت ابزارهای نوری."},{title:"طیف الکترومغناطیسی",url:"https://phet.colorado.edu/sims/html/electromagnetic-spectrum/latest/electromagnetic-spectrum_en.html",description:"کاوش در انواع امواج الکترومغناطیسی از رادیو تا گاما."},{title:"اثر دوپلر",url:"https://phet.colorado.edu/sims/html/doppler-effect/latest/doppler-effect_fa.html",description:"مشاهده تغییر فرکانس امواج با حرکت منبع یا ناظر."},{title:"آزمایشگاه فشار",url:"https://phet.colorado.edu/sims/html/pressure-lab/latest/pressure-lab_fa.html",description:"بررسی فشار گازها در ظروف بسته با تغییر دما و حجم."},{title:"قانون شارل",url:"https://phet.colorado.edu/sims/html/gas-laws-charles/latest/gas-laws-charles_en.html",description:"تحلیل رابطه بین حجم و دما در فشار ثابت."},{title:"قانون بویل",url:"https://phet.colorado.edu/sims/html/gas-laws-boyle/latest/gas-laws-boyle_en.html",description:"تحلیل رابطه بین فشار و حجم در دمای ثابت."},{title:"موتور استرلینگ",url:"https://phet.colorado.edu/sims/html/stirling-engine/latest/stirling-engine_en.html",description:"درک چگونگی تبدیل انرژی حرارتی به کار مکانیکی در موتور استرلینگ."},{title:"انبساط حرارتی",url:"https://phet.colorado.edu/sims/html/thermal-expansion/latest/thermal-expansion_fa.html",description:"مشاهده انبساط جامدات و مایعات در اثر افزایش دما."},{title:"هدایت حرارتی",url:"https://phet.colorado.edu/sims/html/heat-transfer/latest/heat-transfer_fa.html",description:"بررسی روش‌های انتقال گرما شامل رسانایی، همرفت و تابش."},{title:"مفهوم دما و گرما",url:"https://phet.colorado.edu/sims/html/temperature-and-heat/latest/temperature-and-heat_fa.html",description:"درک تفاوت دما (انرژی جنبشی متوسط) و گرما (انرژی منتقل شده)."},{title:"ترمودینامیک مقدماتی",url:"https://phet.colorado.edu/sims/html/thermodynamics-basics/latest/thermodynamics-basics_fa.html",description:"بررسی قانون اول ترمودینامیک و تبدیل انرژی داخلی، گرما و کار."},{title:"چرخه‌های ترمودینامیکی",url:"https://phet.colorado.edu/sims/html/thermodynamic-cycles/latest/thermodynamic-cycles_en.html",description:"تحلیل چرخه‌های کارنو، اتو و دیزل بر روی نمودار PV."},{title:"ترانسفورماتور",url:"https://phet.colorado.edu/sims/html/transformers/latest/transformers_fa.html",description:"درک نحوه کار ترانسفورماتورهای افزاینده و کاهنده."},{title:"قانون لنز",url:"https://phet.colorado.edu/sims/html/lenz-law/latest/lenz-law_fa.html",description:"مشاهده جهت جریان القایی و مقاومت آن در برابر تغییر شار مغناطیسی."},{title:"نیروی لورنتس",url:"https://phet.colorado.edu/sims/html/lorentz-force/latest/lorentz-force_en.html",description:"بررسی نیروی وارد بر یک ذره باردار متحرک در میدان‌های الکتریکی و مغناطیسی."},{title:"شبیه‌ساز باتری",url:"https://phet.colorado.edu/sims/html/battery-resistor-sim/latest/battery-resistor-sim_fa.html",description:"بررسی تأثیر مقاومت داخلی باتری بر توان خروجی."},{title:"پتانسیل الکتریکی",url:"https://phet.colorado.edu/sims/html/charges-and-fields/latest/charges-and-fields_fa.html",description:"نمایش خطوط میدان الکتریکی و سطوح هم‌پتانسیل ناشی از بارهای نقطه‌ای."},{title:"پل وتستون",url:"https://phet.colorado.edu/sims/html/wheatstone-bridge/latest/wheatstone-bridge_en.html",description:"استفاده از پل وتستون برای اندازه‌گیری مقاومت‌های ناشناخته."},{title:"قانون کیرشهف",url:"https://phet.colorado.edu/sims/html/kirchhoffs-laws/latest/kirchhoffs-laws_en.html",description:"تحلیل مدارهای پیچیده با استفاده از قوانین جریان و ولتاژ کیرشهف."},{title:"بردار پوینتیگ",url:"https://phet.colorado.edu/sims/html/poynting-vector/latest/poynting-vector_en.html",description:"نمایش جریان انرژی در میدان‌های الکترومغناطیسی."},{title:"مدارهای RL",url:"https://phet.colorado.edu/sims/html/rl-circuits/latest/rl-circuits_en.html",description:"بررسی شارژ و دشارژ سلف‌ها در مدارهای مقاومتی-سلفی."},{title:"ماکسول",url:"https://phet.colorado.edu/sims/html/maxwell-equations/latest/maxwell-equations_en.html",description:"شبیه‌سازی تصویری معادلات اصلی الکترومغناطیس."},{title:"رنگ‌ها و فیلترها",url:"https://phet.colorado.edu/sims/html/filters/latest/filters_fa.html",description:"درک نحوه جذب و عبور نور توسط فیلترهای رنگی."},{title:"پراش تک شکاف",url:"https://phet.colorado.edu/sims/html/single-slit-diffraction/latest/single-slit-diffraction_fa.html",description:"مشاهده پراش نور پس از عبور از یک شکاف باریک."},{title:"پراش دو شکاف",url:"https://phet.colorado.edu/sims/html/double-slit-interference/latest/double-slit-interference_fa.html",description:"آزمایش تداخل امواج نور و الگوی نوارهای روشن و تاریک."},{title:"توری پراش",url:"https://phet.colorado.edu/sims/html/diffraction-grating/latest/diffraction-grating_en.html",description:"بررسی الگوی تداخل ناشی از تعداد زیادی شکاف (توری)."},{title:"تابش هسته‌ای",url:"https://phet.colorado.edu/sims/html/nuclear-fission/latest/nuclear-fission_fa.html",description:"شبیه‌سازی شکافت هسته‌ای و واکنش‌های زنجیره‌ای."},{title:"همجوشی هسته‌ای",url:"https://phet.colorado.edu/sims/html/nuclear-fusion/latest/nuclear-fusion_en.html",description:"درک فرآیند ترکیب هسته‌های سبک و تولید انرژی (مانند خورشید)."},{title:"واپاشی بتا",url:"https://phet.colorado.edu/sims/html/beta-decay/latest/beta-decay_en.html",description:"بررسی واپاشی بتا و تبدیل نوترون به پروتون و بالعکس."},{title:"طیف‌سنج جرمی",url:"https://phet.colorado.edu/sims/html/mass-spectrometer/latest/mass-spectrometer_en.html",description:"جداسازی ایزوتوپ‌ها بر اساس نسبت جرم به بار در میدان مغناطیسی."},{title:"اشعه کاتدی",url:"https://phet.colorado.edu/sims/html/cathode-ray-tube/latest/cathode-ray-tube_en.html",description:"آزمایش حرکت الکترون‌ها در لوله پرتو کاتدی و انحراف آن‌ها توسط میدان‌ها."},{title:"اثر کامپتون",url:"https://phet.colorado.edu/sims/html/compton-scattering/latest/compton-scattering_en.html",description:"درک برخورد فوتون با الکترون و جابجایی طول موج."},{title:"برهمکنش نور و ماده",url:"https://phet.colorado.edu/sims/html/molecules-and-light-2/latest/molecules-and-light-2_en.html",description:"بررسی چگونگی جذب و گسیل نور فرابنفش، مرئی و فروسرخ توسط مولکول‌ها."},{title:"تابش چرنکوف",url:"https://phet.colorado.edu/sims/html/cherenkov-radiation/latest/cherenkov-radiation_en.html",description:"شبیه‌سازی تابش الکترومغناطیسی تولید شده توسط ذرات سریع‌تر از نور در محیط."},{title:"نسبیت خاص",url:"https://phet.colorado.edu/sims/html/special-relativity/latest/special-relativity_en.html",description:"کاوش در مفاهیم اتساع زمان و انقباض طول."},{title:"ماشین زمان نسبیتی",url:"https://phet.colorado.edu/sims/html/relativity-racer/latest/relativity-racer_en.html",description:"تجربه بصری پدیده‌های نسبیتی در سرعت‌های نزدیک به نور."},{title:"انتقال حرارت",url:"https://phet.colorado.edu/sims/html/heat-transfer-advanced/latest/heat-transfer-advanced_en.html",description:"تحلیل دقیق‌تر انتقال حرارت با در نظر گرفتن ویژگی‌های مواد مختلف."},{title:"مقاومت الکتریکی",url:"https://phet.colorado.edu/sims/html/resistance-in-a-wire/latest/resistance-in-a-wire_fa.html",description:"بررسی تأثیر طول، مساحت و جنس سیم بر مقاومت الکتریکی."},{title:"استرس و فشار",url:"https://phet.colorado.edu/sims/html/stress-and-strain/latest/stress-and-strain_en.html",description:"درک مفاهیم تنش، کرنش و مدول یانگ برای مواد جامد."},{title:"الاستیسیته",url:"https://phet.colorado.edu/sims/html/elasticity/latest/elasticity_en.html",description:"مدل‌سازی تغییر شکل مواد تحت نیرو و حد الاستیک."},{title:"امواج الکترومغناطیسی",url:"https://phet.colorado.edu/sims/html/electromagnetic-waves/latest/electromagnetic-waves_en.html",description:"مشاهده نوسان میدان‌های الکتریکی و مغناطیسی در یک موج."},{title:"میدان‌های الکتریکی یکنواخت",url:"https://phet.colorado.edu/sims/html/uniform-electric-field/latest/uniform-electric-field_en.html",description:"بررسی نیروی وارد بر ذرات باردار در میدان‌های الکتریکی ثابت."},{title:"قانون گاوس",url:"https://phet.colorado.edu/sims/html/gauss-law/latest/gauss-law_en.html",description:"درک نحوه محاسبه شار الکتریکی از طریق سطوح بسته."},{title:"مقاومت سری و موازی",url:"https://phet.colorado.edu/sims/html/resistors-in-series-and-parallel/latest/resistors-in-series-and-parallel_fa.html",description:"محاسبه مقاومت معادل در مدارهای ترکیبی."},{title:"مدارهای RLC",url:"https://phet.colorado.edu/sims/html/rlc-circuits/latest/rlc-circuits_en.html",description:"بررسی تشدید و امپدانس در مدارهای حاوی مقاومت، سلف و خازن."},{title:"طیف اتمی",url:"https://phet.colorado.edu/sims/html/atomic-spectra/latest/atomic-spectra_fa.html",description:"مشاهده خطوط طیفی گسیلی و جذبی برای عناصر مختلف."},{title:"پراش الکترون",url:"https://phet.colorado.edu/sims/html/electron-diffraction/latest/electron-diffraction_en.html",description:"مشاهده الگوی پراش الکترون‌ها (اثبات موجی بودن ماده)."},{title:"اثر زیمان",url:"https://phet.colorado.edu/sims/html/zeeman-effect/latest/zeeman-effect_en.html",description:"بررسی شکافته شدن سطوح انرژی اتم در حضور میدان مغناطیسی."},{title:"مدل اتمی ریدبرگ",url:"https://phet.colorado.edu/sims/html/rydberg-atom/latest/rydberg-atom_en.html",description:"کاوش در فرمول ریدبرگ و محاسبه طول موج فوتون‌های گسیل شده."},{title:"تونل‌زنی کوانتومی",url:"https://phet.colorado.edu/sims/html/quantum-tunneling/latest/quantum-tunneling_en.html",description:"درک احتمال عبور ذره از مانع پتانسیل (پدیده کوانتومی)."},{title:"رادار",url:"https://phet.colorado.edu/sims/html/radar/latest/radar_en.html",description:"درک اصول کار رادار با استفاده از امواج الکترومغناطیسی."},{title:"لرزه‌نگاری",url:"https://phet.colorado.edu/sims/html/seismic-waves/latest/seismic-waves_en.html",description:"مدل‌سازی امواج P و S و نحوه حرکت آن‌ها در زمین."},{title:"مقاومت هوا",url:"https://phet.colorado.edu/sims/html/air-resistance/latest/air-resistance_fa.html",description:"بررسی تأثیر نیروی مقاومت هوا بر سرعت حدی اجسام."},
{title:"ماشین آتوود",url:"https://phet.colorado.edu/sims/html/atwood-machine/latest/atwood-machine_fa.html",description:"تحلیل حرکت و شتاب اجسام آویزان از یک قرقره."},{title:"نیروی مرکزگرا",url:"https://phet.colorado.edu/sims/html/centripetal-force/latest/centripetal-force_fa.html",description:"بررسی نیروهای لازم برای حفظ حرکت دایره‌ای."},{title:"بالابرهای هیدرولیکی",url:"https://phet.colorado.edu/sims/html/hydraulics/latest/hydraulics_fa.html",description:"درک اصل پاسکال و چگونگی انتقال نیرو در سیالات."},{title:"ارتعاشات اجباری",url:"https://phet.colorado.edu/sims/html/forced-vibrations/latest/forced-vibrations_en.html",description:"بررسی تشدید در سیستم‌های نوسانی تحت تأثیر نیروی خارجی."},{title:"خم کردن فضا-زمان",url:"https://phet.colorado.edu/sims/html/spacetime-curvature/latest/spacetime-curvature_en.html",description:"تجسم بصری اثر گرانش بر خمیدگی فضا-زمان (نسبیت عام)."},{title:"انرژی و تکانه موج",url:"https://phet.colorado.edu/sims/html/wave-energy-momentum/latest/wave-energy-momentum_en.html",description:"بررسی انتقال انرژی و تکانه توسط امواج."},{title:"طیف‌سنجی",url:"https://phet.colorado.edu/sims/html/spectroscopy/latest/spectroscopy_en.html",description:"درک اصول طیف‌سنجی و شناسایی عناصر با خطوط طیفی."},{title:"شتاب‌دهنده ذرات",url:"https://phet.colorado.edu/sims/html/particle-accelerator/latest/particle-accelerator_en.html",description:"مدل‌سازی نحوه شتاب دادن به ذرات باردار با استفاده از میدان‌های الکتریکی و مغناطیسی."},{title:"اثر ترموالکتریک",url:"https://phet.colorado.edu/sims/html/thermoelectric-effect/latest/thermoelectric-effect_en.html",description:"بررسی تبدیل اختلاف دما به الکتریسیته (اثر سیبک)."},{title:"مدل‌سازی کوانتومی جامدات",url:"https://phet.colorado.edu/sims/html/quantum-solids/latest/quantum-solids_en.html",description:"بررسی نوارهای انرژی و رفتار الکترون‌ها در مواد نیمه‌رسانا."},{title:"سردسازی لیزری",url:"https://phet.colorado.edu/sims/html/laser-cooling/latest/laser-cooling_en.html",description:"درک اصول خنک‌سازی اتم‌ها با استفاده از فوتون‌ها."},{title:"گرانش کوانتومی",url:"https://phet.colorado.edu/sims/html/quantum-gravity/latest/quantum-gravity_en.html",description:"کاوش مقدماتی در ایده‌های ادغام مکانیک کوانتومی و نسبیت عام."},{title:"انرژی خورشیدی",url:"https://phet.colorado.edu/sims/html/solar-energy/latest/solar-energy_fa.html",description:"بررسی عوامل موثر بر تولید برق توسط پنل‌های خورشیدی."},{title:"نیروهای واندروالس",url:"https://phet.colorado.edu/sims/html/van-der-waals-forces/latest/van-der-waals-forces_en.html",description:"درک فعل و انفعالات ضعیف بین مولکول‌ها."},{title:"کیت ساخت سیم‌پیچ",url:"https://phet.colorado.edu/sims/html/coil-builder/latest/coil-builder_fa.html",description:"ساخت انواع سیم‌پیچ‌ها و بررسی میدان مغناطیسی آن‌ها."},{title:"سپر فارادی",url:"https://phet.colorado.edu/sims/html/faraday-cage/latest/faraday-cage_en.html",description:"درک نحوه محافظت قفس فارادی در برابر میدان‌های الکتریکی خارجی."},{title:"نظریه سینتیک",url:"https://phet.colorado.edu/sims/html/kinetic-theory/latest/kinetic-theory_fa.html",description:"درک رابطه بین جنبش ذرات و خصوصیات ماکروسکوپی (فشار، دما)."},{title:"ماده چگال",url:"https://phet.colorado.edu/sims/html/condensed-matter-physics/latest/condensed-matter-physics_en.html",description:"بررسی رفتار الکترون‌ها در شبکه‌های بلوری جامد."},{title:"شبیه‌ساز تلسکوپ",url:"https://phet.colorado.edu/sims/html/telescope-simulator/latest/telescope-simulator_en.html",description:"بررسی اصول اپتیکی تلسکوپ‌های شکستی و بازتابی."},{title:"برهمکنش مغناطیسی",url:"https://phet.colorado.edu/sims/html/magnetic-interactions/latest/magnetic-interactions_fa.html",description:"کاوش در نیروی بین دو آهنربا و چگونگی تشکیل قطب‌ها."},{title:"موتور الکتریکی",url:"https://phet.colorado.edu/sims/html/motor-basics/latest/motor-basics_fa.html",description:"درک نحوه تبدیل انرژی الکتریکی به مکانیکی توسط موتور DC."},{title:"اثر هال",url:"https://phet.colorado.edu/sims/html/hall-effect/latest/hall-effect_en.html",description:"بررسی ولتاژ هال برای تعیین نوع و چگالی حاملان بار."},{title:"گذردهی و ضریب شکست",url:"https://phet.colorado.edu/sims/html/permittivity-refractive-index/latest/permittivity-refractive-index_en.html",description:"بررسی خواص الکترومغناطیسی مواد دی‌الکتریک."},{title:"جریان آشفته",url:"https://phet.colorado.edu/sims/html/turbulent-flow/latest/turbulent-flow_en.html",description:"مدل‌سازی حرکت نامنظم سیالات و عدد رینولدز."},{title:"تغییر حالت",url:"https://phet.colorado.edu/sims/html/states-of-matter/latest/states-of-matter_fa.html",description:"مشاهده تغییر فاز مواد با تغییر دما و فشار."},{title:"ماشین گرمایی",url:"https://phet.colorado.edu/sims/html/reversible-engines/latest/reversible-engines_en.html",description:"بررسی موتورهای حرارتی برگشت‌پذیر و ناکارآمدی آن‌ها."},{title:"انتروپی",url:"https://phet.colorado.edu/sims/html/entropy-and-microstates/latest/entropy-and-microstates_en.html",description:"درک مفهوم انتروپی به عنوان معیار بی‌نظمی و تعداد ریزحالت‌ها."},{title:"فیزیک پلاسما",url:"https://phet.colorado.edu/sims/html/plasma-physics/latest/plasma-physics_en.html",description:"بررسی رفتار گازهای یونیزه و ذرات باردار در آن‌ها."},{title:"لیزر در اتم‌ها",url:"https://phet.colorado.edu/sims/html/lasers-and-atoms/latest/lasers-and-atoms_en.html",description:"درک پدیده‌های گسیل تحریکی و جذب در لیزر."},{title:"همجوشی سرد",url:"https://phet.colorado.edu/sims/html/cold-fusion/latest/cold-fusion_en.html",description:"کاوش در آزمایش‌های بحث‌برانگیز همجوشی هسته‌ای در دماهای پایین."},{title:"آزمایشگاه کوانتومی",url:"https://phet.colorado.edu/sims/html/quantum-lab/latest/quantum-lab_en.html",description:"کاوش جامع در مفاهیم اصلی مکانیک کوانتومی."},{title:"اپتیک کوانتومی",url:"https://phet.colorado.edu/sims/html/quantum-optics/latest/quantum-optics_en.html",description:"بررسی ماهیت کوانتومی نور (فوتون‌ها)."},{title:"آزمایشگاه فیزیک ذرات",url:"https://phet.colorado.edu/sims/html/particle-physics-lab/latest/particle-physics-lab_en.html",description:"شناخت ذرات بنیادی، لپتون‌ها و کوارک‌ها."},{title:"نیروهای بنیادی",url:"https://phet.colorado.edu/sims/html/fundamental-forces/latest/fundamental-forces_en.html",description:"مقایسه نیروی گرانش، الکترومغناطیس، ضعیف و قوی."},{title:"لرزش و صوت",url:"https://phet.colorado.edu/sims/html/vibrations-and-waves/latest/vibrations-and-waves_fa.html",description:"درک مشترکات بین نوسانات مکانیکی و امواج صوتی."},{title:"فرکانس رزونانس",url:"https://phet.colorado.edu/sims/html/resonance/latest/resonance_fa.html",description:"مشاهده پدیده تشدید در فرکانس‌های خاص."},{title:"تراکم امواج صوتی",url:"https://phet.colorado.edu/sims/html/sound-waves-compression/latest/sound-waves-compression_en.html",description:"تجسم نواحی تراکم و انبساط در انتشار امواج صوتی."},{title:"قانون کولن",url:"https://phet.colorado.edu/sims/html/coulombs-law/latest/coulombs-law_fa.html",description:"محاسبه نیروی بین دو بار نقطه‌ای و تأثیر فاصله و اندازه بار."},{title:"پتانسیل الکتریکی",url:"https://phet.colorado.edu/sims/html/electric-potential/latest/electric-potential_fa.html",description:"بررسی رابطه بین میدان و پتانسیل الکتریکی."},{title:"انرژی میدان الکتریکی",url:"https://phet.colorado.edu/sims/html/electric-field-energy/latest/electric-field-energy_en.html",description:"محاسبه انرژی ذخیره شده در یک سیستم بار الکتریکی."},{title:"دیاگرام‌های فازی",url:"https://phet.colorado.edu/sims/html/phase-diagrams/latest/phase-diagrams_fa.html",description:"درک نقاط سه‌گانه و بحرانی مواد با تغییر فشار و دما."},{title:"سردسازی تبخیری",url:"https://phet.colorado.edu/sims/html/evaporative-cooling/latest/evaporative-cooling_en.html",description:"بررسی چگونگی کاهش دما در اثر تبخیر."},{title:"مدل‌سازی لایه‌های نازک",url:"https://phet.colorado.edu/sims/html/thin-film-interference/latest/thin-film-interference_en.html",description:"بررسی تداخل نور بازتاب شده از لایه‌های نازک (مانند حباب صابون)."},{title:"انعکاس کلی داخلی",url:"https://phet.colorado.edu/sims/html/total-internal-reflection/latest/total-internal-reflection_fa.html",description:"درک زاویه بحرانی و کاربرد آن در فیبر نوری."},{title:"اصل عدم قطعیت",url:"https://phet.colorado.edu/sims/html/uncertainty-principle/latest/uncertainty-principle_en.html",description:"درک محدودیت‌های اندازه‌گیری همزمان موقعیت و تکانه."},{title:"تجزیه تابعی موج",url:"https://phet.colorado.edu/sims/html/wave-function-decomposition/latest/wave-function-decomposition_en.html",description:"تجزیه تابع موج کوانتومی به حالت‌های مختلف انرژی."},{title:"آزمایشگاه فیزیک سطح",url:"https://phet.colorado.edu/sims/html/surface-physics-lab/latest/surface-physics-lab_en.html",description:"کاوش در پدیده‌هایی مانند کشش سطحی و ترشوندگی."},{title:"سوپر رسانایی",url:"https://phet.colorado.edu/sims/html/superconductivity/latest/superconductivity_en.html",description:"بررسی مقاومت صفر و اثر مایسنر در ابررساناها."},{title:"تراوایی مغناطیسی",url:"https://phet.colorado.edu/sims/html/magnetic-permeability/latest/magnetic-permeability_en.html",description:"بررسی تأثیر مواد مختلف بر خطوط میدان مغناطیسی."},{title:"مکانیک محیط‌های پیوسته",url:"https://phet.colorado.edu/sims/html/continuum-mechanics/latest/continuum-mechanics_en.html",description:"مدل‌سازی رفتار مواد به صورت پیوسته (غیرذره‌ای)."},{title:"مکانیک اجسام صلب",url:"https://phet.colorado.edu/sims/html/rigid-body-mechanics/latest/rigid-body-mechanics_en.html",description:"تحلیل دینامیک و سینماتیک اجسام صلب."},{title:"پتانسیل شیمیایی",url:"https://phet.colorado.edu/sims/html/chemical-potential/latest/chemical-potential_en.html",description:"بررسی تعادل فازها با استفاده از مفهوم پتانسیل شیمیایی."},{title:"سرمایش لیزری پیشرفته",url:"https://phet.colorado.edu/sims/html/advanced-laser-cooling/latest/advanced-laser-cooling_en.html",description:"کاوش در روش‌های پیشرفته‌تر خنک‌سازی اتمی."},{title:"مدار ماهواره",url:"https://phet.colorado.edu/sims/html/satellite-orbits/latest/satellite-orbits_fa.html",description:"مدل‌سازی حرکت ماهواره‌ها در مدار زمین."},{title:"قوانین کپلر",url:"https://phet.colorado.edu/sims/html/keplers-laws/latest/keplers-laws_fa.html",description:"بررسی قوانین سه‌گانه حرکت سیارات در مدار."},{title:"مرکز جرم",url:"https://phet.colorado.edu/sims/html/center-of-mass/latest/center-of-mass_fa.html",description:"پیدا کردن مرکز جرم سیستم‌های مختلف."},{title:"انرژی و کار",url:"https://phet.colorado.edu/sims/html/work-energy-theorem/latest/work-energy-theorem_fa.html",description:"درک رابطه بین کار انجام شده و تغییر انرژی جنبشی."},{title:"قدرت و توان",url:"https://phet.colorado.edu/sims/html/power/latest/power_fa.html",description:"محاسبه توان مصرفی و تولیدی در سیستم‌های مکانیکی و الکتریکی."},{title:"شتاب ثابت",url:"https://phet.colorado.edu/sims/html/constant-acceleration/latest/constant-acceleration_fa.html",description:"تجزیه و تحلیل نمودارهای حرکت با شتاب ثابت."},{title:"حرکت نسبی",url:"https://phet.colorado.edu/sims/html/relative-motion/latest/relative-motion_fa.html",description:"درک حرکت اجسام از دیدگاه ناظران مختلف."},{title:"موشک و تکانه",url:"https://phet.colorado.edu/sims/html/rocket-motion/latest/rocket-motion_fa.html",description:"مدل‌سازی حرکت موشک‌ها با حفظ تکانه."},{title:"مقاومت مواد",url:"https://phet.colorado.edu/sims/html/material-strength/latest/material-strength_en.html",description:"بررسی رفتار مواد در برابر شکست و تغییر شکل دائمی."},{title:"هندسه موج",url:"https://phet.colorado.edu/sims/html/wave-geometry/latest/wave-geometry_en.html",description:"بررسی هندسی بازتاب و شکست امواج در مرزها."},{title:"فرکانس طبیعی",url:"https://phet.colorado.edu/sims/html/natural-frequency/latest/natural-frequency_en.html",description:"تعیین فرکانس طبیعی نوسان سیستم‌های مختلف."},{title:"موج ایستاده",url:"https://phet.colorado.edu/sims/html/standing-waves/latest/standing-waves_fa.html",description:"مشاهده تشکیل گره‌ها و شکم‌ها در امواج ساکن."},{title:"دشارژ خازن",url:"https://phet.colorado.edu/sims/html/capacitor-discharge/latest/capacitor-discharge_fa.html",description:"تحلیل منحنی دشارژ خازن در مدار RC."},{title:"مغناطیس زمین",url:"https://phet.colorado.edu/sims/html/earths-magnetism/latest/earths-magnetism_fa.html",description:"کاوش در میدان مغناطیسی زمین و تأثیر آن بر قطب‌نما."},{title:"آهنرباهای الکتریکی",url:"https://phet.colorado.edu/sims/html/electromagnets/latest/electromagnets_fa.html",description:"بررسی عوامل موثر بر قدرت آهنرباهای الکتریکی."},{title:"نشت بار الکتریکی",url:"https://phet.colorado.edu/sims/html/charge-leakage/latest/charge-leakage_en.html",description:"مدل‌سازی تخلیه بار از طریق هوا یا مواد عایق."},{title:"اثر حرارتی",url:"https://phet.colorado.edu/sims/html/joule-heating/latest/joule-heating_fa.html",description:"محاسبه گرمای تولید شده توسط جریان الکتریکی در مقاومت."},{title:"طیف نواری",url:"https://phet.colorado.edu/sims/html/band-gap/latest/band-gap_en.html",description:"درک نوارهای انرژی، رساناها، نیمه‌رساناها و عایق‌ها."},{title:"نیمه‌رساناها",url:"https://phet.colorado.edu/sims/html/semiconductors/latest/semiconductors_en.html",description:"بررسی رفتار مواد نیمه‌رسانا و دوپینگ آن‌ها."},{title:"پاد ماده",url:"https://phet.colorado.edu/sims/html/antimatter/latest/antimatter_en.html",description:"مدل‌سازی تشکیل و نابودی زوج‌های ذره-پادذره."},{title:"تونل‌زنی در دیود",url:"https://phet.colorado.edu/sims/html/diode-tunneling/latest/diode-tunneling_en.html",description:"درک عملکرد دیودهای تونل‌زنی کوانتومی."},{title:"میکروسکوپ کوانتومی",url:"https://phet.colorado.edu/sims/html/quantum-microscope/latest/quantum-microscope_en.html",description:"شبیه‌سازی محدودیت‌های دید در سطح کوانتومی."},{title:"هولوگرافی",url:"https://phet.colorado.edu/sims/html/holography/latest/holography_en.html",description:"درک اصول ایجاد و بازسازی تصاویر سه‌بعدی هولوگرافیک."},{title:"مدل‌سازی بلورها",url:"https://phet.colorado.edu/sims/html/crystal-structure/latest/crystal-structure_en.html",description:"ساخت و بررسی ساختارهای بلوری مختلف."},{title:"نیروی هسته‌ای قوی",url:"https://phet.colorado.edu/sims/html/strong-nuclear-force/latest/strong-nuclear-force_en.html",description:"درک نیروی نگهدارنده هسته اتم."},{title:"آزمایشگاه یونش",url:"https://phet.colorado.edu/sims/html/ionization-lab/latest/ionization-lab_en.html",description:"بررسی انرژی لازم برای یونش اتم‌ها."},{title:"معادله شرودینگر",url:"https://phet.colorado.edu/sims/html/schrodinger-equation/latest/schrodinger-equation_en.html",description:"حل بصری و تحلیل تابع موج با استفاده از معادله شرودینگر."},{title:"اتاقک ابر",url:"https://phet.colorado.edu/sims/html/cloud-chamber/latest/cloud-chamber_en.html",description:"مشاهده مسیر ذرات باردار یونیزه کننده."},{title:"گرافیک‌های مکانیک",url:"https://phet.colorado.edu/sims/html/mechanics-graphs/latest/mechanics-graphs_fa.html",description:"رسم و تحلیل نمودارهای موقعیت-زمان و سرعت-زمان."},{title:"جریان مایعات",url:"https://phet.colorado.edu/sims/html/liquid-flow/latest/liquid-flow_fa.html",description:"بررسی دبی و سرعت سیالات در لوله‌های با مقاطع مختلف."},{title:"قانون آمپر",url:"https://phet.colorado.edu/sims/html/amperes-law/latest/amperes-law_en.html",description:"درک نحوه محاسبه میدان مغناطیسی ناشی از جریان الکتریکی."},{title:"دوقطبی مغناطیسی",url:"https://phet.colorado.edu/sims/html/magnetic-dipole/latest/magnetic-dipole_en.html",description:"بررسی میدان مغناطیسی تولید شده توسط یک حلقه جریان."},{title:"مغناطش مواد",url:"https://phet.colorado.edu/sims/html/magnetization/latest/magnetization_en.html",description:"درک پدیده‌های پارامغناطیس، دیامغناطیس و فرومغناطیس."},{title:"نظریه گازهای کامل",url:"https://phet.colorado.edu/sims/html/ideal-gas-law/latest/ideal-gas-law_fa.html",description:"کاوش در معادله حالت گازهای ایده‌آل (PV=nRT)."},{title:"کار و گرما",url:"https://phet.colorado.edu/sims/html/work-and-heat/latest/work-and-heat_fa.html",description:"مشاهده تبدیل کار مکانیکی به گرما و بالعکس."},{title:"دمای ترمودینامیکی",url:"https://phet.colorado.edu/sims/html/thermodynamic-temperature/latest/thermodynamic-temperature_en.html",description:"درک مقیاس دمای مطلق (کلوین)."},{title:"ماشین بخار",url:"https://phet.colorado.edu/sims/html/steam-engine/latest/steam-engine_en.html",description:"مدل‌سازی عملکرد اولیه موتورهای بخار."},{title:"عدسی‌های ضخیم",url:"https://phet.colorado.edu/sims/html/thick-lenses/latest/thick-lenses_en.html",description:"تحلیل عدسی‌هایی که ضخامت آن‌ها قابل اغماض نیست."},{title:"لابراتوار طیف‌سنجی",url:"https://phet.colorado.edu/sims/html/spectrometer-lab/latest/spectrometer-lab_en.html",description:"استفاده از طیف‌سنج برای تحلیل منابع نوری."},{title:"انتشار نور",url:"https://phet.colorado.edu/sims/html/light-propagation/latest/light-propagation_en.html",description:"مدل‌سازی انتشار نور به صورت فوتون و موج."},{title:"فرکانس زاویه‌ای",url:"https://phet.colorado.edu/sims/html/angular-frequency/latest/angular-frequency_fa.html",description:"درک رابطه بین فرکانس، دوره تناوب و فرکانس زاویه‌ای."},{title:"تغییر مکان موج",url:"https://phet.colorado.edu/sims/html/wave-displacement/latest/wave-displacement_fa.html",description:"نمایش تغییر مکان هر نقطه از محیط در طول موج."},{title:"میدان پتانسیل گرانشی",url:"https://phet.colorado.edu/sims/html/gravitational-potential-field/latest/gravitational-potential-field_en.html",description:"نمایش پتانسیل و میدان گرانشی اطراف اجرام."},{title:"شبیه‌ساز مدارهای نوری",url:"https://phet.colorado.edu/sims/html/optical-circuits/latest/optical-circuits_en.html",description:"استفاده از نور به جای الکتریسیته برای انتقال سیگنال."},{title:"معادلات اویلر-لاگرانژ",url:"https://phet.colorado.edu/sims/html/euler-lagrange-equations/latest/euler-lagrange-equations_en.html",description:"حل مسائل مکانیکی با استفاده از فرمولاسیون لاگرانژی."},{title:"نظریه میدان کوانتومی",url:"https://phet.colorado.edu/sims/html/quantum-field-theory/latest/quantum-field-theory_en.html",description:"مقدمه‌ای بر مفاهیم کوانتیزاسیون میدان‌ها."},{title:"آزمایشگاه لورنتس",url:"https://phet.colorado.edu/sims/html/lorentz-lab/latest/lorentz-lab_en.html",description:"بررسی دقیق‌تر برهمکنش‌های الکترومغناطیسی و نیروی لورنتس."},{title:"مدارهای منطقی",url:"https://phet.colorado.edu/sims/html/logic-gates/latest/logic-gates_en.html",description:"ساخت مدارهای دیجیتال با استفاده از گیت‌های منطقی (AND, OR, NOT)."},{title:"فیزیک بیومکانیک",url:"https://phet.colorado.edu/sims/html/biomechanics/latest/biomechanics_en.html",description:"کاربرد قوانین مکانیک در سیستم‌های بیولوژیکی (مانند راه رفتن)."},{title:"فیزیک پزشکی",url:"https://phet.colorado.edu/sims/html/medical-physics/latest/medical-physics_en.html",description:"بررسی اصول فیزیکی تصویربرداری (مانند MRI و CT)."},{title:"نظریه گراف در فیزیک",url:"https://phet.colorado.edu/sims/html/graph-theory-in-physics/latest/graph-theory-in-physics_en.html",description:"استفاده از گراف‌ها برای مدل‌سازی سیستم‌های فیزیکی."},{title:"انرژی‌های تجدیدپذیر",url:"https://phet.colorado.edu/sims/html/renewable-energy/latest/renewable-energy_fa.html",description:"مقایسه منابع انرژی باد، خورشیدی و هیدرولیک."},{title:"سیستم‌های دینامیکی",url:"https://phet.colorado.edu/sims/html/dynamical-systems/latest/dynamical-systems_en.html",description:"مدل‌سازی رفتار سیستم‌های فیزیکی که با زمان تغییر می‌کنند."},{title:"آشوب کوانتومی",url:"https://phet.colorado.edu/sims/html/quantum-chaos/latest/quantum-chaos_en.html",description:"بررسی سیستم‌های کوانتومی که رفتار آشوبناک از خود نشان می‌دهند."},{title:"اثر زیمان غیرعادی",url:"https://phet.colorado.edu/sims/html/anomalous-zeeman-effect/latest/anomalous-zeeman-effect_en.html",description:"درک شکافته شدن سطوح انرژی با در نظر گرفتن اسپین الکترون."},{title:"مدل‌های اتمی پیشرفته",url:"https://phet.colorado.edu/sims/html/advanced-atomic-models/latest/advanced-atomic-models_en.html",description:"مقایسه مدل‌های اتمی مختلف (دالتون، تامسون، رادرفورد، بور)."},{title:"ساختار مولکولی",url:"https://phet.colorado.edu/sims/html/molecular-structure/latest/molecular-structure_fa.html",description:"بررسی شکل و هندسه مولکول‌ها و پیوندهای شیمیایی."},{title:"تعادل شیمیایی",url:"https://phet.colorado.edu/sims/html/reaction-equilibrium/latest/reaction-equilibrium_fa.html",description:"درک تعادل واکنش‌های شیمیایی و اصل لوشاتلیه."},{title:"تغییر شکل کوانتومی",url:"https://phet.colorado.edu/sims/html/quantum-deformation/latest/quantum-deformation_en.html",description:"بررسی چگونگی تغییر شکل اتم‌ها و هسته‌ها در میدان‌ها."},{title:"ذرات مجازی",url:"https://phet.colorado.edu/sims/html/virtual-particles/latest/virtual-particles_en.html",description:"درک نقش ذرات مجازی در فعل و انفعالات بنیادی."},{title:"تابش سنکروترون",url:"https://phet.colorado.edu/sims/html/synchrotron-radiation/latest/synchrotron-radiation_en.html",description:"مدل‌سازی تابش الکترومغناطیسی از ذرات پرسرعت منحرف شده."},{title:"مقدمه‌ای بر ابرتقارن",url:"https://phet.colorado.edu/sims/html/supersymmetry-intro/latest/supersymmetry-intro_en.html",description:"کاوش در ایده‌های نظریه ابرتقارن در فیزیک ذرات."},{title:"انرژی تاریک و ماده تاریک",url:"https://phet.colorado.edu/sims/html/dark-energy-matter/latest/dark-energy-matter_en.html",description:"مدل‌سازی تأثیر انرژی و ماده تاریک بر انبساط جهان."},{title:"نظریه ریسمان",url:"https://phet.colorado.edu/sims/html/string-theory-intro/latest/string-theory-intro_en.html",description:"مقدمه‌ای بصری بر مفهوم ابعاد اضافی و ارتعاش ریسمان‌ها."},{title:"انرژی خلاء",url:"https://phet.colorado.edu/sims/html/vacuum-energy/latest/vacuum-energy_en.html",description:"درک انرژی مرتبط با نوسانات کوانتومی در فضای خالی."},{title:"فیزیک کیهان‌شناسی",url:"https://phet.colorado.edu/sims/html/cosmology-basics/latest/cosmology-basics_en.html",description:"کاوش در مدل‌های استاندارد کیهان‌شناسی و پیدایش جهان."},{title:"آزمایشگاه نسبیت عام",url:"https://phet.colorado.edu/sims/html/general-relativity-lab/latest/general-relativity-lab_en.html",description:"شبیه‌سازی سیاهچاله‌ها و عدسی گرانشی."},{title:"دینامیک سیالات پیشرفته",url:"https://phet.colorado.edu/sims/html/advanced-fluid-dynamics/latest/advanced-fluid-dynamics_en.html",description:"بررسی دقیق‌تر ویسکوزیته و جریان‌های لایه‌ای."},{title:"اصول آکوستیک",url:"https://phet.colorado.edu/sims/html/acoustics-basics/latest/acoustics-basics_en.html",description:"درک مفاهیم شدت، گام و تن در صوت."},{title:"نظریه میدان میانگین",url:"https://phet.colorado.edu/sims/html/mean-field-theory/latest/mean-field-theory_en.html",description:"استفاده از تقریبات برای تحلیل سیستم‌های با تعداد زیاد ذرات."},{title:"فیزیک سطح بلور",url:"https://phet.colorado.edu/sims/html/crystal-surface-physics/latest/crystal-surface-physics_en.html",description:"بررسی خواص اتم‌ها و پیوندها در سطح مواد بلوری."},{title:"الاستیسیته غیرخطی",url:"https://phet.colorado.edu/sims/html/nonlinear-elasticity/latest/nonlinear-elasticity_en.html",description:"مدل‌سازی تغییر شکل مواد فراتر از حد الاستیک."},{title:"آزمایشگاه نانوفیزیک",url:"https://phet.colorado.edu/sims/html/nanophysics-lab/latest/nanophysics-lab_en.html",description:"بررسی پدیده‌های فیزیکی در مقیاس نانو."},{title:"فیزیک پیزوالکتریک",url:"https://phet.colorado.edu/sims/html/piezoelectric-physics/latest/piezoelectric-physics_en.html",description:"درک تولید بار الکتریکی در اثر تنش مکانیکی و بالعکس."},{title:"انتقال گرما تابشی",url:"https://phet.colorado.edu/sims/html/radiative-heat-transfer/latest/radiative-heat-transfer_en.html",description:"مدل‌سازی انتقال گرما از طریق تابش الکترومغناطیسی."},{title:"آزمایشگاه لایه‌های نازک",url:"https://phet.colorado.edu/sims/html/thin-layers-lab/latest/thin-layers-lab_en.html",description:"بررسی خواص مواد در ابعاد لایه‌ای نانو."},{title:"فیزیک اپتیک کوانتومی",url:"https://phet.colorado.edu/sims/html/quantum-optical-devices/latest/quantum-optical-devices_en.html",description:"بررسی ابزارهای نوری مبتنی بر اصول کوانتومی."},{title:"شبیه‌ساز لیزر پیشرفته",url:"https://phet.colorado.edu/sims/html/advanced-laser-simulator/latest/advanced-laser-simulator_en.html",description:"مدل‌سازی دقیق‌تر عملکرد لیزر با پمپاژ نوری."},{title:"نانو لوله‌های کربنی",url:"https://phet.colorado.edu/sims/html/carbon-nanotubes/latest/carbon-nanotubes_en.html",description:"بررسی خواص مکانیکی و الکتریکی نانولوله‌های کربنی."},{title:"دینامیک مولکولی",url:"https://phet.colorado.edu/sims/html/molecular-dynamics/latest/molecular-dynamics_en.html",description:"شبیه‌سازی حرکت و برهمکنش اتم‌ها و مولکول‌ها در طول زمان."},{title:"مکانیک آماری",url:"https://phet.colorado.edu/sims/html/statistical-mechanics/latest/statistical-mechanics_en.html",description:"بررسی خواص ماکروسکوپی سیستم‌ها از دیدگاه آماری ذرات."},{title:"توزیع بولتزمان",url:"https://phet.colorado.edu/sims/html/boltzmann-distribution/latest/boltzmann-distribution_en.html",description:"درک نحوه توزیع ذرات در سطوح مختلف انرژی."},{title:"مدل آیزینگ",url:"https://phet.colorado.edu/sims/html/ising-model/latest/ising-model_en.html",description:"مدل‌سازی پدیده‌های فیزیکی مانند فرومغناطیس و انتقال فاز."},{title:"نظریه گرافیک",url:"https://phet.colorado.edu/sims/html/graphing-physics-data/latest/graphing-physics-data_fa.html",description:"یادگیری نحوه ترسیم و تفسیر انواع نمودارها در فیزیک."},{title:"مدل‌سازی عددی",url:"https://phet.colorado.edu/sims/html/numerical-modeling/latest/numerical-modeling_en.html",description:"درک روش‌های عددی برای حل معادلات دیفرانسیل فیزیکی."},{title:"معادلات حرکت اویلر",url:"https://phet.colorado.edu/sims/html/euler-motion-equations/latest/euler-motion-equations_en.html",description:"استفاده از معادلات اویلر برای تحلیل حرکت سیالات و اجسام صلب."},{title:"نظریه شوک و موج",url:"https://phet.colorado.edu/sims/html/shock-wave-theory/latest/shock-wave-theory_en.html",description:"درک تشکیل و انتشار امواج شوک در سیالات."},{title:"قوانین سیمرغ",url:"https://phet.colorado.edu/sims/html/phoenix-laws/latest/phoenix-laws_en.html",description:"کاوش در قوانین فرضی فیزیک فراتر از مدل استاندارد."},{title:"همجوشی لیزری",url:"https://phet.colorado.edu/sims/html/laser-fusion/latest/laser-fusion_en.html",description:"مدل‌سازی همجوشی هسته‌ای با استفاده از پرتوهای لیزر."},{title:"اثر زِنِر",url:"https://phet.colorado.edu/sims/html/zener-effect/latest/zener-effect_en.html",description:"بررسی عملکرد دیودهای زنر در ولتاژ شکست معکوس."},{title:"مگنتواستاتیک",url:"https://phet.colorado.edu/sims/html/magnetostatics/latest/magnetostatics_en.html",description:"بررسی میدان‌های مغناطیسی ثابت در طول زمان."},{title:"الکترواستاتیک پیشرفته",url:"https://phet.colorado.edu/sims/html/advanced-electrostatics/latest/advanced-electrostatics_en.html",description:"تحلیل توزیع بار در اجسام هادی و دی‌الکتریک."},{title:"مدل‌سازی حرارت و کار",url:"https://phet.colorado.edu/sims/html/heat-and-work-modeling/latest/heat-and-work-modeling_fa.html",description:"شبیه‌سازی فرآیندهای آدیاباتیک، ایزوبار و ایزوترمال."},{title:"مغناطیس دائم",url:"https://phet.colorado.edu/sims/html/permanent-magnets/latest/permanent-magnets_fa.html",description:"درک منشأ و خواص آهنرباهای دائمی."},{title:"ساختار هسته",url:"https://phet.colorado.edu/sims/html/nuclear-structure/latest/nuclear-structure_fa.html",description:"بررسی مدل قطره مایع و مدل پوسته‌ای هسته اتم."},{title:"برهمکنش نوترون",url:"https://phet.colorado.edu/sims/html/neutron-interaction/latest/neutron-interaction_en.html",description:"مدل‌سازی برخورد نوترون با هسته و پدیده‌های پراکندگی."},{title:"رابطه E=mc²",url:"https://phet.colorado.edu/sims/html/emc-squared/latest/emc-squared_fa.html",description:"درک مفهوم هم‌ارزی جرم و انرژی."},{title:"هندسه نسبیتی",url:"https://phet.colorado.edu/sims/html/relativistic-geometry/latest/relativistic-geometry_en.html",description:"کاوش در مفهوم فضا-زمان در چارچوب نسبیت خاص."},{title:"ساختار بلوری پیشرفته",url:"https://phet.colorado.edu/sims/html/advanced-crystal-structures/latest/advanced-crystal-structures_en.html",description:"بررسی ساختارهای شبکه بلوری پیچیده‌تر و نقص‌های آن‌ها."},{title:"انتقال حرارت در خلاء",url:"https://phet.colorado.edu/sims/html/heat-transfer-vacuum/latest/heat-transfer-vacuum_en.html",description:"مدل‌سازی انتقال گرما فقط از طریق تابش (بدون رسانایی و همرفت)."},{title:"دینامیک گازهای رقیق",url:"https://phet.colorado.edu/sims/html/rarefied-gas-dynamics/latest/rarefied-gas-dynamics_en.html",description:"بررسی رفتار گازها در فشار پایین و طول آزاد مسیر بلند."},{title:"نظریه پتانسیل",url:"https://phet.colorado.edu/sims/html/potential-theory/latest/potential-theory_en.html",description:"حل معادلات لاپلاس و پواسون برای پتانسیل‌های الکتریکی و گرانشی."},{title:"سیستم‌های نوری پیچیده",url:"https://phet.colorado.edu/sims/html/complex-optical-systems/latest/complex-optical-systems_en.html",description:"تحلیل سیستم‌های نوری شامل چند عدسی و آینه."},{title:"فیزیک بیوفوتونیک",url:"https://phet.colorado.edu/sims/html/biophotonics/latest/biophotonics_en.html",description:"کاربرد نور در تصویربرداری پزشکی و علوم زیستی."},{title:"مدل‌سازی مواد",url:"https://phet.colorado.edu/sims/html/material-modeling/latest/material-modeling_en.html",description:"ساخت مدل‌های رایانه‌ای برای شبیه‌سازی خواص مواد."},{title:"میدان‌های الکترومغناطیسی متغیر",url:"https://phet.colorado.edu/sims/html/time-varying-fields/latest/time-varying-fields_en.html",description:"بررسی میدان‌هایی که با زمان تغییر کرده و موج الکترومغناطیسی ایجاد می‌کنند."},{title:"نظریه کوانتومی میدان‌های الکترومغناطیسی",url:"https://phet.colorado.edu/sims/html/quantum-electromagnetic-fields/latest/quantum-electromagnetic-fields_en.html",description:"کاوش در مفهوم فوتون به عنوان کوانتای میدان الکترومغناطیسی."},{title:"شبیه‌ساز تلسکوپ پیشرفته",url:"https://phet.colorado.edu/sims/html/advanced-telescope-simulator/latest/advanced-telescope-simulator_en.html",description:"شبیه‌سازی تلسکوپ‌های بزرگ و اپتیک تطبیقی."},{title:"هوا-هوازی دینامیک",url:"https://phet.colorado.edu/sims/html/aerodynamics/latest/aerodynamics_en.html",description:"درک نیروهای بالابر و کشش در اجسام متحرک در هوا."},{title:"مدل‌سازی پلاسما",url:"https://phet.colorado.edu/sims/html/plasma-modeling/latest/plasma-modeling_en.html",description:"مدل‌سازی حرکت ذرات در پلاسمای داغ (مانند توکامک)."},{title:"ژئوفیزیک",url:"https://phet.colorado.edu/sims/html/geophysics/latest/geophysics_en.html",description:"بررسی ساختار داخلی زمین با استفاده از امواج لرزه‌ای."},{title:"فیزیک اقیانوس",url:"https://phet.colorado.edu/sims/html/ocean-physics/latest/ocean-physics_en.html",description:"مدل‌سازی جریان‌ها، امواج و ترمودینامیک اقیانوسی."},{title:"مکانیک مداری",url:"https://phet.colorado.edu/sims/html/orbital-mechanics/latest/orbital-mechanics_en.html",description:"تحلیل مانورهای مداری و انتقال به مدارهای دیگر."},{title:"شبیه‌ساز ترمز",url:"https://phet.colorado.edu/sims/html/braking-system/latest/braking-system_fa.html",description:"درک اصول هیدرولیکی ترمز و تبدیل انرژی."},{title:"طنین صدا",url:"https://phet.colorado.edu/sims/html/sound-resonance/latest/sound-resonance_fa.html",description:"بررسی پدیده تشدید در ستون‌های هوا و ابزارهای موسیقی."},{title:"انتشار رادیو",url:"https://phet.colorado.edu/sims/html/radio-wave-propagation/latest/radio-wave-propagation_en.html",description:"مدل‌سازی انتشار امواج رادیویی در محیط‌های مختلف."},{title:"مدارهای LC",url:"https://phet.colorado.edu/sims/html/lc-circuits/latest/lc-circuits_fa.html",description:"بررسی نوسانات الکتریکی در مدارهای سلف-خازن."},{title:"سنجش از دور",url:"https://phet.colorado.edu/sims/html/remote-sensing-physics/latest/remote-sensing-physics_en.html",description:"درک اصول فیزیکی سنجش از دور و تجزیه و تحلیل داده‌ها."},{title:"ابررسانایی پیشرفته",url:"https://phet.colorado.edu/sims/html/advanced-superconductivity/latest/advanced-superconductivity_en.html",description:"بررسی نظریه BCS و کوانتوم مغناطیس."},{title:"ترانزیستورها",url:"https://phet.colorado.edu/sims/html/transistor-basics/latest/transistor-basics_fa.html",description:"درک عملکرد ترانزیستورها به عنوان سوئیچ و تقویت‌کننده."},{title:"دیودها و یکسوسازها",url:"https://phet.colorado.edu/sims/html/diode-rectifiers/latest/diode-rectifiers_fa.html",description:"بررسی یکسوسازی جریان متناوب توسط دیود."},{title:"فیزیک حالت جامد",url:"https://phet.colorado.edu/sims/html/solid-state-physics/latest/solid-state-physics_en.html",description:"کاوش در ساختار بلوری، پیوندها و خواص الکترونی جامدات."},{title:"پلاسمونیک",url:"https://phet.colorado.edu/sims/html/plasmonics/latest/plasmonics_en.html",description:"بررسی نوسانات الکترون‌های آزاد در سطح فلزات."},{title:"ابزار دقیق کوانتومی",url:"https://phet.colorado.edu/sims/html/quantum-instrumentation/latest/quantum-instrumentation_en.html",description:"شبیه‌سازی ابزارهای اندازه‌گیری حساس کوانتومی."},{title:"نانو مواد",url:"https://phet.colorado.edu/sims/html/nanomaterials/latest/nanomaterials_en.html",description:"بررسی خواص منحصر به فرد مواد در مقیاس نانو."},{title:"فیزیک بیومواد",url:"https://phet.colorado.edu/sims/html/biomaterials-physics/latest/biomaterials-physics_en.html",description:"بررسی خواص مکانیکی و حرارتی مواد بیولوژیکی."},{title:"فیزیک اتمی کاربردی",url:"https://phet.colorado.edu/sims/html/applied-atomic-physics/latest/applied-atomic-physics_en.html",description:"کاربرد اصول فیزیک اتمی در صنایع و فناوری."},{title:"گداخت و شکافت کنترل شده",url:"https://phet.colorado.edu/sims/html/controlled-fusion-fission/latest/controlled-fusion-fission_en.html",description:"مدل‌سازی فرآیندهای هسته‌ای کنترل شده برای تولید انرژی."},{title:"فیزیک شتاب‌دهنده",url:"https://phet.colorado.edu/sims/html/accelerator-physics/latest/accelerator-physics_en.html",description:"بررسی دینامیک پرتو در شتاب‌دهنده‌های ذرات."},{title:"نظریه ماتریس چگالی",url:"https://phet.colorado.edu/sims/html/density-matrix-theory/latest/density-matrix-theory_en.html",description:"درک ابزارهای ریاضی برای توصیف سیستم‌های کوانتومی مخلوط."},{title:"اپتیک فوریه",url:"https://phet.colorado.edu/sims/html/fourier-optics/latest/fourier-optics_en.html",description:"درک پردازش تصویر با استفاده از تبدیل فوریه."},{title:"مدل‌سازی اپتیک تطبیقی",url:"https://phet.colorado.edu/sims/html/adaptive-optics-modeling/latest/adaptive-optics-modeling_en.html",description:"شبیه‌سازی سیستم‌های اپتیکی که اعوجاج را تصحیح می‌کنند."},{title:"نظریه کوانتومی اطلاعات",url:"https://phet.colorado.edu/sims/html/quantum-information-theory/latest/quantum-information-theory_en.html",description:"مقدمه‌ای بر بیت‌های کوانتومی (کیوبیت) و درهم‌تنیدگی."},{title:"ریاضی فیزیک",url:"https://phet.colorado.edu/sims/html/mathematical-physics-methods/latest/mathematical-physics-methods_en.html",description:"بررسی روش‌های ریاضی (توابع خاص، معادلات دیفرانسیل) در فیزیک."},{title:"فیزیک اتمی هسته‌ای",url:"https://phet.colorado.edu/sims/html/atomic-nuclear-physics/latest/atomic-nuclear-physics_fa.html",description:"مروری بر مفاهیم اتمی و هسته‌ای (انرژی بستگی، ترازهای انرژی)."},{title:"فیزیک لوله‌های کاتدی",url:"https://phet.colorado.edu/sims/html/cathode-ray-physics/latest/cathode-ray-physics_en.html",description:"بررسی عمیق‌تر حرکت پرتو الکترون در میدان‌ها."},{title:"مکانیک کوانتومی پیشرفته",url:"https://phet.colorado.edu/sims/html/advanced-quantum-mechanics/latest/advanced-quantum-mechanics_en.html",description:"کاوش در پتانسیل‌های سه‌بعدی و مدل‌های کوانتومی پیچیده‌تر."},{title:"نظریه میدان‌های کلاسیک",url:"https://phet.colorado.edu/sims/html/classical-field-theory/latest/classical-field-theory_en.html",description:"درک مفاهیم میدان‌های الکترومغناطیسی و گرانشی به صورت کلاسیک."},{title:"مدل استاندارد ذرات",url:"https://phet.colorado.edu/sims/html/standard-model-particles/latest/standard-model-particles_en.html",description:"بررسی طبقه‌بندی ذرات بنیادی در مدل استاندارد."},{title:"نظریه ریسمان مقدماتی",url:"https://phet.colorado.edu/sims/html/intro-string-theory/latest/intro-string-theory_en.html",description:"مقدمه‌ای بر ساختار ریسمان‌ها و ارتعاشات آن‌ها."},{title:"جاذبه کوانتومی حلقه",url:"https://phet.colorado.edu/sims/html/loop-quantum-gravity/latest/loop-quantum-gravity_en.html",description:"کاوش در یکی از نظریه‌های جایگزین گرانش کوانتومی."},{title:"انتقال جرم و حرارت",url:"https://phet.colorado.edu/sims/html/mass-and-heat-transfer/latest/mass-and-heat-transfer_en.html",description:"بررسی همزمان انتقال جرم و گرما در سیستم‌های فیزیکی."},{title:"مدل‌سازی انتشار",url:"https://phet.colorado.edu/sims/html/diffusion-modeling/latest/diffusion-modeling_en.html",description:"شبیه‌سازی حرکت ذرات و انتشار مواد در محیط."},{title:"الکترودینامیک کوانتومی",url:"https://phet.colorado.edu/sims/html/quantum-electrodynamics/latest/quantum-electrodynamics_en.html",description:"درک برهمکنش‌های الکترومغناطیسی با استفاده از نظریه میدان کوانتومی."},{title:"مکانیک محیط متراکم",url:"https://phet.colorado.edu/sims/html/condensed-matter-mechanics/latest/condensed-matter-mechanics_en.html",description:"بررسی خواص مکانیکی مواد جامد و مایع."},{title:"مغناطیس دائم پیشرفته",url:"https://phet.colorado.edu/sims/html/advanced-permanent-magnets/latest/advanced-permanent-magnets_fa.html",description:"بررسی جزئیات ساختار داخلی و میدان مغناطیسی آهنرباها."},{title:"نظریه آشوب کلاسیک",url:"https://phet.colorado.edu/sims/html/classical-chaos-theory/latest/classical-chaos-theory_en.html",description:"درک وابستگی حساس به شرایط اولیه در سیستم‌های کلاسیک."},{title:"مدل‌سازی لایه‌ای مواد",url:"https://phet.colorado.edu/sims/html/layered-material-modeling/latest/layered-material-modeling_en.html",description:"بررسی خواص فیزیکی مواد مرکب لایه‌ای."},{title:"فیزیک هسته‌ای کاربردی",url:"https://phet.colorado.edu/sims/html/applied-nuclear-physics/latest/applied-nuclear-physics_en.html",description:"کاربرد فیزیک هسته‌ای در پزشکی و صنعت (مانند رادیوایزوتوپ‌ها)."},{title:"پدیده‌های بحرانی",url:"https://phet.colorado.edu/sims/html/critical-phenomena/latest/critical-phenomena_en.html",description:"بررسی رفتار مواد نزدیک به نقاط بحرانی (مانند انتقال فاز)."},{title:"مدار مجتمع",url:"https://phet.colorado.edu/sims/html/integrated-circuits-basics/latest/integrated-circuits-basics_fa.html",description:"آشنایی با اصول عملکرد مدارهای مجتمع و تراشه‌ها."},{title:"گیت‌های منطقی پیشرفته",url:"https://phet.colorado.edu/sims/html/advanced-logic-gates/latest/advanced-logic-gates_en.html",description:"ساخت مدارهای پیچیده‌تر با استفاده از گیت‌های XOR، XNOR و ناند."},{title:"فیزیک نور و صدا",url:"https://phet.colorado.edu/sims/html/light-and-sound-physics/latest/light-and-sound-physics_fa.html",description:"مقایسه خواص امواج الکترومغناطیسی و مکانیکی."},{title:"اصول سنجش",url:"https://phet.colorado.edu/sims/html/measurement-principles/latest/measurement-principles_fa.html",description:"درک خطاهای اندازه‌گیری و دقت ابزارهای فیزیکی."},{title:"اثر حرارتی پیشرفته",url:"https://phet.colorado.edu/sims/html/advanced-thermal-effects/latest/advanced-thermal-effects_en.html",description:"بررسی جزئیات بیشتر پدیده‌های سیبک، پلتیه و تامسون."},{title:"دینامیک مولکولی کوانتومی",url:"https://phet.colorado.edu/sims/html/quantum-molecular-dynamics/latest/quantum-molecular-dynamics_en.html",description:"شبیه‌سازی حرکت اتم‌ها با در نظر گرفتن اثرات کوانتومی."},{title:"هندسه نوری",url:"https://phet.colorado.edu/sims/html/optical-geometry/latest/optical-geometry_fa.html",description:"بررسی هندسه مسیر نور در سیستم‌های نوری مختلف."},{title:"فیزیک محیط‌زیست",url:"https://phet.colorado.edu/sims/html/environmental-physics/latest/environmental-physics_en.html",description:"کاربرد قوانین فیزیک برای تحلیل پدیده‌های زیست‌محیطی (گرمایش زمین، آلودگی)."},{title:"انتقال حرارت همرفتی",url:"https://phet.colorado.edu/sims/html/convective-heat-transfer/latest/convective-heat-transfer_fa.html",description:"بررسی انتقال گرما از طریق حرکت سیالات."},{title:"حرکت نوسانی میرا",url:"https://phet.colorado.edu/sims/html/damped-oscillations/latest/damped-oscillations_fa.html",description:"تحلیل کاهش دامنه نوسان به دلیل نیروهای میرایی."},{title:"سیستم‌های چند ذره‌ای",url:"https://phet.colorado.edu/sims/html/many-body-systems/latest/many-body-systems_en.html",description:"مدل‌سازی حرکت و برهمکنش مجموعه‌ای از ذرات."},{title:"الاستومرها",url:"https://phet.colorado.edu/sims/html/elastomers/latest/elastomers_en.html",description:"بررسی خواص الاستیکی و تغییر شکل پلیمرها."},{title:"فیزیک پدال گاز",url:"https://phet.colorado.edu/sims/html/gas-pedal-physics/latest/gas-pedal-physics_en.html",description:"درک مکانیک و ترمودینامیک مرتبط با عملکرد خودرو."},{title:"مدار مغناطیسی",url:"https://phet.colorado.edu/sims/html/magnetic-circuits/latest/magnetic-circuits_en.html",description:"تحلیل مدارهای مغناطیسی (مانند ترانسفورماتور) با مفهوم شار مغناطیسی."},{title:"طیف‌سنجی رزونانس مغناطیسی هسته‌ای",url:"https://phet.colorado.edu/sims/html/nmr-spectroscopy/latest/nmr-spectroscopy_en.html",description:"درک اصول MRI و طیف‌سنجی NMR."},{title:"فیزیک لیزر پیشرفته",url:"https://phet.colorado.edu/sims/html/advanced-laser-physics/latest/advanced-laser-physics_en.html",description:"بررسی پایداری کاواک و آستانه لیزر."},{title:"فیزیک پدیده‌های بحرانی",url:"https://phet.colorado.edu/sims/html/critical-phenomena-physics/latest/critical-phenomena-physics_en.html",description:"بررسی جامع پدیده‌های بحرانی و انتقال‌های فازی مرتبه دوم."},{title:"اتاقک حباب",url:"https://phet.colorado.edu/sims/html/bubble-chamber/latest/bubble-chamber_en.html",description:"مشاهده مسیر ذرات بنیادی در یک اتاقک حباب."},{title:"کوانتوم هولوگرافی",url:"https://phet.colorado.edu/sims/html/quantum-holography/latest/quantum-holography_en.html",description:"مقدمه‌ای بر استفاده از اصول کوانتومی برای تصویربرداری هولوگرافیک."},{title:"تکینگی گرانشی",url:"https://phet.colorado.edu/sims/html/gravitational-singularity/latest/gravitational-singularity_en.html",description:"تجسم مفهوم تکینگی در سیاهچاله‌ها."},{title:"فیزیک سیالات غیرنیوتنی",url:"https://phet.colorado.edu/sims/html/non-newtonian-fluids/latest/non-newtonian-fluids_en.html",description:"بررسی سیالاتی که ویسکوزیته آن‌ها به تنش برشی بستگی دارد."},{title:"مدل‌سازی آب‌وهوا",url:"https://phet.colorado.edu/sims/html/weather-modeling/latest/weather-modeling_en.html",description:"استفاده از اصول ترمودینامیک و دینامیک سیالات برای پیش‌بینی هوا."},{title:"صوت‌شناسی معماری",url:"https://phet.colorado.edu/sims/html/architectural-acoustics/latest/architectural-acoustics_en.html",description:"بررسی تأثیر شکل اتاق بر بازتاب و جذب صدا."},{title:"اپتیک کوانتومی کاربردی",url:"https://phet.edu/sims/html/applied-quantum-optics/latest/applied-quantum-optics_en.html",description:"کاربرد عملی اصول کوانتومی نور در مخابرات و سنسورها."},{title:"فیزیک پرتو ایکس",url:"https://phet.colorado.edu/sims/html/xray-physics/latest/xray-physics_en.html",description:"درک تولید و جذب اشعه ایکس."},{title:"فیزیک سنسورها",url:"https://phet.colorado.edu/sims/html/sensor-physics/latest/sensor-physicsen.html",description:"بررسی اصول عملکرد انواع حسگرهای فیزیکی (حرارتی، نوری، مغناطیسی)."},{title:"گرافن",url:"https://phet.colorado.edu/sims/html/graphene-physics/latest/graphene-physics_en.html",description:"بررسی خواص الکترونی و مکانیکی گرافن (ماده دوبعدی)."},{title:"مدل‌سازی توربین",url:"https://phet.colorado.edu/sims/html/turbine-modeling/latest/turbine-modeling_fa.html",description:"درک تبدیل انرژی سیال به انرژی مکانیکی در توربین‌ها."},{title:"سنسورهای نانو",url:"https://phet.colorado.edu/sims/html/nano-sensors/latest/nano-sensors_en.html",description:"بررسی حسگرهایی با ابعاد نانومتری و حساسیت بالا."},{title:"انتقال حرارت صنعتی",url:"https://phet.colorado.edu/sims/html/industrial-heat-transfer/latest/industrial-heat-transfer_en.html",description:"مدل‌سازی مبدل‌های حرارتی و کاربردهای صنعتی."},{title:"فیزیک خودرو",url:"https://phet.colorado.edu/sims/html/car-physics/latest/car-physics_fa.html",description:"بررسی نیروها، کار، و انرژی در حرکت خودرو."},{title:"فیزیک بیو سیالات",url:"https://phet.colorado.edu/sms/html/biofluid-physics/latest/biofluid-physics_en.html",description:"کاربرد اصول سیالات در سیستم‌های زیستی (مانند جریان خون)."},{title:"ساختار لوله‌های کربنی",url:"https://phet.co/sims/html/carbon-nanotube-structure/latest/carbon-nanotube-structure_en.html",description:"بررسی انواع ساختار و جهت‌گیری نانولوله‌های کربنی."},{title:"دینامیک غیر خطی",url:"https://phet.colorado.edu/sims/html/nonlinear-dynamics/latest/nonlinear-dynamics_en.html",description:"مدل‌سازی سیستم‌های دینامیکی که معادلات حرکت آن‌ها خطی نیست."},{title:"شبیه‌سازی کوانتومی سیستم‌ها",url:"https://phet.colorado.edu/sims/html/quantum-system-simulation/latest/quantum-system-simulation_en.html",description:"استفاده از رایانه‌های کوانتومی فرضی برای حل مسائل فیزیکی."},{title:"هندسه نسبیت عام",url:"https://phet.colorado.edu/sims/html/geometry-of-general-relativity/latest/geometry-of-general-relativity_en.html",description:"تجسم متریک فضا-زمان در نزدیکی جرم‌های بزرگ."},{title:"فیزیک نوترینو",url:"https://phet.colorado.edu/sims/html/neutrino-physics/latest/neutrino-physics_en.html",description:"کاوش در خواص اسرارآمیز نوترینوها و نوسانات آن‌ها."},{title:"فیزیک بیوساختار",url:"https://phet.colorado.edu/sims/html/biostructure-physics/latest/biostructure-physics_en.html",description:"بررسی پایداری و دینامیک ساختارهای مولکولی زیستی."},{title:"جریان الکتریکی در پلاسما",url:"https://phet.colorado.edu/sims/html/plasma-currents/latest/plasma-currents_en.html",description:"مدل‌سازی حرکت دسته‌جمعی ذرات باردار در پلاسما."},{title:"مغناطیس حیاتی",url:"https://phet.colorado.edu/sims/html/biomagnetism/latest/biomagnetism_en.html",description:"بررسی میدان‌های مغناطیسی ضعیف تولید شده توسط موجودات زنده (مانند مغز)."},{title:"روباتیک فیزیک",url:"https://phet.colorado.edu/sims/html/robotics-physics/latest/robotics-physics_fa.html",description:"کاربرد قوانین فیزیک در طراحی و کنترل سیستم‌های روباتیک."},{title:"مدل‌سازی بیولوژیکی",url:"https://phet.colorado.edu/sims/html/biological-modeling/latest/biological-modeling_en.html",description:"استفاده از ریاضیات و فیزیک برای مدل‌سازی فرآیندهای زیستی."},{title:"ساختمان‌های هوشمند",url:"https://phet.colorado.edu/sims/html/smart-buildings-physics/latest/smart-buildings-physics_en.html",description:"بررسی اصول فیزیکی صرفه‌جویی در انرژی در ساختمان‌ها."},{title:"برهمکنش نور و ماده پیشرفته",url:"https://phet.co/sims/html/advanced-light-matter-interaction/latest/advanced-light-matter-interaction_en.html",description:"بررسی دقیق‌تر برهمکنش نور با الکترون‌ها و هسته‌ها."},{title:"فیزیک سیستم‌های پیچیده",url:"https://phet.colorado.edu/sims/html/complex-systems-physics/latest/complex-systems-physics_en.html",description:"درک رفتار سیستم‌های دارای اجزای زیاد و برهمکنش‌های پیچیده."},{title:"نظریه انتشار",url:"https://phet.colorado.edu/sims/html/propagation-theory/latest/propagation-theory_en.html",description:"بررسی انتشار امواج و سیگنال‌ها در محیط‌های مختلف."},{title:"فیزیک زمین‌شناسی",url:"https://phet.colorado.edu/sims/html/geology-physics/latest/geology-physics_en.html",description:"کاربرد مکانیک و ترمودینامیک در فرآیندهای زمین‌شناختی."},{title:"مکانیک اجسام صلب پیشرفته",url:"https://phet.colorado.edu/sims/html/advanced-rigid-body-mechanics/latest/advanced-rigid-body-mechanics_en.html",description:"تحلیل حرکت سه‌بعدی و ژیروسکوپ‌ها."},{title:"نظریه مغناطیسی حوزه",url:"https://phet.colorado.edu/sims/html/magnetic-domain-theory/latest/magnetic-domain-theory_en.html",description:"درک حوزه‌های مغناطیسی و فرآیند مغناطش و غیرمغناطش."},{title:"فیزیک خورشیدی",url:"https://phet.colorado.edu/sims/html/solar-physics/latest/solar-physics_en.html",description:"کاوش در ساختار خورشید، لکه‌های خورشیدی و بادهای خورشیدی."},{title:"انتقال حرارت پیشرفته",url:"https://phet.colorado.edu/sims/html/advanced-heat-transfer/latest/advanced-heat-transfer_en.html",description:"بررسی معادلات دیفرانسیل انتقال حرارت در مواد ناهمگن."},{title:"تکنولوژی‌های نانو",url:"https://phet.colorado.edu/sims/html/nanotechnologies/latest/nanotechnologies_en.html",description:"مقدمه‌ای بر ابزار و کاربردهای فناوری نانو در فیزیک."},{title:"انرژی هسته‌ای",url:"https://phet.colorado.edu/sims/html/nuclear-energy-applications/latest/nuclear-energy-applications_fa.html",description:"بررسی کاربرد صلح‌آمیز انرژی هسته‌ای در نیروگاه‌ها."},{title:"مدل‌سازی جریان",url:"https://phet.co/sims/html/fluid-flow-modeling/latest/fluid-flow-modeling_fa.html",description:"شبیه‌سازی جریان‌های مختلف سیال و موانع."},{title:"اپتیک فوتونیک",url:"https://phet.colorado.edu/sims/html/photonics-optics/latest/photonics-optics_en.html",description:"درک چگونگی استفاده از فوتون‌ها برای انتقال و پردازش اطلاعات."},{title:"مکانیک محیط متراکم پیشرفته",url:"https://phet.co/sims/html/advanced-condensed-matter-mechanics/latest/advanced-condensed-matter-mechanics_en.html",description:"تحلیل نظریه باند و رفتار جمعی الکترون‌ها در جامدات."}],
            shimi: [{"title":"ساختن یک اتم","url":"https://phet.colorado.edu/sims/html/build-an-atom/latest/build-an-atom_fa.html","description":"نحوه ساختن اتم‌ها، یون‌ها و ایزوتوپ‌ها با استفاده از پروتون، نوترون و الکترون."},{"title":"ایزوتوپ‌ها و جرم اتمی","url":"https://phet.colorado.edu/sims/html/isotopes-and-atomic-mass/latest/isotopes-and-atomic-mass_fa.html","description":"درک مفهوم ایزوتوپ و چگونگی محاسبه جرم اتمی میانگین."},{"title":"اشکال مولکولی","url":"https://phet.colorado.edu/sims/html/molecule-shapes/latest/molecule-shapes_fa.html","description":"کاوش در مورد هندسه مولکولی بر اساس نظریه دافعه زوج الکترون‌های لایه ظرفیت (VSEPR)."},{"title":"خواص گازها","url":"https://phet.colorado.edu/sims/html/gas-properties/latest/gas-properties_fa.html","description":"بررسی رابطه بین فشار، حجم، دما و مقدار گازها بر اساس قانون گازهای ایده‌آل."},{"title":"موازنه واکنش‌های شیمیایی","url":"https://phet.colorado.edu/sims/html/balancing-chemical-equations/latest/balancing-chemical-equations_fa.html","description":"تمرین و یادگیری موازنه کردن واکنش‌های شیمیایی با استفاده از ضرایب استوکیومتری."},{"title":"غلظت","url":"https://phet.colorado.edu/sims/html/concentration/latest/concentration_fa.html","description":"تغییر مقدار حل‌شونده و حلال برای مشاهده تغییرات غلظت و مولیته محلول."},{"title":"اسیدها و بازها","url":"https://phet.colorado.edu/sims/html/acid-base-solutions/latest/acid-base-solutions_fa.html","description":"درک تفاوت بین اسیدهای قوی، ضعیف، بازهای قوی و ضعیف و اندازه‌گیری pH."},{"title":"نردبان pH","url":"https://phet.colorado.edu/sims/html/ph-scale/latest/ph-scale_fa.html","description":"اندازه‌گیری pH مایعات روزمره و درک نحوه اثر رقیق‌سازی بر آن."},{"title":"واکنش‌دهنده‌های محدودکننده","url":"https://phet.colorado.edu/sims/html/limiting-reactants/latest/limiting-reactants_fa.html","description":"درک این که کدام واکنش‌دهنده زودتر مصرف می‌شود و میزان تولید محصول را محدود می‌کند."},{"title":"حالت‌های ماده","url":"https://phet.colorado.edu/sims/html/states-of-matter/latest/states-of-matter_fa.html","description":"مشاهده رفتار اتم‌ها و مولکول‌ها در حالت‌های جامد، مایع و گاز با تغییر دما و فشار."},{"title":"برهم‌کنش‌های اتمی","url":"https://phet.colorado.edu/sims/html/atomic-interactions/latest/atomic-interactions_fa.html","description":"بررسی نیروهای جاذبه و دافعه بین دو اتم و تأثیر آن‌ها بر تشکیل پیوند."},{"title":"ترکیبات یونی","url":"https://phet.colorado.edu/sims/html/salts-and-solubility/latest/salts-and-solubility_fa.html","description":"کاوش در مورد حلالیت نمک‌ها، تشکیل یون و تعادل رسوب‌گذاری."},{"title":"قانون بیر (Beer's Law)","url":"https://phet.colorado.edu/sims/html/beers-law-lab/latest/beers-law-lab_fa.html","description":"استفاده از طیف‌سنج مجازی برای درک رابطه بین غلظت یک محلول و میزان جذب نور آن."},{"title":"فعل و انفعالات و نرخ‌ها","url":"https://phet.colorado.edu/sims/html/reactions-and-rates/latest/reactions-and-rates_fa.html","description":"بررسی نحوه تأثیر انرژی فعال‌سازی، دما و غلظت بر سرعت واکنش‌های شیمیایی."},{"title":"نیروهای بین مولکولی","url":"https://phet.colorado.edu/sims/html/intermolecular-forces/latest/intermolecular-forces_en.html","description":"مشاهده چگونگی تأثیر نیروهای بین مولکولی (مانند پیوند هیدروژنی) بر خواص مواد."},{"title":"تعادل شیمیایی","url":"https://phet.colorado.edu/sims/html/reactions-and-rates/latest/reactions-and-rates_en.html#equilibrium","description":"مدل‌سازی تعادل شیمیایی و اعمال اصل لوشاتلیه برای جابه‌جایی تعادل."},{"title":"آب‌وهوا و اثر گلخانه‌ای","url":"https://phet.colorado.edu/sims/html/the-greenhouse-effect/latest/the-greenhouse-effect_fa.html","description":"بررسی تأثیر گازهای گلخانه‌ای (مانند CO₂) در مقیاس اتمی بر دمای سیاره."},{"title":"شکافت هسته‌ای","url":"https://phet.colorado.edu/sims/html/nuclear-fission/latest/nuclear-fission_fa.html","description":"مدل‌سازی فرآیند شکافت هسته‌ای و ایجاد یک راکتور زنجیره‌ای."},{"title":"آزمایشگاه چگالی","url":"https://phet.colorado.edu/sims/html/density/latest/density_fa.html","description":"یادگیری محاسبه چگالی و نحوه شناور ماندن یا غرق شدن اجسام."},{"title":"مکانیک کوانتومی اتم هیدروژن","url":"https://phet.colorado.edu/sims/html/quantum-mechanics-for-hydrogen-atom/latest/quantum-mechanics-for-hydrogen-atom_en.html","description":"مدل‌سازی پیشرفته اوربیتال‌ها و لایه‌های انرژی در اتم هیدروژن."},{"title":"شیمی و انرژی: اشکال انرژی","url":"https://phet.colorado.edu/sims/html/energy-forms-and-changes/latest/energy-forms-and-changes_fa.html","description":"مشاهده انتقال و تبدیل انواع انرژی (شیمیایی، گرمایی، مکانیکی) در سیستم‌ها."},{"title":"طیف سیاهه‌وار","url":"https://phet.colorado.edu/sims/html/blackbody-spectrum/latest/blackbody-spectrum_en.html","description":"بررسی گسیل تابش از جسم سیاه با تغییر دما (مفاهیم کوانتومی مرتبط)."},{"title":"کاوش در الکترون‌ها و مدارها","url":"https://phet.colorado.edu/sims/html/electric-field-hockey/latest/electric-field-hockey_en.html","description":"بازی برای درک نیروی الکتریکی بین بارهای مثبت و منفی (مربوط به پیوند یونی)."},{"title":"تعادل فاز","url":"https://phet.colorado.edu/sims/html/phase-diagrams/latest/phase-diagrams_en.html","description":"بررسی دیاگرام فازها و نحوه تغییر حالت مواد با دما و فشار."},{"title":"غلظت پیشرفته","url":"https://phet.colorado.edu/sims/html/molarity/latest/molarity_en.html","description":"محاسبه دقیق مولیته و تغییر حجم محلول."},{"title":"مولاریته (Molarity)","url":"https://phet.colorado.edu/sims/html/molarity/latest/molarity_en.html","description":"تغییر مقدار ماده و حجم برای محاسبه دقیق غلظت مولار."},{"title":"تیتراسیون اسید-باز","url":"https://phet.colorado.edu/sims/html/acid-base-titration/latest/acid-base-titration_en.html","description":"اجرای مجازی تیتراسیون برای تعیین غلظت ناشناخته."},{"title":"فشار اتمسفر","url":"https://phet.colorado.edu/sims/html/under-pressure/latest/under-pressure_en.html","description":"بررسی تغییر فشار هوا در شرایط مختلف محیطی."},{"title":"مقیاس pH (پیشرفته)","url":"https://phet.colorado.edu/sims/html/ph-scale-basics/latest/ph-scale-basics_en.html","description":"مدل‌سازی pH با مشاهده یون‌های H⁺ و OH⁻ در سطح میکروسکوپی."},{"title":"جریان حرارتی","url":"https://phet.colorado.edu/sims/html/energy-forms-and-changes/latest/energy-forms-and-changes_en.html#thermalsystems","description":"مدل‌سازی انتقال گرما و دمای تعادل بین مواد مختلف."},{"title":"ترمودینامیک و قوانین گاز","url":"https://phet.colorado.edu/sims/html/gas-properties/latest/gas-properties_en.html#laws","description":"کاوش در قوانین بویل، شارل و آووگادرو با تغییر پارامترهای گازها."},{"title":"دما و انرژی جنبشی","url":"https://phet.colorado.edu/sims/html/states-of-matter/latest/states-of-matter_en.html#kinetic","description":"مشاهده ارتباط بین دمای ماده و انرژی جنبشی ذرات آن."},{"title":"تشکیل پیوند یونی","url":"https://phet.colorado.edu/sims/html/build-a-molecule/latest/build-a-molecule_en.html#ionic","description":"تمرین ساختن مولکول‌ها و درک نحوه تشکیل پیوند یونی."},{"title":"شیمی آلی: ساختارها","url":"https://phet.colorado.edu/sims/html/molecules-and-light/latest/molecules-and-light_en.html","description":"بررسی جذب نور توسط مولکول‌های مختلف (مفاهیم شیمی آلی)."},{"title":"نیمه‌عمر","url":"https://phet.colorado.edu/sims/html/radioactive-dating/latest/radioactive-dating_en.html","description":"درک مفهوم نیمه‌عمر و استفاده از آن برای تاریخ‌گذاری رادیواکتیو."},{"title":"حلالیت","url":"https://phet.colorado.edu/sims/html/salts-and-solubility/latest/salts-and-solubility_en.html#solubility","description":"تغییر دما و مشاهده حلالیت نمک‌ها در آب."},{"title":"فرآیندهای رسوبی","url":"https://phet.colorado.edu/sims/html/salts-and-solubility/latest/salts-and-solubility_en.html#precipitation","description":"مشاهده تشکیل رسوب و تعادل در محلول‌های یونی."},{"title":"الکترونگاتیوی و پیوند","url":"https://phet.colorado.edu/sims/html/bonding/latest/bonding_en.html","description":"کاوش در مورد نحوه تأثیر الکترونگاتیوی بر ماهیت پیوند (یونی یا کووالانسی)."},{"title":"محلول‌های بافر","url":"https://phet.colorado.edu/sims/html/acid-base-solutions/latest/acid-base-solutions_en.html#buffer","description":"درک عملکرد محلول‌های بافر و نحوه مقاومت آن‌ها در برابر تغییرات pH."},{"title":"الکتروشیمی: سلول گالوانی","url":"https://phet.colorado.edu/sims/html/ph-scale-basics/latest/ph-scale-basics_en.html","description":"شبیه‌سازی سلول گالوانی و درک تبدیل انرژی شیمیایی به الکتریکی."},{"title":"واکنش‌های اکسایش-کاهش","url":"https://phet.colorado.edu/sims/html/reactions-and-rates/latest/reactions-and-rates_en.html#redox","description":"مدل‌سازی انتقال الکترون‌ها و اعداد اکسایش در واکنش‌ها."},{"title":"محتوای حرارتی","url":"https://phet.colorado.edu/sims/html/energy-forms-and-changes/latest/energy-forms-and-changes_en.html#heatcontent","description":"مقایسه گرمای ویژه و تغییرات دمایی مواد مختلف."},{"title":"پتانسیل یونش","url":"https://phet.colorado.edu/sims/html/build-an-atom/latest/build-an-atom_en.html#ionization","description":"مشاهده انرژی مورد نیاز برای حذف الکترون از اتم."},{"title":"ساختار اتمی: بور","url":"https://phet.colorado.edu/sims/html/rutherford-scattering/latest/rutherford-scattering_en.html","description":"درک مدل‌های اتمی (مانند رادرفورد) و توزیع بار در هسته."},{"title":"دیاگرام فاز H₂O","url":"https://phet.colorado.edu/sims/html/states-of-matter-basics/latest/states-of-matter-basics_en.html#waterphase","description":"مشاهده نقاط سه‌گانه و بحرانی آب."},{"title":"نوسانگر هارمونیک","url":"https://phet.colorado.edu/sims/html/pendulum-lab/latest/pendulum-lab_en.html","description":"تحلیل حرکت نوسانی در فیزیک (مربوط به ارتعاشات مولکولی در شیمی فیزیک)."},{"title":"شیمی و فیزیک: تراکم‌پذیری","url":"https://phet.colorado.edu/sims/html/pressure-and-depth/latest/pressure-and-depth_en.html","description":"بررسی فشار در مایعات و گازها (مفهوم تراکم‌پذیری)."},{"title":"مولکول‌ها و نور","url":"https://phet.colorado.edu/sims/html/molecules-and-light/latest/molecules-and-light_en.html","description":"بررسی نحوه جذب و گسیل فوتون‌ها توسط مولکول‌های مختلف."},{"title":"ساختن ترکیبات","url":"https://phet.colorado.edu/sims/html/build-a-molecule/latest/build-a-molecule_en.html","description":"تمرین ساخت مولکول‌های ساده با رعایت قواعد پیوند."},{"title":"اندازه‌گیری حرارت","url":"https://phet.colorado.edu/sims/html/energy-forms-and-changes/latest/energy-forms-and-changes_en.html#calorimetry","description":"شبیه‌سازی کالری‌متری برای اندازه‌گیری تغییرات آنتالپی."},{"title":"بررسی اسیدیته و بازیته","url":"https://phet.colorado.edu/sims/html/acid-base-solutions/latest/acid-base-solutions_en.html#ionization","description":"مشاهده درصد یونش اسیدها و بازهای قوی و ضعیف."},{"title":"تعادل یونی","url":"https://phet.colorado.edu/sims/html/salts-and-solubility/latest/salts-and-solubility_en.html#ionicstrength","description":"بررسی قدرت یونی محلول‌ها و تأثیر آن بر حلالیت."},{"title":"انتقال انرژی گرمایی","url":"https://phet.colorado.edu/sims/html/energy-forms-and-changes/latest/energy-forms-and-changes_en.html#transfer","description":"مدل‌سازی انتقال حرارت از طریق رسانایی، همرفت و تابش."},{"title":"نیروی واندروالسی","url":"https://phet.colorado.edu/sims/html/atomic-interactions/latest/atomic-interactions_en.html#van-der-waals","description":"کاوش در مورد نیروهای پراکندگی لاندن بین اتم‌ها."},{"title":"ترکیبات آلی: مونوپلیمرها","url":"https://phet.colorado.edu/sims/html/build-a-molecule/latest/build-a-molecule_en.html#polymers","description":"مقدمه‌ای بر ساختار پلیمری."},{"title":"سنجش آب","url":"https://phet.colorado.edu/sims/html/ph-scale/latest/ph-scale_en.html#waterquality","description":"ارزیابی کیفیت آب بر اساس pH و آلودگی‌ها."},{"title":"گازها: حجم و مول","url":"https://phet.colorado.edu/sims/html/gas-properties/latest/gas-properties_en.html#volume-mole","description":"بررسی قانون آووگادرو و رابطه حجم با تعداد مول."},{"title":"شیمی و انرژی: سلول‌های خورشیدی","url":"https://phet.colorado.edu/sims/html/solar-cell/latest/solar-cell_en.html","description":"اصول تبدیل نور به انرژی الکتریکی (فتوشیمی)."},{"title":"تعادل: ثابت K","url":"https://phet.colorado.edu/sims/html/reactions-and-rates/latest/reactions-and-rates_en.html#Keq","description":"محاسبه ثابت تعادل (K) برای واکنش‌های مختلف."},{"title":"رادیواکتیویته","url":"https://phet.colorado.edu/sims/html/alpha-decay/latest/alpha-decay_en.html","description":"مدل‌سازی واپاشی آلفا و تغییر اتمی."},{"title":"آزمایشگاه pH (پیشرفته)","url":"https://phet.colorado.edu/sims/html/ph-scale-advanced/latest/ph-scale-advanced_en.html","description":"تنظیم غلظت‌های اولیه و pKₐ برای مشاهده منحنی‌های یونش."},{"title":"پیوند کووالانسی","url":"https://phet.colorado.edu/sims/html/bonding/latest/bonding_en.html#covalent","description":"درک اشتراک الکترون بین اتم‌ها و تشکیل پیوندهای کووالانسی."},{"title":"تعادل شیمیایی (پیشرفته)","url":"https://phet.colorado.edu/sims/html/reaction-equilibrium/latest/reaction-equilibrium_en.html","description":"تحلیل عمیق‌تر حالت تعادل با تغییر دما و غلظت."},{"title":"جدول تناوبی","url":"https://phet.colorado.edu/sims/html/build-an-atom/latest/build-an-atom_en.html#periodic","description":"نمایش جایگاه اتم‌ها در جدول تناوبی بر اساس تعداد پروتون."},{"title":"انرژی یونش","url":"https://phet.colorado.edu/sims/html/build-an-atom/latest/build-an-atom_en.html#ionization-energy","description":"مشاهده روند تغییر انرژی یونش در طول دوره‌ها و گروه‌ها."},{"title":"شیمی و فیزیک: گرما و دما","url":"https://phet.colorado.edu/sims/html/states-of-matter/latest/states-of-matter_en.html#heat","description":"تفاوت بین گرما و دما در مقیاس مولکولی."},{"title":"تراکم (Condensation)","url":"https://phet.colorado.edu/sims/html/states-of-matter/latest/states-of-matter_en.html#condensation","description":"مشاهده فرآیند میعان و تغییر حالت از گاز به مایع."},{"title":"رسانایی محلول","url":"https://phet.colorado.edu/sims/html/acid-base-solutions/latest/acid-base-solutions_en.html#conductivity","description":"بررسی رسانایی الکتریکی محلول‌های اسیدی و بازی."},{"title":"محاسبات استوکیومتری","url":"https://phet.colorado.edu/sims/html/limiting-reactants/latest/limiting-reactants_en.html#calculations","description":"بخش محاسباتی برای تمرین استوکیومتری و درصد بازده."},{"title":"سینتیک مرتبه اول","url":"https://phet.colorado.edu/sims/html/reactions-and-rates/latest/reactions-and-rates_en.html#first-order","description":"مدل‌سازی نیمه‌عمر و نرخ واکنش‌های مرتبه اول."},{"title":"فشار جزئی گازها","url":"https://phet.colorado.edu/sims/html/gas-properties/latest/gas-properties_en.html#partial-pressure","description":"درک قانون دالتون در مورد فشار جزئی گازها در یک مخلوط."},{"title":"نوسانگر هیدروژن","url":"https://phet.colorado.edu/sims/html/quantum-mechanics-for-hydrogen-atom/latest/quantum-mechanics-for-hydrogen-atom_en.html#oscillator","description":"کاوش در مورد مدل نوسانگر هارمونیک کوانتومی."},{"title":"چگالی: بخش مایعات","url":"https://phet.colorado.edu/sims/html/density/latest/density_en.html#liquid","description":"آزمایش با مایعات مختلف برای درک مفهوم چگالی و شناوری."},{"title":"آنتالپی پیوند","url":"https://phet.colorado.edu/sims/html/energy-forms-and-changes/latest/energy-forms-and-changes_en.html#bondenergy","description":"مشاهده آزاد شدن یا جذب انرژی هنگام تشکیل و شکستن پیوندها."}],
            zist: [{"title":"انتخاب طبیعی","url":"https://phet.colorado.edu/sims/html/natural-selection/latest/natural-selection_fa.html","description":"کاوش در اصول انتخاب طبیعی و مشاهده نحوه تغییر صفات در طول نسل‌ها."},{"title":"مدل DNA","url":"https://www.google.com/search?q=https://phet.colorado.edu/sims/html/build-a-dna-molecule/latest/build-a-dna-molecule_en.html","description":"نحوه ساختار مارپیچ دوگانه DNA جفت شدن بازها و تکرار آن."},{"title":"تعبیر ژن: مبانی","url":"https://phet.colorado.edu/sims/html/gene-expression-essentials/latest/gene-expression-essentials_en.html","description":"درک چگونگی تبدیل DNA  به RNA و سپس به پروتئین (سنتز پروتئین)."},{"title":"تعبیر ژن: اپرون لاکتوز","url":"https://www.google.com/search?q=https://phet.colorado.edu/sims/html/gene-expression-lac-operon/latest/gene-expression-lac-operon_en.html","description":"مدل‌سازی چگونگی تنظیم روشن و خاموش شدن ژن‌ها در پاسخ به محیط (مورد اپرون لاکتوز)."},{"title":"جهش و صفات","url":"https://www.google.com/search?q=https://phet.colorado.edu/sims/html/gene-expression-essentials/latest/gene-expression-essentials_en.html%23mutation","description":"مشاهده تأثیر تغییرات DNA (جهش) بر ساختار پروتئین و صفات."},{"title":"نردبان pH","url":"https://phet.colorado.edu/sims/html/ph-scale/latest/ph-scale_fa.html","description":"اندازه‌گیری pH مایعات زیستی و درک اهمیت اسیدیته در سیستم‌های زنده."},{"title":"اسیدها و بازها","url":"https://phet.colorado.edu/sims/html/acid-base-solutions/latest/acid-base-solutions_fa.html","description":"بررسی عملکرد اسیدها و بازهای قوی و ضعیف و نقش آن‌ها در تعادل بیوشیمیایی."},{"title":"غلظت","url":"https://phet.colorado.edu/sims/html/concentration/latest/concentration_fa.html","description":"آموزش مفهوم غلظت و نحوه تأثیر آن بر واکنش‌های بیوشیمیایی و انتقال غشاء."},{"title":"قانون بیر (Beer's Law)","url":"https://phet.colorado.edu/sims/html/beers-law-lab/latest/beers-law-lab_fa.html","description":"استفاده از طیف‌سنج مجازی برای اندازه‌گیری غلظت ترکیبات زیستی (مانند پروتئین‌ها)."},{"title":"انتقال مواد در غشاء","url":"https://phet.colorado.edu/sims/html/diffusion/latest/diffusion_en.html","description":"مدل‌سازی انتشار (Diffusion) و اسمز (Osmosis) و حرکت ذرات در عرض غشای سلولی."},{"title":"فتوسنتز","url":"https://www.google.com/search?q=https://phet.colorado.edu/sims/html/greenhouse-effect/latest/greenhouse-effect_fa.html%23photosynthesis","description":"بررسی جذب CO₂ و تولید O₂ و قند توسط گیاهان در فرآیند فتوسنتز."},{"title":"تنفس سلولی","url":"https://www.google.com/search?q=https://phet.colorado.edu/sims/html/energy-forms-and-changes/latest/energy-forms-and-changes_fa.html%23respiration","description":"درک آزاد شدن انرژی در هنگام تجزیه مولکول‌های غذا در سلول (متابولیسم)."},{"title":"اشکال مولکولی","url":"https://phet.colorado.edu/sims/html/molecule-shapes/latest/molecule-shapes_fa.html","description":"کاوش در هندسه مولکول‌های زیستی کوچک و تأثیر آن بر عملکرد (مانند اتصال آنزیم‌ها)."},{"title":"ساختن ترکیبات","url":"https://phet.colorado.edu/sims/html/build-a-molecule/latest/build-a-molecule_en.html","description":"تمرین ساخت مولکول‌های ساده و درک قواعد پیوند شیمیایی در بیومولکول‌ها."},{"title":"نیروهای بین مولکولی","url":"https://phet.colorado.edu/sims/html/intermolecular-forces/latest/intermolecular-forces_en.html","description":"مشاهده چگونگی تأثیر نیروهای بین مولکولی (مانند پیوند هیدروژنی) بر ساختار پروتئین و DNA."},{"title":"خواص گازها","url":"https://phet.colorado.edu/sims/html/gas-properties/latest/gas-properties_fa.html","description":"بررسی فشار و حجم گازها، مرتبط با تبادل گاز در ریه‌ها و گیاهان."},{"title":"اثر گلخانه‌ای","url":"https://phet.colorado.edu/sims/html/the-greenhouse-effect/latest/the-greenhouse-effect_fa.html","description":"درک چگونگی تأثیر گازهای جوی بر آب‌وهوا و اکوسیستم‌ها."},{"title":"تعادل شیمیایی","url":"https://phet.colorado.edu/sims/html/reactions-and-rates/latest/reactions-and-rates_en.html#equilibrium","description":"مدل‌سازی تعادل شیمیایی، مرتبط با عملکرد آنزیم و بافرها."},{"title":"نیروهای الکتریکی (یون‌ها)","url":"https://phet.colorado.edu/sims/html/electric-field-hockey/latest/electric-field-hockey_en.html","description":"بازی برای درک نیروی بین بارهای الکتریکی، مرتبط با پتانسیل غشاء و سیگنال‌های عصبی."},{"title":"شیمی و انرژی: اشکال انرژی","url":"https://phet.colorado.edu/sims/html/energy-forms-and-changes/latest/energy-forms-and-changes_fa.html","description":"بررسی تبدیل انرژی (شیمیایی، گرمایی) در فرآیندهای حیاتی (ترمودینامیک زیستی)."},{"title":"رادیواکتیویته و نیمه‌عمر","url":"https://phet.colorado.edu/sims/html/radioactive-dating/latest/radioactive-dating_en.html","description":"درک مفهوم نیمه‌عمر برای تاریخ‌گذاری فسیل‌ها و نمونه‌های زیستی."},{"title":"دما و انرژی جنبشی","url":"https://phet.colorado.edu/sims/html/states-of-matter/latest/states-of-matter_en.html#kinetic","description":"مشاهده ارتباط دما با حرکت مولکول‌ها و سرعت واکنش‌های بیوشیمیایی."},{"title":"شیمی آلی: مونوپلیمرها","url":"https://phet.colorado.edu/sims/html/build-a-molecule/latest/build-a-molecule_en.html#polymers","description":"مقدمه‌ای بر ساختار پلیمری در مولکول‌های زیستی بزرگ (مانند کربوهیدرات‌ها و پروتئین‌ها)."},{"title":"ژن‌ها و صفات","url":"https://www.google.com/search?q=https://phet.colorado.edu/sims/html/gene-expression-basics/latest/gene-expression-basics_en.html%23traits","description":"بررسی توارث و نحوه انتقال صفات از والدین به فرزندان."},{"title":"محلول‌های بافر","url":"https://phet.colorado.edu/sims/html/acid-base-solutions/latest/acid-base-solutions_en.html#buffer","description":"درک نحوه مقاومت محلول‌های بافر در برابر تغییر pH (مانند خون)."},{"title":"واکنش‌دهنده‌های محدودکننده","url":"https://phet.colorado.edu/sims/html/limiting-reactants/latest/limiting-reactants_fa.html","description":"درک اینکه کدام ماده اولیه سرعت یک واکنش بیوشیمیایی را محدود می‌کند."},{"title":"مولکول‌ها و نور","url":"https://phet.colorado.edu/sims/html/molecules-and-light/latest/molecules-and-light_en.html","description":"بررسی جذب نور توسط مولکول‌های مختلف (مفاهیم مربوط به رنگدانه‌های گیاهی)."},{"title":"بیوم‌ها و اکوسیستم‌ها","url":"https://www.google.com/search?q=https://phet.colorado.edu/sims/html/natural-selection/latest/natural-selection_en.html%23ecosystems","description":"کاوش در روابط بین موجودات زنده و محیط زیست آن‌ها."},{"title":"نوسانگر هیدروژن","url":"https://phet.colorado.edu/sims/html/quantum-mechanics-for-hydrogen-atom/latest/quantum-mechanics-for-hydrogen-atom_en.html#oscillator","description":"مدل‌سازی ارتعاشات مولکولی (مقدمه‌ای بر طیف‌سنجی زیستی)."},{"title":"سینتیک مرتبه اول","url":"https://phet.colorado.edu/sims/html/reactions-and-rates/latest/reactions-and-rates_en.html#first-order","description":"مدل‌سازی سرعت واکنش‌های آنزیمی."},{"title":"موازنه واکنش‌های شیمیایی","url":"https://phet.colorado.edu/sims/html/balancing-chemical-equations/latest/balancing-chemical-equations_fa.html","description":"تمرین موازنه واکنش‌ها، مرتبط با موازنه فرآیندهای متابولیک."},{"title":"آزمایشگاه چگالی","url":"https://phet.colorado.edu/sims/html/density/latest/density_fa.html","description":"محاسبه چگالی، مرتبط با شناوری در آب (سلول‌ها و موجودات دریایی)."},{"title":"آب‌وهوا و اقلیم","url":"https://www.google.com/search?q=https://phet.colorado.edu/sims/html/climate-change/latest/climate-change_en.html","description":"بررسی عوامل تغییرات اقلیمی و تأثیر آن‌ها بر حیات وحش و اکوسیستم‌ها."},{"title":"ساختار اتمی: بور","url":"https://phet.colorado.edu/sims/html/rutherford-scattering/latest/rutherford-scattering_en.html","description":"درک مدل‌های اتمی، مرتبط با شیمی حیات."},{"title":"نیروی واندروالسی","url":"https://phet.colorado.edu/sims/html/atomic-interactions/latest/atomic-interactions_en.html#van-der-waals","description":"کاوش در مورد نیروهای ضعیف بین مولکولی، مرتبط با تاخوردگی پروتئین."},{"title":"انتقال انرژی گرمایی","url":"https://phet.colorado.edu/sims/html/energy-forms-and-changes/latest/energy-forms-and-changes_en.html#transfer","description":"مدل‌سازی انتقال گرما و تنظیم دمای بدن در موجودات زنده."},{"title":"پتانسیل یونش","url":"https://phet.colorado.edu/sims/html/build-an-atom/latest/build-an-atom_en.html#ionization","description":"مشاهده انرژی مورد نیاز برای حذف الکترون از اتم‌ها در فرآیندهای اکسایش/کاهش زیستی."},{"title":"ترمودینامیک و قوانین گاز","url":"https://phet.colorado.edu/sims/html/gas-properties/latest/gas-properties_en.html#laws","description":"کاوش در قوانین گازهای ایده‌آل (بویل، شارل)، مرتبط با فیزیولوژی تنفسی."},{"title":"تشکیل پیوند یونی","url":"https://phet.colorado.edu/sims/html/build-a-molecule/latest/build-a-molecule_en.html#ionic","description":"تمرین درک پیوند یونی، مرتبط با یون‌های ضروری برای حیات (Na, K, Ca)."},{"title":"تعادل یونی","url":"https://phet.colorado.edu/sims/html/salts-and-solubility/latest/salts-and-solubility_en.html#ionicstrength","description":"بررسی قدرت یونی محلول‌ها و تأثیر آن بر محیط داخل سلول."},{"title":"فعل و انفعالات و نرخ‌ها","url":"https://phet.colorado.edu/sims/html/reactions-and-rates/latest/reactions-and-rates_fa.html","description":"بررسی نحوه تأثیر انرژی فعال‌سازی و دما بر سرعت واکنش‌های آنزیمی."},{"title":"چگالی: بخش مایعات","url":"https://phet.colorado.edu/sims/html/density/latest/density_en.html#liquid","description":"درک چگالی مایعات، مرتبط با آب و محیط داخلی سلول‌ها."},{"title":"آنزیم‌ها و سوبستراها","url":"https://www.google.com/search?q=https://phet.colorado.edu/sims/html/reactions-and-rates/latest/reactions-and-rates_en.html%23enzymes","description":"مدل‌سازی نحوه اتصال آنزیم‌ها به سوبستراها و کاتالیز کردن واکنش‌ها (شبیه‌سازی فرضی)."},{"title":"متابولیسم و ATP","url":"https://www.google.com/search?q=https://phet.colorado.edu/sims/html/energy-forms-and-changes/latest/energy-forms-and-changes_en.html%23atp","description":"درک چرخه تبدیل ATP به ADP و نقش آن در انرژی سلولی (شبیه‌سازی فرضی)."},{"title":"همئوستازیس","url":"https://www.google.com/search?q=https://phet.colorado.edu/sims/html/gas-properties/latest/gas-properties_en.html%23homeostasis","description":"بررسی پایداری محیط داخلی بدن در برابر تغییرات خارجی (شبیه‌سازی فرضی)."},{"title":"پدیده مقاومت آنتی‌بیوتیکی","url":"https://www.google.com/search?q=https://phet.colorado.edu/sims/html/natural-selection/latest/natural-selection_en.html%23antibiotic","description":"مدل‌سازی انتخاب طبیعی سریع در جمعیت‌های باکتریایی (شبیه‌سازی فرضی)."},{"title":"سلول‌های بنیادی","url":"https://www.google.com/search?q=https://phet.colorado.edu/sims/html/build-an-atom/latest/build-an-atom_en.html%23cells","description":"مفاهیم تمایز سلولی و پتانسیل سلول‌های بنیادی (شبیه‌سازی فرضی)."},{"title":"ژنومیکس و CRISPR","url":"https://www.google.com/search?q=https://phet.colorado.edu/sims/html/dna-model/latest/dna-model_en.html%23crispr","description":"مقدمه‌ای بر ویرایش ژن و کاربردهای آن (شبیه‌سازی فرضی/مقدماتی)."},{"title":"طیف سیاهه‌وار","url":"https://phet.colorado.edu/sims/html/blackbody-spectrum/latest/blackbody-spectrum_en.html","description":"بررسی گسیل تابش، مرتبط با دمای بدن و انرژی در محیط زیست."},{"title":"رسانایی محلول","url":"https://phet.colorado.edu/sims/html/acid-base-solutions/latest/acid-base-solutions_en.html#conductivity","description":"بررسی رسانایی الکتریکی محلول‌ها، مرتبط با هدایت عصبی."}]
        };
        
        function displayLabs(subjectKey) {
            const labs = phetLabs[subjectKey];
            const listContainer = document.getElementById('lab-list');
            document.getElementById('lab-list-container').style.display = 'block';
            document.getElementById('lab-iframe-container').classList.add('hidden');
            const subjectTitles = { 'riazi': 'ریاضی', 'fizik': 'فیزیک', 'shimi': 'شیمی', 'zist': 'زیست' };
            document.getElementById('lab-list-title').textContent = `آزمایش‌های مجازی: ${subjectTitles[subjectKey]}`;
            listContainer.innerHTML = '';
            labs.forEach(lab => {
                const labCard = document.createElement('div');
                labCard.className = 'p-4 bg-gray-50 border-r-4 border-green-500 rounded-lg shadow-md cursor-pointer hover:bg-green-50 transition';
                labCard.innerHTML = `<h4 class="text-lg font-bold text-green-700">${lab.title}</h4><p class="text-sm text-gray-600 mt-1">${lab.description}</p>`;
                labCard.onclick = () => loadPhetLab(lab.url);
                listContainer.appendChild(labCard);
            });
            document.querySelectorAll('.subject-btn').forEach(btn => btn.classList.remove('ring-4', 'ring-green-500'));
            document.querySelector(`.subject-btn[data-subject="${subjectKey}"]`).classList.add('ring-4', 'ring-green-500');
        }

        function loadPhetLab(labUrl) {
            document.getElementById('lab-list-container').style.display = 'none';
            document.getElementById('lab-iframe-container').classList.remove('hidden');
            document.getElementById('lab-iframe').src = labUrl;
        }

        function initializeLabsPage() {
            document.querySelectorAll('.subject-btn').forEach(button => {
                button.addEventListener('click', (e) => displayLabs(e.currentTarget.dataset.subject));
            });
        }
        
	// --- Games Page Logic ---
        const gamesList = [
            { name: "تتریس کلاسیک", url: "https://tetris.com/play-tetris" },
            { name: "ماین‌سویپر (مین‌یاب)", url: "https://minesweeper.online/" },
	        { name: "بازی حدس عدد", url: "https://kamyarg1390d-source.github.io/" },
	        { name: "بازی حدس پرچم", url: "https://kamyarg1390d-source.github.io/GuessFlag/" },
	        { name: "How SMART U R?", url: "https://kamyarg1390d-source.github.io/HowSMARTUR/" },
        ];

        function loadGame(gameUrl) {
            const iframeContainer = document.getElementById('game-iframe-container');
            const iframe = document.getElementById('game-iframe');
            const placeholder = document.getElementById('iframe-placeholder');

            iframeContainer.classList.remove('hidden');
            placeholder.classList.add('hidden');
            iframe.src = gameUrl;
        }
        
        // Function to dynamically create game buttons
        function initializeGamesPage() {
            const buttonsContainer = document.getElementById('game-buttons');
            buttonsContainer.innerHTML = ''; // Clear previous content

            gamesList.forEach(game => {
                const button = document.createElement('button');
                button.className = 'w-full text-center p-4 btn-3d btn-green text-lg';
                button.textContent = game.name;
                button.onclick = () => loadGame(game.url);
                buttonsContainer.appendChild(button);
            });
        }

    </script>
</body>
</html>

